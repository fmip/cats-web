Started GET "/" for 127.0.0.1 at 2017-03-22 15:21:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (54.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c9e8d150f06f26df/variables" for 127.0.0.1 at 2017-03-22 15:21:27 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddNewColumnToUsers (20170226064916)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (180.7ms)[0m  [1m[35mALTER TABLE "users" ADD "user_type_id" integer[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170226064916"]]
  [1m[35m (18.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRationToOperation (20170226153058)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.3ms)[0m  [1m[35mALTER TABLE "operations" ADD "ration_id" integer[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170226153058"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRequestIdToRequisition (20170301145258)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "requisitions" ADD "request_id" integer NOT NULL[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170301145258"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveUomFromRequisitionItem (20170301145658)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (156.9ms)[0m  [1m[35mALTER TABLE "requisition_items" DROP "commodity_id"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "requisition_items" DROP "unit_of_measure_id"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170301145658"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGeneratedFlagToRequest (20170301150658)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.1ms)[0m  [1m[35mALTER TABLE "regional_requests" ADD "generated" boolean[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170301150658"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to RenameBillOfLoadingInGiftCertificate (20170309101930)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (115.9ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "bill_of_ladding"[0m
  [1m[35m (42.7ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "bill_of_loading" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170309101930"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeFloatFieldsToDecimalGiftCertificate (20170309113320)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "amount"[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "estimated_price"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "estimated_tax"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "amount" decimal(15,2)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "estimated_price" decimal(15,2)[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "estimated_tax" decimal(15,2)[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170309113320"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to MoveItemDetailsToGiftCertificate (20170309152300)
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (165.5ms)[0m  [1m[35mDROP TABLE "gift_certificate_items"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "fund_source_id" integer[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "currency_id" integer[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170309152300"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOwnershipTypes (20170315072023)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (490.4ms)[0m  [1m[35mCREATE TABLE "ownership_types" ("id" serial primary key, "name" character varying NOT NULL, "description" text, "created_by" integer, "modified_by" integer, "deleted" boolean DEFAULT 'f', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170315072023"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddOwnershipTypeToTransporter (20170315072655)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (131.7ms)[0m  [1m[35mALTER TABLE "transporters" DROP "ownership"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "transporters" ADD "ownership_type_id" integer[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170315072655"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCommodityIdToGiftCertificate (20170322110528)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "commodity_id" integer[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322110528"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAddressToHub (20170322110633)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (102.3ms)[0m  [1m[35mALTER TABLE "hubs" ADD "address" character varying[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322110633"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (98.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/" for 127.0.0.1 at 2017-03-22 15:23:04 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 43ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-22 15:23:04 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (6.1ms)
  Rendered devise/sessions/new.html.erb within layouts/application (44.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_topnavbar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (8.5ms)
Completed 200 OK in 44023ms (Views: 43934.0ms | ActiveRecord: 12.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-22 15:23:57 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NiZ+c3a7Ih9GConBwe4DZ+fGUegwqd2AS9XOHO+0JBQT3MmZXMAUBPTDxWJh1LAiyseuRmKFkZBnIdMdLHRvUA==", "user"=>{"email"=>"admin@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (330.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 336ms (ActiveRecord: 330.1ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NiZ+c3a7Ih9GConBwe4DZ+fGUegwqd2AS9XOHO+0JBQT3MmZXMAUBPTDxWJh1LAiyseuRmKFkZBnIdMdLHRvUA==", "user"=>{"email"=>"admin@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (3.9ms)
  Rendered devise/sessions/new.html.erb within layouts/application (14.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 991ms (Views: 643.9ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-22 15:24:11 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"HUkUa4QJjc1W5hEqSJkEE1dSNw+E3vJjxPZ88zk7+ak4s6OBrnK71uQvXYnoo7dWelPIodbyvnPoAmHy+vuy7Q==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", 2017-03-22 12:24:11 UTC], ["last_sign_in_at", 2017-03-22 07:51:39 UTC], ["sign_in_count", 17], ["updated_at", 2017-03-22 12:24:11 UTC], ["id", 18]]
  [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 440ms (ActiveRecord: 34.9ms)


Started GET "/" for 127.0.0.1 at 2017-03-22 15:24:11 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  Rendered layouts/_navigation.html.erb (39.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 574ms (Views: 567.0ms | ActiveRecord: 2.3ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 15:24:16 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (6.5ms)
  Rendered layouts/_headcontent.html.erb (596.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[36mRole Load (74.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (348.2ms)
  Rendered layouts/_topnavbar.html.erb (7.4ms)
  Rendered layouts/_footer.html.erb (5.7ms)
Completed 200 OK in 1000ms (Views: 898.9ms | ActiveRecord: 93.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 15:24:28 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (11.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (70.0ms)
  Rendered layouts/_headcontent.html.erb (673.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (43.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 853ms (Views: 799.6ms | ActiveRecord: 30.0ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-22 15:24:43 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (16.7ms)
  Rendered layouts/_headcontent.html.erb (402.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (38.0ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (5.5ms)
Completed 200 OK in 509ms (Views: 478.9ms | ActiveRecord: 8.7ms)


Started GET "/en/roles/new" for 127.0.0.1 at 2017-03-22 15:24:49 +0300
Processing by RolesController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/new.html.erb within layouts/admin
  Rendered roles/_form.html.erb (7.9ms)
  Rendered roles/new.html.erb within layouts/admin (9.8ms)
  Rendered layouts/_headcontent.html.erb (414.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.2ms)
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (43.3ms)
  Rendered layouts/_topnavbar.html.erb (15.5ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 528ms (Views: 518.2ms | ActiveRecord: 3.4ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-22 15:24:54 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (9.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (16.5ms)
  Rendered layouts/_headcontent.html.erb (360.3ms)
  Rendered layouts/_layout_common_js.html.erb (1.9ms)
  Rendered layouts/_logoheader.html.erb (3.5ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (33.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 458ms (Views: 435.9ms | ActiveRecord: 15.1ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-22 15:30:12 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (14.6ms)
  Rendered layouts/_headcontent.html.erb (431.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (8.9ms)
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (46.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 536ms (Views: 514.1ms | ActiveRecord: 16.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 15:30:15 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (8.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (62.0ms)
  Rendered layouts/_headcontent.html.erb (493.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (42.4ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (4.8ms)
Completed 200 OK in 642ms (Views: 612.8ms | ActiveRecord: 19.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 15:47:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (10.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (79.1ms)
  Rendered layouts/_headcontent.html.erb (3107.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (19.2ms)
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (77.7ms)
  Rendered layouts/_topnavbar.html.erb (8.3ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 3697ms (Views: 3311.6ms | ActiveRecord: 55.6ms)


Started GET "/en/users/21/edit" for 127.0.0.1 at 2017-03-22 15:47:36 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 9.0ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5baf3d5b0f71b8fb/variables" for 127.0.0.1 at 2017-03-22 15:47:36 +0300
Started GET "/en/users/26/edit" for 127.0.0.1 at 2017-03-22 15:47:52 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 11.0ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0743270def7ff5e8/variables" for 127.0.0.1 at 2017-03-22 15:47:52 +0300
Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-22 15:47:59 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (70.6ms)
  Rendered layouts/_headcontent.html.erb (857.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (91.1ms)
  Rendered layouts/_topnavbar.html.erb (8.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 1101ms (Views: 1055.1ms | ActiveRecord: 27.7ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 15:49:40 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (9.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (8.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (130.0ms)
  Rendered layouts/_headcontent.html.erb (762.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (14.0ms)
  [1m[36mRole Load (8.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (83.8ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 1064ms (Views: 968.1ms | ActiveRecord: 56.5ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 15:58:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (195.7ms)
  Rendered layouts/_headcontent.html.erb (2391.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  [1m[36mRole Load (10.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (86.7ms)
  Rendered layouts/_topnavbar.html.erb (3.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2893ms (Views: 2693.1ms | ActiveRecord: 59.1ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 16:16:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (180.4ms)
  Rendered layouts/_headcontent.html.erb (2479.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (114.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2973ms (Views: 2801.4ms | ActiveRecord: 43.2ms)


Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:16:48 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (57.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  Rendered layouts/_navigation.html.erb (31.4ms)
  Rendered layouts/_topnavbar.html.erb (6.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 645ms (Views: 620.2ms | ActiveRecord: 13.1ms)


Started DELETE "/en/departments/84" for 127.0.0.1 at 2017-03-22 16:18:06 +0300
Processing by DepartmentsController#destroy as HTML
  Parameters: {"authenticity_token"=>"4UlWfyoASmYzWXl01AXaw72fv89LcaMZFW0F9XhFPHbzMcVxTGGKrwqmasozZfYE6WOsAbYRpbMgL07k7pDBTQ==", "locale"=>"en", "id"=>"84"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "departments" SET "deleted_at" = '2017-03-22 13:18:06.137092', "updated_at" = '2017-03-22 13:18:06.137324' WHERE "departments"."id" = $1[0m  [["id", 84]]
  [1m[35m (41.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/departments
Completed 302 Found in 75ms (ActiveRecord: 54.0ms)


Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:18:06 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (6.6ms)
  Rendered layouts/_layout_common_js.html.erb (3.2ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  Rendered layouts/_navigation.html.erb (28.2ms)
  Rendered layouts/_topnavbar.html.erb (2.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 546ms (Views: 536.7ms | ActiveRecord: 3.2ms)


Started GET "/en/departments/new" for 127.0.0.1 at 2017-03-22 16:18:09 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (1.9ms)
  Rendered departments/new.html.erb within layouts/application (8.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_navigation.html.erb (31.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 563ms (Views: 544.7ms | ActiveRecord: 7.7ms)


Started POST "/en/departments" for 127.0.0.1 at 2017-03-22 16:18:25 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SdzdF6JEh3jpe2oMJI4ZRdkYrCyykQtSrl9H+wD7aEZbpE4ZxCVHsdCEebLD7jWCjeS/4k/xDfibHQzqli6VfQ==", "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (41.1ms)[0m  [1m[32mINSERT INTO "departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:18:25 UTC], ["updated_at", 2017-03-22 13:18:25 UTC]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/departments/87
Completed 302 Found in 80ms (ActiveRecord: 66.8ms)


Started GET "/en/departments/87" for 127.0.0.1 at 2017-03-22 16:18:25 +0300
Processing by DepartmentsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"87"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  Rendering departments/show.html.erb within layouts/application
  Rendered departments/show.html.erb within layouts/application (1.0ms)
  Rendered layouts/_layout_common_js.html.erb (13.3ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  Rendered layouts/_navigation.html.erb (29.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 617ms (Views: 599.2ms | ActiveRecord: 1.0ms)


Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:18:30 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (14.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (13.4ms)
  Rendered layouts/_navigation.html.erb (35.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 579ms (Views: 568.9ms | ActiveRecord: 3.5ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322132045)
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:24:53 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e43078b90cfb40b9/variables" for 127.0.0.1 at 2017-03-22 16:24:53 +0300
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:24:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/265a0faa9670beb6/variables" for 127.0.0.1 at 2017-03-22 16:24:55 +0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322132045)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:26:25 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f0be5857e9c81a06/variables" for 127.0.0.1 at 2017-03-22 16:26:26 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322132045)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (42.6ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322132045"]]
  [1m[35m (23.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:28:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [GET] "/en/departments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [307 times] (211.9ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (32.6ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (19.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (392.1ms)
Started GET "/" for 127.0.0.1 at 2017-03-22 16:29:03 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.5ms)
  Rendered layouts/_navigation.html.erb (50.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 4760ms (Views: 4640.2ms | ActiveRecord: 9.0ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 16:29:11 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.9ms)
  Rendered layouts/_headcontent.html.erb (637.1ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (4.2ms)
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (260.7ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 947ms (Views: 930.8ms | ActiveRecord: 11.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:29:20 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (5.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (22.9ms)
Completed 500 Internal Server Error in 52ms (ActiveRecord: 8.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActiveRecord::StatementInvalid - PG::UndefinedColumn: ERROR:  column departments.deleted_at does not exist
LINE 1: SELECT "departments".* FROM "departments" WHERE "departments...
                                                        ^
: SELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL:
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:578:in `translate_exception_class'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:591:in `rescue in log'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:585:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `block in select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:108:in `cache_sql'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `select_all'
  activerecord (5.0.2) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (5.0.2) lib/active_record/relation.rb:702:in `exec_queries'
  activerecord (5.0.2) lib/active_record/relation.rb:583:in `load'
  activerecord (5.0.2) lib/active_record/relation.rb:260:in `records'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/departments/index.html.erb:34:in `_app_views_departments_index_html_erb___210748001115548111_70215861628420'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/eec29855181d2450/variables" for 127.0.0.1 at 2017-03-22 16:29:20 +0300
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (3.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (3.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322133007)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322133007)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (127.7ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322133007"]]
  [1m[35m (44.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 16:33:23 +0300
  [1m[36mActiveRecord::SchemaMigration Load (7.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (17.5ms)
  Rendered layouts/_headcontent.html.erb (2633.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (205.7ms)
  Rendered layouts/_topnavbar.html.erb (7.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3061ms (Views: 2888.1ms | ActiveRecord: 43.3ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:33:34 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (15.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (2.6ms)
  Rendered layouts/_navigation.html.erb (29.1ms)
  Rendered layouts/_topnavbar.html.erb (6.2ms)
  Rendered layouts/_footer.html.erb (3.6ms)
Completed 200 OK in 627ms (Views: 601.6ms | ActiveRecord: 10.6ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-22 16:33:38 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (47.9ms)
  Rendered departments/new.html.erb within layouts/application (58.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.8ms)
  Rendered layouts/_navigation.html.erb (37.8ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 743ms (Views: 699.7ms | ActiveRecord: 5.4ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:33:54 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9NXCKsTzkzkjfY16iQN9RVO8b/5zCE/shJSwhP75lYnmrVEkopJT8BqCnsRuY1GCB0B8MI5oSUax1vuVaCxosg==", "department"=>{"name"=>"new department", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department"], ["description", ""], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:33:54 UTC], ["updated_at", 2017-03-22 13:33:54 UTC]]
  [1m[35m (29.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments/1?locale=en
Completed 302 Found in 59ms (ActiveRecord: 39.0ms)


Started GET "/departments/1?locale=en" for 127.0.0.1 at 2017-03-22 16:33:54 +0300
Processing by DepartmentsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering departments/show.html.erb within layouts/application
  Rendered departments/show.html.erb within layouts/application (1.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  Rendered layouts/_navigation.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (11.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 635ms (Views: 614.9ms | ActiveRecord: 5.2ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:34:01 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (3.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (6.7ms)
  Rendered layouts/_layout_common_js.html.erb (9.5ms)
  Rendered layouts/_logoheader.html.erb (5.7ms)
  Rendered layouts/_navigation.html.erb (31.4ms)
  Rendered layouts/_topnavbar.html.erb (7.0ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 704ms (Views: 685.4ms | ActiveRecord: 11.9ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:34:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (6.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (38.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_navigation.html.erb (32.7ms)
  Rendered layouts/_topnavbar.html.erb (10.5ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2765ms (Views: 2602.9ms | ActiveRecord: 17.0ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-22 16:34:54 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (39.4ms)
  Rendered departments/new.html.erb within layouts/application (48.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  Rendered layouts/_navigation.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (11.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 690ms (Views: 677.1ms | ActiveRecord: 1.4ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:09 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c7CqeahAQ+GgvsJUCk9UcIh0JCDroi3s7Bu52Xpr+xlhyDl3ziGDKJlB0ertL3i33Ig37hbCK0bZWfLI7L4GIg==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department two"], ["description", "and description"], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:35:09 UTC], ["updated_at", 2017-03-22 13:35:09 UTC]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 42ms (ActiveRecord: 21.5ms)



ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"departments", :locale=>:en} missing required keys: [:id]:
  actionpack (5.0.2) lib/action_dispatch/journey/formatter.rb:51:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:629:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:660:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:707:in `url_for'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:236:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:177:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:295:in `block (2 levels) in define_url_helper'
  app/controllers/departments_controller.rb:31:in `block (2 levels) in create'
  actionpack (5.0.2) lib/action_controller/metal/mime_responds.rb:201:in `respond_to'
  app/controllers/departments_controller.rb:29:in `create'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3b37e77b09b8ba04/variables" for 127.0.0.1 at 2017-03-22 16:35:09 +0300
Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c7CqeahAQ+GgvsJUCk9UcIh0JCDroi3s7Bu52Xpr+xlhyDl3ziGDKJlB0ertL3i33Ig37hbCK0bZWfLI7L4GIg==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department two"], ["description", "and description"], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:35:37 UTC], ["updated_at", 2017-03-22 13:35:37 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 209ms (ActiveRecord: 26.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:37 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (25.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (19.9ms)
  Rendered layouts/_navigation.html.erb (42.5ms)
  Rendered layouts/_topnavbar.html.erb (11.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2835ms (Views: 2812.7ms | ActiveRecord: 9.4ms)


Started DELETE "/departments/3?locale=en" for 127.0.0.1 at 2017-03-22 16:35:51 +0300
Processing by DepartmentsController#destroy as HTML
  Parameters: {"authenticity_token"=>"v4Y+oMhMsosXr9Eu7HrSiYtKFxEunb7ZVvNPq2Fl7i+t/q2uri1yQi5QwpALGv5O37YE39P9uHNjsQS697ATFA==", "locale"=>"en", "id"=>"3"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "departments" SET "deleted_at" = '2017-03-22 13:35:52.022720', "updated_at" = '2017-03-22 13:35:52.022828' WHERE "departments"."id" = $1[0m  [["id", 3]]
  [1m[35m (167.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 205ms (ActiveRecord: 177.1ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:52 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (8.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_navigation.html.erb (37.1ms)
  Rendered layouts/_topnavbar.html.erb (9.8ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 742ms (Views: 726.3ms | ActiveRecord: 3.2ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:38:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (41.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.7ms)
  Rendered layouts/_navigation.html.erb (18.9ms)
  Rendered layouts/_topnavbar.html.erb (4.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2786ms (Views: 2631.4ms | ActiveRecord: 19.5ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-22 16:38:24 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (24.5ms)
  Rendered departments/new.html.erb within layouts/application (37.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.8ms)
  Rendered layouts/_navigation.html.erb (33.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 671ms (Views: 652.3ms | ActiveRecord: 4.3ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:38:30 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"94S09Z559afbdxTEfYHI0Ae1BeSSvhcahWA2tohjAPPl/Cf7+Bg1buKIB3qa4eQXU0kWKm/eEbCwIn2nHrb9yA==", "department"=>{"name"=>"new department two", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL LIMIT $2[0m  [["name", "new department two"], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (7.1ms)
  Rendered departments/new.html.erb within layouts/application (11.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_navigation.html.erb (23.6ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 563ms (Views: 509.6ms | ActiveRecord: 15.3ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:38:36 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (6.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (13.0ms)
  Rendered layouts/_navigation.html.erb (49.7ms)
  Rendered layouts/_topnavbar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 602ms (Views: 573.3ms | ActiveRecord: 5.2ms)


Started GET "/departments/2/edit?locale=en" for 127.0.0.1 at 2017-03-22 16:38:47 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/application
  Rendered departments/_form.html.erb (5.0ms)
  Rendered departments/edit.html.erb within layouts/application (15.4ms)
  Rendered layouts/_layout_common_js.html.erb (7.2ms)
  Rendered layouts/_logoheader.html.erb (8.9ms)
  Rendered layouts/_navigation.html.erb (19.5ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 671ms (Views: 651.9ms | ActiveRecord: 3.8ms)


Started PATCH "/departments/2?locale=en" for 127.0.0.1 at 2017-03-22 16:38:50 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SkvWPWADHmG+8hGSJYPcn3fWsH/hUwD5xMEyAnfBRmdYM0UzBmLeqIcNAizC4/BYIyqjsRwzBlPxg3kT4RS7XA==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "new department two"], ["id", 2], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments/2?locale=en
Completed 302 Found in 60ms (ActiveRecord: 11.0ms)


Started GET "/departments/2?locale=en" for 127.0.0.1 at 2017-03-22 16:38:50 +0300
Processing by DepartmentsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/show.html.erb within layouts/application
  Rendered departments/show.html.erb within layouts/application (1.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_navigation.html.erb (17.8ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 541ms (Views: 528.0ms | ActiveRecord: 2.4ms)


Started GET "/departments/2/edit?locale=en" for 127.0.0.1 at 2017-03-22 16:39:45 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/application
  Rendered departments/_form.html.erb (39.6ms)
  Rendered departments/edit.html.erb within layouts/application (54.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_navigation.html.erb (48.3ms)
  Rendered layouts/_topnavbar.html.erb (6.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2937ms (Views: 2741.9ms | ActiveRecord: 25.3ms)


Started PATCH "/departments/2?locale=en" for 127.0.0.1 at 2017-03-22 16:39:52 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cySOWQ5pEBUPTY32Dgr5WGn7GUC9j/Elgd7bxXAiZSVhXB1XaAjQ3DaynkjpatWfPQcKjkDv94+0nJDU5veYHg==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "new department two"], ["id", 2], ["LIMIT", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 82ms (ActiveRecord: 20.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:39:52 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (5.3ms)
  Rendered layouts/_layout_common_js.html.erb (10.3ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  Rendered layouts/_navigation.html.erb (48.0ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 633ms (Views: 619.5ms | ActiveRecord: 5.6ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (112.9ms)[0m  [1m[35mCREATE TABLE "users_departments" ("id" serial primary key, "user_id" integer, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_cbafd1e5ff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b917af0f43"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_user_id" ON "users_departments"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_department_id" ON "users_departments"  ("department_id")[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322184115"]]
  [1m[35m (21.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/" for 127.0.0.1 at 2017-03-22 21:54:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 40ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-22 21:54:15 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (39.9ms)
  Rendered layouts/_layout_common_js.html.erb (8.7ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2387ms (Views: 2309.1ms | ActiveRecord: 7.4ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-22 21:54:30 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kqh3/creLGz+jKZPrAp2VEr5GqTF3j7Gf3o9et3MWzbBalereWbcnSM/OJ4EhTR1+Zf3dWF+QfzGlxkCVGxJVQ==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", 2017-03-22 18:54:30 UTC], ["last_sign_in_at", 2017-03-22 12:24:11 UTC], ["sign_in_count", 18], ["updated_at", 2017-03-22 18:54:30 UTC], ["id", 18]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 402ms (ActiveRecord: 12.9ms)


Started GET "/" for 127.0.0.1 at 2017-03-22 21:54:30 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (12.1ms)
  Rendered layouts/_logoheader.html.erb (14.4ms)
  Rendered layouts/_navigation.html.erb (39.8ms)
  Rendered layouts/_topnavbar.html.erb (8.0ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 639ms (Views: 630.4ms | ActiveRecord: 2.9ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 21:54:35 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.6ms)
  Rendered layouts/_headcontent.html.erb (525.7ms)
  Rendered layouts/_layout_common_js.html.erb (7.6ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (161.7ms)
  Rendered layouts/_topnavbar.html.erb (8.3ms)
  Rendered layouts/_footer.html.erb (3.4ms)
Completed 200 OK in 760ms (Views: 746.1ms | ActiveRecord: 6.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 21:54:41 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 34ms (ActiveRecord: 2.6ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 21:54:41 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.7ms)
  Rendered layouts/_headcontent.html.erb (605.1ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (81.8ms)
  Rendered layouts/_topnavbar.html.erb (4.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 751ms (Views: 741.4ms | ActiveRecord: 4.4ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 21:56:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (30.6ms)
  Rendered layouts/_headcontent.html.erb (2820.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.2ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  Rendered layouts/_settingnav.html.erb (50.4ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 3146ms (Views: 2973.0ms | ActiveRecord: 21.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 21:56:22 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (191.4ms)
  Rendered layouts/_headcontent.html.erb (582.7ms)
  Rendered layouts/_layout_common_js.html.erb (9.8ms)
  Rendered layouts/_logoheader.html.erb (6.2ms)
  Rendered layouts/_settingnav.html.erb (32.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 885ms (Views: 850.6ms | ActiveRecord: 20.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 21:56:29 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/departments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [307 times] (204.0ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (24.1ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (366.8ms)
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 21:59:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 406 Not Acceptable in 238ms (ActiveRecord: 16.5ms)



ActionController::UnknownFormat - UsersController#departments is missing a template for this request format and variant.

request.formats: ["text/html"]
request.variant: []

NOTE! For XHR/Ajax or API requests, this action would normally respond with 204 No Content: an empty white screen. Since you're loading it in a web browser, we assume that you expected to actually render a template, not nothing, so we're showing an error to be extra-clear. If you expect 204 No Content, carry on. That's what you'll get from an XHR or API request. Give it a shot.:
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:56:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/04ce4545bdeea1ca/variables" for 127.0.0.1 at 2017-03-22 21:59:17 +0300
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:06:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (23.2ms)
Completed 500 Internal Server Error in 194ms (ActiveRecord: 10.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___4076279030532526235_69966361394360'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1e2f9c6223c0e887/variables" for 127.0.0.1 at 2017-03-22 22:06:25 +0300
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-22 22:06:42 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (211.5ms)
  Rendered layouts/_headcontent.html.erb (2899.7ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  Rendered layouts/_settingnav.html.erb (150.7ms)
  Rendered layouts/_topnavbar.html.erb (21.4ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 3352ms (Views: 3291.7ms | ActiveRecord: 21.4ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 22:06:53 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (7.5ms)
  Rendered layouts/_headcontent.html.erb (588.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_settingnav.html.erb (51.9ms)
  Rendered layouts/_topnavbar.html.erb (9.6ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 721ms (Views: 686.8ms | ActiveRecord: 16.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:06:59 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (12.6ms)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 2.4ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___4076279030532526235_46929387960780'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0cf7a2e89c0ef0a4/variables" for 127.0.0.1 at 2017-03-22 22:06:59 +0300
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:09:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (17.2ms)
Completed 500 Internal Server Error in 212ms (ActiveRecord: 23.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___1342021021015208902_69901400128880'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/46ceb9084431a3b9/variables" for 127.0.0.1 at 2017-03-22 22:09:10 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:09:16 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (8.6ms)
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___1342021021015208902_47201807160480'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/10970301542a8ad0/variables" for 127.0.0.1 at 2017-03-22 22:09:17 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:09:24 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (19.8ms)
Completed 500 Internal Server Error in 53ms (ActiveRecord: 6.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___1342021021015208902_47201790529360'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f65e416a42eecfda/variables" for 127.0.0.1 at 2017-03-22 22:09:24 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started POST "/__better_errors/f65e416a42eecfda/variables" for 127.0.0.1 at 2017-03-22 22:09:41 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:11:46 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (17.7ms)
Completed 500 Internal Server Error in 170ms (ActiveRecord: 17.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb__714957191461321349_47047279189700'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a44e7856141e5871/variables" for 127.0.0.1 at 2017-03-22 22:11:47 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:16:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (84.1ms)
Completed 500 Internal Server Error in 302ms (ActiveRecord: 28.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `department' for #<User:0x007f634043e7c0>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:33:in `block (2 levels) in _app_views_users_departments_html_erb___2029638061335779481_70032128234760'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/departments.html.erb:30:in `block in _app_views_users_departments_html_erb___2029638061335779481_70032128234760'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:25:in `_app_views_users_departments_html_erb___2029638061335779481_70032128234760'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dff7acb7040f979d/variables" for 127.0.0.1 at 2017-03-22 22:16:58 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:18:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (116.1ms)
Completed 500 Internal Server Error in 332ms (ActiveRecord: 19.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `departments' for #<User:0x0055ff8651dcf0>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:33:in `block (2 levels) in _app_views_users_departments_html_erb__4113887986246134916_47277979381700'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/departments.html.erb:30:in `block in _app_views_users_departments_html_erb__4113887986246134916_47277979381700'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:25:in `_app_views_users_departments_html_erb__4113887986246134916_47277979381700'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/753f5f0bc29ef903/variables" for 127.0.0.1 at 2017-03-22 22:18:34 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:20:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (112.2ms)
Completed 500 Internal Server Error in 372ms (ActiveRecord: 23.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `departments' for #<User:0x0055b92399a188>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:33:in `block (2 levels) in _app_views_users_departments_html_erb___3324022280421474054_47126827409960'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/departments.html.erb:30:in `block in _app_views_users_departments_html_erb___3324022280421474054_47126827409960'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:25:in `_app_views_users_departments_html_erb___3324022280421474054_47126827409960'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/58b37fe76a9961ae/variables" for 127.0.0.1 at 2017-03-22 22:20:37 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:25:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (7.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (38.4ms)
  Rendered layouts/_headcontent.html.erb (2815.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (20.2ms)
  Rendered layouts/_settingnav.html.erb (107.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3190ms (Views: 2998.9ms | ActiveRecord: 32.0ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-22 22:26:16 +0300

AbstractController::ActionNotFound - The action 'updateDepartments' could not be found for UsersController:
  actionpack (5.0.2) lib/abstract_controller/base.rb:121:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/74c68241184ae28a/variables" for 127.0.0.1 at 2017-03-22 22:26:17 +0300
Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-22 22:27:21 +0300

AbstractController::ActionNotFound - The action 'updateDepartments' could not be found for UsersController:
  actionpack (5.0.2) lib/abstract_controller/base.rb:121:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5476998d9a83a535/variables" for 127.0.0.1 at 2017-03-22 22:27:21 +0300
Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 22:27:50 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (13.2ms)
  Rendered layouts/_headcontent.html.erb (645.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.9ms)
  Rendered layouts/_settingnav.html.erb (50.3ms)
  Rendered layouts/_topnavbar.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 811ms (Views: 748.9ms | ActiveRecord: 10.6ms)


Started PUT "/users/21/updateRoles" for 127.0.0.1 at 2017-03-22 22:27:54 +0300
Processing by UsersController#updateRoles as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oylnqFvEJs4sGRKYt/160zyo1cfNHuLucM+6VtIUkPdFJgQPlCdJzjLC+ZInT+4x7aZVbbHMAty5Qyil2PondA==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 35ms (ActiveRecord: 9.2ms)



ActionController::ParameterMissing - param is missing or the value is empty: roles:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:65:in `updateRoles'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/082aca78d9ef37cf/variables" for 127.0.0.1 at 2017-03-22 22:27:54 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:30:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (13.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (39.6ms)
  Rendered layouts/_headcontent.html.erb (2330.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  Rendered layouts/_settingnav.html.erb (84.5ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2651ms (Views: 2487.8ms | ActiveRecord: 37.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:30:25 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 106ms (ActiveRecord: 16.3ms)



NoMethodError - undefined method `departments=' for #<User:0x007f67e80d21e8>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:46:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e13d9cb4a36ea89b/variables" for 127.0.0.1 at 2017-03-22 22:30:26 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:35:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 235ms (ActiveRecord: 36.6ms)



NoMethodError - undefined method `departments=' for #<User:0x007f90bc3f2880>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:46:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b508045158efeee3/variables" for 127.0.0.1 at 2017-03-22 22:35:57 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:51:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
Completed 500 Internal Server Error in 303ms (ActiveRecord: 26.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

PG::UndefinedColumn - ERROR:  column users_departments.deleted_at does not exist
LINE 1: ..._id" WHERE "departments"."deleted_at" IS NULL AND "users_dep...
                                                             ^
:
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `block in exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:587:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `block in select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:108:in `cache_sql'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `select_all'
  activerecord (5.0.2) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (5.0.2) lib/active_record/relation.rb:702:in `exec_queries'
  activerecord (5.0.2) lib/active_record/association_relation.rb:32:in `exec_queries'
  activerecord (5.0.2) lib/active_record/relation.rb:583:in `load'
  activerecord (5.0.2) lib/active_record/relation.rb:260:in `records'
  activerecord (5.0.2) lib/active_record/relation.rb:256:in `to_a'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:470:in `get_records'
  activerecord (5.0.2) lib/active_record/associations/has_many_through_association.rb:201:in `find_target'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:416:in `load_target'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:388:in `replace'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:53:in `writer'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:119:in `departments='
  app/controllers/users_controller.rb:46:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/04bc0a8dbb68139d/variables" for 127.0.0.1 at 2017-03-22 22:51:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "users_departments"[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170322184115"]]
  [1m[35m (37.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (61.1ms)[0m  [1m[35mCREATE TABLE "users_departments" ("id" serial primary key, "user_id" integer, "department_id" integer, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_cbafd1e5ff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b917af0f43"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (40.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_user_id" ON "users_departments"  ("user_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_department_id" ON "users_departments"  ("department_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322184115"]]
  [1m[35m (23.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (8.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:56:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 394ms (ActiveRecord: 38.5ms)



NoMethodError - undefined method `add_department' for #<User:0x0055cc81374a58>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/463c41a0e4a87e06/variables" for 127.0.0.1 at 2017-03-22 22:56:37 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:04:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 309ms (ActiveRecord: 49.6ms)



NameError - uninitialized constant UsersController::UsersDepartments:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/82ff98984ef842c8/variables" for 127.0.0.1 at 2017-03-22 23:04:14 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:05:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 253ms (ActiveRecord: 29.5ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:21:in `new'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `each'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5eb4dd51b3a7d3fb/variables" for 127.0.0.1 at 2017-03-22 23:05:58 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:06:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (9.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (93.0ms)
  Rendered layouts/_headcontent.html.erb (2841.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.5ms)
  Rendered layouts/_settingnav.html.erb (99.8ms)
  Rendered layouts/_topnavbar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (5.6ms)
Completed 200 OK in 3143ms (Views: 3105.5ms | ActiveRecord: 17.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:06:28 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"edhDbhrEoTiFnLeT59Ag57OtFjT3BkWXAA5AckFrpYuf1yDJ1SfOOJtHXJl3YrQFYqOWnovUpaXJgtKBS4USCA==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 43ms (ActiveRecord: 9.1ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:21:in `new'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `each'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/934eb231392c97da/variables" for 127.0.0.1 at 2017-03-22 23:06:29 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:06:59 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (100.4ms)
  Rendered layouts/_headcontent.html.erb (565.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (14.2ms)
  Rendered layouts/_settingnav.html.erb (51.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 782ms (Views: 750.6ms | ActiveRecord: 25.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:07:04 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (33.1ms)
  Rendered layouts/_headcontent.html.erb (538.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (110.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.5ms)
Completed 200 OK in 744ms (Views: 712.1ms | ActiveRecord: 19.1ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:07:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"POubdXRjKSDuq7bvtBUTmSH1RBQrn12FMqiA894F2MPa5PjSu4BGIPBwXeUkp4d78PvEvldNvbf7JBIA1OtvQA==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 44ms (ActiveRecord: 18.2ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:21:in `new'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `each'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/834c3b8e0b001247/variables" for 127.0.0.1 at 2017-03-22 23:07:11 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:11:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected '\n', expecting =>
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:53: syntax error, unexpected '}', expecting keyword_end
      })
       ^:
  app/controllers/users_controller.rb:51:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2eb6dcbafa1eac56/variables" for 127.0.0.1 at 2017-03-22 23:11:15 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:12:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected '\n', expecting =>
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:54: syntax error, unexpected '}', expecting keyword_end
      })
       ^:
  app/controllers/users_controller.rb:51:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bb76ae95ac0d7a88/variables" for 127.0.0.1 at 2017-03-22 23:12:30 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:13:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tIDENTIFIER, expecting '}'
        user_id: @user.id
               ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:54: syntax error, unexpected '}', expecting keyword_end
      })
       ^:
  app/controllers/users_controller.rb:52:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8322468cbe2338de/variables" for 127.0.0.1 at 2017-03-22 23:13:42 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:14:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"POubdXRjKSDuq7bvtBUTmSH1RBQrn12FMqiA894F2MPa5PjSu4BGIPBwXeUkp4d78PvEvldNvbf7JBIA1OtvQA==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 314ms (ActiveRecord: 21.6ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5dae20fa74e73437/variables" for 127.0.0.1 at 2017-03-22 23:14:14 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:14:43 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"POubdXRjKSDuq7bvtBUTmSH1RBQrn12FMqiA894F2MPa5PjSu4BGIPBwXeUkp4d78PvEvldNvbf7JBIA1OtvQA==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 823ms (ActiveRecord: 47.2ms)



NameError - undefined local variable or method `department_id' for #<UsersController:0x007f26545ab6b8>
Did you mean?  department
               departments
               department_url
               departments_url
               department_path:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/abd242aa97dee700/variables" for 127.0.0.1 at 2017-03-22 23:14:44 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:22:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (170.3ms)
  Rendered layouts/_headcontent.html.erb (2874.7ms)
  Rendered layouts/_layout_common_js.html.erb (3.2ms)
  Rendered layouts/_logoheader.html.erb (9.0ms)
  Rendered layouts/_settingnav.html.erb (114.2ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (4.6ms)
Completed 200 OK in 3419ms (Views: 3235.8ms | ActiveRecord: 30.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:22:29 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 341ms (ActiveRecord: 18.1ms)



NameError - undefined local variable or method `department_id' for #<UsersController:0x007f61436e0978>
Did you mean?  department
               departments
               department_url
               departments_url
               department_path:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e76bacb45aa08809/variables" for 127.0.0.1 at 2017-03-22 23:22:29 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:25:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 786ms (ActiveRecord: 41.8ms)



NameError - undefined local variable or method `department_id' for #<UsersController:0x007fe85459ae90>
Did you mean?  department
               departments
               department_url
               departments_url
               department_path:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/360bb3fbb7d87080/variables" for 127.0.0.1 at 2017-03-22 23:25:10 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:25:59 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 327ms (ActiveRecord: 32.9ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/76225214ca976478/variables" for 127.0.0.1 at 2017-03-22 23:26:00 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:26:39 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (9.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:26:40 UTC], ["updated_at", 2017-03-22 20:26:40 UTC]]
  [1m[35m (85.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 463ms (ActiveRecord: 146.8ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:26:40 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (2.5ms)
  Rendered layouts/_headcontent.html.erb (3081.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.4ms)
  Rendered layouts/_settingnav.html.erb (78.9ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 3267ms (Views: 3213.2ms | ActiveRecord: 8.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:26:50 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (10.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (138.0ms)
  Rendered layouts/_headcontent.html.erb (641.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (50.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 901ms (Views: 843.8ms | ActiveRecord: 39.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:26:55 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (69.5ms)
  Rendered layouts/_headcontent.html.erb (581.9ms)
  Rendered layouts/_layout_common_js.html.erb (2.0ms)
  Rendered layouts/_logoheader.html.erb (15.4ms)
  Rendered layouts/_settingnav.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 774ms (Views: 745.3ms | ActiveRecord: 13.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:27:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tIDENTIFIER, expecting '}'
         dep.save
            ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:54: syntax error, unexpected '}', expecting keyword_end
      })
       ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:141: syntax error, unexpected end-of-input, expecting keyword_end:
  app/controllers/users_controller.rb:53:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/29bd3cad451d2c6d/variables" for 127.0.0.1 at 2017-03-22 23:27:37 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:28:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (9.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (176.8ms)
  Rendered layouts/_headcontent.html.erb (3030.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.4ms)
  Rendered layouts/_settingnav.html.erb (113.0ms)
  Rendered layouts/_topnavbar.html.erb (6.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3621ms (Views: 3378.2ms | ActiveRecord: 49.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:28:34 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 52ms (ActiveRecord: 10.5ms)



NoMethodError - undefined method `department_id' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/24596c967515af96/variables" for 127.0.0.1 at 2017-03-22 23:28:34 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:30:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 302ms (ActiveRecord: 30.7ms)



NoMethodError - undefined method `department' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e458cf64bc842533/variables" for 127.0.0.1 at 2017-03-22 23:30:15 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:31:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 576ms (ActiveRecord: 41.0ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f2514773900>:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6582553f8bea76cf/variables" for 127.0.0.1 at 2017-03-22 23:31:23 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:33:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 787ms (ActiveRecord: 37.0ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f7ab45d1250>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/aad44ee802a52ff8/variables" for 127.0.0.1 at 2017-03-22 23:33:17 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:34:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:25 UTC], ["updated_at", 2017-03-22 20:34:25 UTC]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:25 UTC], ["updated_at", 2017-03-22 20:34:25 UTC]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 408ms (ActiveRecord: 74.5ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:34:25 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (7.8ms)
  Rendered layouts/_headcontent.html.erb (2976.9ms)
  Rendered layouts/_layout_common_js.html.erb (3.8ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  Rendered layouts/_settingnav.html.erb (79.2ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3178ms (Views: 3129.4ms | ActiveRecord: 4.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:34:36 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (90.2ms)
  Rendered layouts/_headcontent.html.erb (478.3ms)
  Rendered layouts/_layout_common_js.html.erb (3.5ms)
  Rendered layouts/_logoheader.html.erb (22.2ms)
  Rendered layouts/_settingnav.html.erb (46.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 672ms (Views: 642.6ms | ActiveRecord: 22.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:34:41 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (67.7ms)
  Rendered layouts/_headcontent.html.erb (589.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.6ms)
  Rendered layouts/_settingnav.html.erb (48.7ms)
  Rendered layouts/_topnavbar.html.erb (14.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 770ms (Views: 740.1ms | ActiveRecord: 11.3ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:34:47 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9Rg487aA6lAkk6HCpzb7XBvkEDtsVN1cTub/wFq50AcTF1tUeWOFUDpISsg3hG++yuqQkRCGPW6Ham0zUFdnhA==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:47 UTC], ["updated_at", 2017-03-22 20:34:47 UTC]]
  [1m[35m (263.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:47 UTC], ["updated_at", 2017-03-22 20:34:47 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 340ms (ActiveRecord: 287.9ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:34:47 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.6ms)
  Rendered layouts/_headcontent.html.erb (685.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.7ms)
  Rendered layouts/_settingnav.html.erb (50.9ms)
  Rendered layouts/_topnavbar.html.erb (11.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 809ms (Views: 786.0ms | ActiveRecord: 2.4ms)


Started GET "/en/users/21/edit" for 127.0.0.1 at 2017-03-22 23:34:52 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 30ms (ActiveRecord: 3.9ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dc5e09e30b0055c2/variables" for 127.0.0.1 at 2017-03-22 23:34:52 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:36:24 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9Rg487aA6lAkk6HCpzb7XBvkEDtsVN1cTub/wFq50AcTF1tUeWOFUDpISsg3hG++yuqQkRCGPW6Ham0zUFdnhA==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:36:24 UTC], ["updated_at", 2017-03-22 20:36:24 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (10.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:36:24 UTC], ["updated_at", 2017-03-22 20:36:24 UTC]]
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 81ms (ActiveRecord: 41.7ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:36:24 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.1ms)
  Rendered layouts/_headcontent.html.erb (543.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (17.5ms)
  Rendered layouts/_settingnav.html.erb (99.8ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 749ms (Views: 726.8ms | ActiveRecord: 2.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:38:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (172.9ms)
  Rendered layouts/_headcontent.html.erb (2823.7ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  Rendered layouts/_settingnav.html.erb (127.9ms)
  Rendered layouts/_topnavbar.html.erb (7.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3367ms (Views: 3170.7ms | ActiveRecord: 29.2ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:38:24 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JsaV2aq0OyR4x5AVIzVthf/z7v5jUE213KakaEd2Gm7AyfZ+ZVdUJGYcex+zh/lnLv1uVB+CrYcVKjabTZit7Q==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:38:24 UTC], ["updated_at", 2017-03-22 20:38:24 UTC]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:38:24 UTC], ["updated_at", 2017-03-22 20:38:24 UTC]]
  [1m[35m (23.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 136ms (ActiveRecord: 71.9ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:38:24 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.1ms)
  Rendered layouts/_headcontent.html.erb (601.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.9ms)
  Rendered layouts/_settingnav.html.erb (56.0ms)
  Rendered layouts/_topnavbar.html.erb (9.7ms)
  Rendered layouts/_footer.html.erb (2.3ms)
Completed 200 OK in 735ms (Views: 706.3ms | ActiveRecord: 12.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:43:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (185.6ms)
  Rendered layouts/_headcontent.html.erb (2872.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (6.6ms)
  Rendered layouts/_settingnav.html.erb (106.3ms)
  Rendered layouts/_topnavbar.html.erb (8.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3407ms (Views: 3220.2ms | ActiveRecord: 42.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:43:30 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:43:30 UTC], ["updated_at", 2017-03-22 20:43:30 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 91ms (ActiveRecord: 33.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

PG::ForeignKeyViolation - ERROR:  insert or update on table "users_departments" violates foreign key constraint "fk_rails_cbafd1e5ff"
DETAIL:  Key (user_id)=(2) is not present in table "users".
:
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `block in exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:587:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_insert'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:124:in `insert'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:17:in `insert'
  activerecord (5.0.2) lib/active_record/relation.rb:65:in `insert'
  activerecord (5.0.2) lib/active_record/persistence.rb:560:in `_create_record'
  activerecord (5.0.2) lib/active_record/counter_cache.rb:128:in `_create_record'
  activerecord (5.0.2) lib/active_record/locking/optimistic.rb:75:in `_create_record'
  activerecord (5.0.2) lib/active_record/attribute_methods/dirty.rb:123:in `_create_record'
  activerecord (5.0.2) lib/active_record/callbacks.rb:302:in `block in _create_record'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_create_callbacks'
  activerecord (5.0.2) lib/active_record/callbacks.rb:302:in `_create_record'
  activerecord (5.0.2) lib/active_record/timestamp.rb:68:in `_create_record'
  activerecord (5.0.2) lib/active_record/persistence.rb:540:in `create_or_update'
  activerecord (5.0.2) lib/active_record/callbacks.rb:298:in `block in create_or_update'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_save_callbacks'
  activerecord (5.0.2) lib/active_record/callbacks.rb:298:in `create_or_update'
  activerecord (5.0.2) lib/active_record/persistence.rb:125:in `save'
  activerecord (5.0.2) lib/active_record/validations.rb:44:in `save'
  activerecord (5.0.2) lib/active_record/attribute_methods/dirty.rb:22:in `save'
  activerecord (5.0.2) lib/active_record/transactions.rb:319:in `block (2 levels) in save'
  activerecord (5.0.2) lib/active_record/transactions.rb:395:in `block in with_transaction_returning_status'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
  activerecord (5.0.2) lib/active_record/transactions.rb:211:in `transaction'
  activerecord (5.0.2) lib/active_record/transactions.rb:392:in `with_transaction_returning_status'
  activerecord (5.0.2) lib/active_record/transactions.rb:319:in `block in save'
  activerecord (5.0.2) lib/active_record/transactions.rb:334:in `rollback_active_record_state!'
  activerecord (5.0.2) lib/active_record/transactions.rb:318:in `save'
  activerecord (5.0.2) lib/active_record/suppressor.rb:41:in `save'
  app/controllers/users_controller.rb:54:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2de630ce5cdb6c21/variables" for 127.0.0.1 at 2017-03-22 23:43:30 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:50:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 679ms (ActiveRecord: 35.5ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f0d545d6480>:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c91bf24e126171d6/variables" for 127.0.0.1 at 2017-03-22 23:50:57 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:51:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 582ms (ActiveRecord: 40.4ms)



NameError - undefined local variable or method `new_departments' for #<UsersController:0x007f6dc05d2368>
Did you mean?  new_deparrtments
               new_department_url:
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/85fdfdb9057925e7/variables" for 127.0.0.1 at 2017-03-22 23:51:55 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:52:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 669ms (ActiveRecord: 29.2ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f4df85a6e58>:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/084f917da66de9cb/variables" for 127.0.0.1 at 2017-03-22 23:52:48 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:53:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 690ms (ActiveRecord: 40.0ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f9abc5a79f0>:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/210cc39840507a37/variables" for 127.0.0.1 at 2017-03-22 23:53:16 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:53:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 209ms (ActiveRecord: 20.9ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a339102a54bacf98/variables" for 127.0.0.1 at 2017-03-22 23:53:58 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:54:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 288ms (ActiveRecord: 39.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:54:42 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (142.6ms)
  Rendered layouts/_headcontent.html.erb (2931.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (14.1ms)
  Rendered layouts/_settingnav.html.erb (55.1ms)
  Rendered layouts/_topnavbar.html.erb (10.2ms)
  Rendered layouts/_footer.html.erb (7.5ms)
Completed 200 OK in 3258ms (Views: 3185.9ms | ActiveRecord: 23.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:03:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (11.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (174.1ms)
  Rendered layouts/_headcontent.html.erb (2861.0ms)
  Rendered layouts/_layout_common_js.html.erb (1.2ms)
  Rendered layouts/_logoheader.html.erb (15.7ms)
  Rendered layouts/_settingnav.html.erb (56.2ms)
  Rendered layouts/_topnavbar.html.erb (7.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3358ms (Views: 3143.2ms | ActiveRecord: 50.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:04:04 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (125.0ms)
  Rendered layouts/_headcontent.html.erb (552.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (15.4ms)
  Rendered layouts/_settingnav.html.erb (52.3ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 815ms (Views: 755.0ms | ActiveRecord: 24.6ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:04:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+jMHfBI9crfk8UA+RI7aa7tzQe7wDIQVP+62g0/T/fAcPGTb3d4dt/oqqzTUPE6Jan3BRIzeZCf2YiRwRT1Kcw==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (9.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (8.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 59ms (ActiveRecord: 27.7ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/12fda151049e897e/variables" for 127.0.0.1 at 2017-03-23 00:04:12 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:06:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+jMHfBI9crfk8UA+RI7aa7tzQe7wDIQVP+62g0/T/fAcPGTb3d4dt/oqqzTUPE6Jan3BRIzeZCf2YiRwRT1Kcw==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (14.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 365ms (ActiveRecord: 37.5ms)



NoMethodError - undefined method `x' for #<UsersController:0x007f31505c6538>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/57b288a4ce79a587/variables" for 127.0.0.1 at 2017-03-23 00:06:19 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:06:53 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+jMHfBI9crfk8UA+RI7aa7tzQe7wDIQVP+62g0/T/fAcPGTb3d4dt/oqqzTUPE6Jan3BRIzeZCf2YiRwRT1Kcw==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 272ms (ActiveRecord: 54.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:06:54 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (124.9ms)
  Rendered layouts/_headcontent.html.erb (2907.4ms)
  Rendered layouts/_layout_common_js.html.erb (8.3ms)
  Rendered layouts/_logoheader.html.erb (13.0ms)
  Rendered layouts/_settingnav.html.erb (66.6ms)
  Rendered layouts/_topnavbar.html.erb (21.3ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 3220ms (Views: 3158.4ms | ActiveRecord: 11.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:08:42 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (104.3ms)
  Rendered layouts/_headcontent.html.erb (569.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (4.8ms)
  Rendered layouts/_settingnav.html.erb (45.1ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 892ms (Views: 747.7ms | ActiveRecord: 21.8ms)


Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-23 00:09:21 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (70.9ms)
  Rendered layouts/_headcontent.html.erb (571.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.6ms)
  Rendered layouts/_settingnav.html.erb (46.0ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (5.2ms)
Completed 200 OK in 805ms (Views: 742.8ms | ActiveRecord: 15.6ms)


Started GET "/users/18/roles" for 127.0.0.1 at 2017-03-23 00:09:32 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (5.7ms)
  Rendered layouts/_headcontent.html.erb (440.3ms)
  Rendered layouts/_layout_common_js.html.erb (4.8ms)
  Rendered layouts/_logoheader.html.erb (7.8ms)
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (6.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 550ms (Views: 531.3ms | ActiveRecord: 7.7ms)


Started PUT "/users/18/updateRoles" for 127.0.0.1 at 2017-03-23 00:09:37 +0300
Processing by UsersController#updateRoles as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7Ybq8bHFCvp7I27OnvRVTMt+FtQugq9G1n2icgO0iWoLiYlWfiZl+mX4hcQORsGuGnCWflJQT3Qf8TCBCVo+6Q==", "commit"=>"Save Changes", "id"=>"18"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 400 Bad Request in 20ms (ActiveRecord: 7.1ms)



ActionController::ParameterMissing - param is missing or the value is empty: roles:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:67:in `updateRoles'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d84956a0563e721a/variables" for 127.0.0.1 at 2017-03-23 00:09:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (73.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (36.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (16.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (14.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (15.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (16.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "guest"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "clerk"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "manager"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:21:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (175.5ms)
  Rendered layouts/_headcontent.html.erb (2991.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (33.1ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3495ms (Views: 3249.7ms | ActiveRecord: 42.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:21:16 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (133.5ms)
  Rendered layouts/_headcontent.html.erb (619.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (60.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 924ms (Views: 832.1ms | ActiveRecord: 35.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:21:22 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"n1BbGzJhYgA3j0m5S5gl9nuLq6dC6OdLyI1gE3s7pKl5Xzi8/YINAClUorPbKrEUqoUrDT46B3kBAfLgcdUTKg==", "departments"=>{"new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 60ms (ActiveRecord: 16.7ms)



NoMethodError - undefined method `name' for :"new department two":Symbol:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/fc3f403b924ba20c/variables" for 127.0.0.1 at 2017-03-23 00:21:22 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:22:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"n1BbGzJhYgA3j0m5S5gl9nuLq6dC6OdLyI1gE3s7pKl5Xzi8/YINAClUorPbKrEUqoUrDT46B3kBAfLgcdUTKg==", "departments"=>{"new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 264ms (ActiveRecord: 23.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:22:03 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (17.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (170.6ms)
  Rendered layouts/_headcontent.html.erb (3243.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.5ms)
  Rendered layouts/_settingnav.html.erb (67.4ms)
  Rendered layouts/_topnavbar.html.erb (9.3ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 3639ms (Views: 3511.7ms | ActiveRecord: 46.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:24:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (228.7ms)
  Rendered layouts/_headcontent.html.erb (3454.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (24.0ms)
  Rendered layouts/_settingnav.html.erb (86.1ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 4063ms (Views: 3813.3ms | ActiveRecord: 31.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:24:34 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (98.1ms)
  Rendered layouts/_headcontent.html.erb (474.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.3ms)
  Rendered layouts/_settingnav.html.erb (52.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 698ms (Views: 635.2ms | ActiveRecord: 34.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:24:39 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L5HflJcoVLqdUhRTASxElkC/o0DKPY9fCNpmNCpV03bJnrwzWMs7uoOJ/1mRntB0kbEj6rbvb23BVvTHILtk9Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 79ms (ActiveRecord: 16.3ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:24:39 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (85.9ms)
  Rendered layouts/_headcontent.html.erb (580.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (20.1ms)
  Rendered layouts/_settingnav.html.erb (40.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 779ms (Views: 748.3ms | ActiveRecord: 19.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:25:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (265.8ms)
  Rendered layouts/_headcontent.html.erb (3596.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (62.5ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 4277ms (Views: 3981.8ms | ActiveRecord: 35.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:25:38 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (11.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (120.9ms)
  Rendered layouts/_headcontent.html.erb (605.0ms)
  Rendered layouts/_layout_common_js.html.erb (8.6ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (60.2ms)
  Rendered layouts/_topnavbar.html.erb (12.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 921ms (Views: 846.1ms | ActiveRecord: 44.3ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:25:43 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MFRAzWqdZxB+N7uW7qvX3soYT9sDQak1t+ODw+nczanWWyNqpX4IEGDsUJx+GUM8GxbPcX+TSQd+bxEw4zJ6Kg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 64ms (ActiveRecord: 25.0ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/764ea0695a691116/variables" for 127.0.0.1 at 2017-03-23 00:25:44 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:26:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MFRAzWqdZxB+N7uW7qvX3soYT9sDQak1t+ODw+nczanWWyNqpX4IEGDsUJx+GUM8GxbPcX+TSQd+bxEw4zJ6Kg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 274ms (ActiveRecord: 31.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:26:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (157.6ms)
  Rendered layouts/_headcontent.html.erb (3054.7ms)
  Rendered layouts/_layout_common_js.html.erb (5.2ms)
  Rendered layouts/_logoheader.html.erb (17.5ms)
  Rendered layouts/_settingnav.html.erb (52.3ms)
  Rendered layouts/_topnavbar.html.erb (9.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3395ms (Views: 3324.2ms | ActiveRecord: 19.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:27:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (198.3ms)
  Rendered layouts/_headcontent.html.erb (2938.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (20.0ms)
  Rendered layouts/_settingnav.html.erb (64.1ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 3442ms (Views: 3234.8ms | ActiveRecord: 38.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:27:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (10.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (143.2ms)
  Rendered layouts/_headcontent.html.erb (594.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  Rendered layouts/_settingnav.html.erb (47.0ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (2.9ms)
Completed 200 OK in 866ms (Views: 791.1ms | ActiveRecord: 45.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:27:34 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+vsvskfwPnvsjSUy/utBjlG/9Y/2YgEKrlSgX527B4gc9EwViBNRe/JWzjhuWdVsgLF1JYqw4Thn2DKsl1WwCw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:34 UTC], ["updated_at", 2017-03-22 21:27:34 UTC]]
  [1m[35m (156.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (8.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (12.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:34 UTC], ["updated_at", 2017-03-22 21:27:34 UTC]]
  [1m[35m (42.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 311ms (ActiveRecord: 241.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:27:34 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (65.7ms)
  Rendered layouts/_headcontent.html.erb (535.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (18.6ms)
  Rendered layouts/_settingnav.html.erb (73.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 748ms (Views: 714.7ms | ActiveRecord: 10.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:27:39 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (11.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (66.9ms)
  Rendered layouts/_headcontent.html.erb (516.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (14.6ms)
  Rendered layouts/_settingnav.html.erb (45.1ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 719ms (Views: 679.6ms | ActiveRecord: 15.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:27:46 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XlNTktiQPbHrNf8zCvZNzb7Hlu3w7pJGiVtFqBjqaSq4XDA1F3NSsfXuFDmaRNkvb8kWR4w8cnRA19dbEgTeqQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (11, 12)[0m  [["user_id", 21]]
  [1m[35m (87.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:46 UTC], ["updated_at", 2017-03-22 21:27:46 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:46 UTC], ["updated_at", 2017-03-22 21:27:46 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 260ms (ActiveRecord: 115.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:27:47 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (58.0ms)
  Rendered layouts/_headcontent.html.erb (562.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (18.5ms)
  Rendered layouts/_settingnav.html.erb (39.1ms)
  Rendered layouts/_topnavbar.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 750ms (Views: 722.9ms | ActiveRecord: 16.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:27:51 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (27.1ms)
  Rendered layouts/_headcontent.html.erb (625.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 777ms (Views: 752.7ms | ActiveRecord: 12.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:28:29 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rOJxDmYL76AViNbYHzvD1ZBs4UNs6AX5TwpkWhjslTZK7RKpqeiAoAtTPdKPiVc3QWJh6RA65cuGhvapEgIitQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:28:29 UTC], ["updated_at", 2017-03-22 21:28:29 UTC]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:28:29 UTC], ["updated_at", 2017-03-22 21:28:29 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 90ms (ActiveRecord: 46.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:28:29 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (81.7ms)
  Rendered layouts/_headcontent.html.erb (576.4ms)
  Rendered layouts/_layout_common_js.html.erb (8.0ms)
  Rendered layouts/_logoheader.html.erb (16.2ms)
  Rendered layouts/_settingnav.html.erb (41.5ms)
  Rendered layouts/_topnavbar.html.erb (7.6ms)
  Rendered layouts/_footer.html.erb (11.4ms)
Completed 200 OK in 771ms (Views: 747.5ms | ActiveRecord: 10.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:29:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (220.0ms)
  Rendered layouts/_headcontent.html.erb (3351.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (54.1ms)
  Rendered layouts/_topnavbar.html.erb (2.7ms)
  Rendered layouts/_footer.html.erb (5.1ms)
Completed 200 OK in 3910ms (Views: 3665.4ms | ActiveRecord: 35.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:30:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (118.3ms)
  Rendered layouts/_headcontent.html.erb (484.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (16.8ms)
  Rendered layouts/_settingnav.html.erb (53.1ms)
  Rendered layouts/_topnavbar.html.erb (16.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 735ms (Views: 689.1ms | ActiveRecord: 19.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:30:25 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"agH922T4NEovRMjnkT/vGGX9+hFeD8yrZ+QGED/5NheMDp58qxtbSjGfI+0BjXv6tPN6uyLdLJmuaJTjNReBlA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (15, 16)[0m  [["user_id", 21]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:30:25 UTC], ["updated_at", 2017-03-22 21:30:25 UTC]]
  [1m[35m (22.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 144ms (ActiveRecord: 57.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:30:25 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (51.1ms)
  Rendered layouts/_headcontent.html.erb (403.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (12.7ms)
  Rendered layouts/_settingnav.html.erb (37.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 531ms (Views: 514.9ms | ActiveRecord: 5.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:31:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (132.7ms)
  Rendered layouts/_headcontent.html.erb (2348.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (19.8ms)
  Rendered layouts/_settingnav.html.erb (50.3ms)
  Rendered layouts/_topnavbar.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2744ms (Views: 2586.2ms | ActiveRecord: 17.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:31:10 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (131.1ms)
  Rendered layouts/_headcontent.html.erb (620.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (19.0ms)
  Rendered layouts/_settingnav.html.erb (64.5ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 898ms (Views: 827.5ms | ActiveRecord: 38.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:31:15 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wsd1gITX9CFNiCtrh205GpyQ5sIIf0AeTBlbNeL5+uokyBYnSzSbIVNTwGEX3634TZ5maHStoCyFlcnG6BdNaQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" = 17[0m  [["user_id", 21]]
  [1m[35m (41.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 531ms (ActiveRecord: 75.2ms)



NameError - undefined local variable or method `d_f' for #<UsersController:0x007f085c0756c8>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/82a8244b24dbf265/variables" for 127.0.0.1 at 2017-03-23 00:31:16 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:37:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wsd1gITX9CFNiCtrh205GpyQ5sIIf0AeTBlbNeL5+uokyBYnSzSbIVNTwGEX3634TZ5maHStoCyFlcnG6BdNaQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 547ms (ActiveRecord: 41.7ms)



NameError - undefined local variable or method `d_ft' for #<UsersController:0x007f3564773dc8>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8de07d1809754cf1/variables" for 127.0.0.1 at 2017-03-23 00:37:41 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:38:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wsd1gITX9CFNiCtrh205GpyQ5sIIf0AeTBlbNeL5+uokyBYnSzSbIVNTwGEX3634TZ5maHStoCyFlcnG6BdNaQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:27 UTC], ["updated_at", 2017-03-22 21:38:27 UTC]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:27 UTC], ["updated_at", 2017-03-22 21:38:27 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 392ms (ActiveRecord: 59.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:38:27 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (12.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (147.8ms)
  Rendered layouts/_headcontent.html.erb (3082.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  Rendered layouts/_settingnav.html.erb (66.6ms)
  Rendered layouts/_topnavbar.html.erb (12.7ms)
  Rendered layouts/_footer.html.erb (3.7ms)
Completed 200 OK in 3436ms (Views: 3362.8ms | ActiveRecord: 27.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:38:37 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (155.9ms)
  Rendered layouts/_headcontent.html.erb (773.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  Rendered layouts/_settingnav.html.erb (38.1ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 1095ms (Views: 1006.5ms | ActiveRecord: 42.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:38:45 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"nBBbrWcOu5o5iHoH1PA8LiaHUNVlWZtZdzjysKERkkN6HzgKqO3UmidTkQ1EQqjM94nQfxmLe2u+tGBDq/8lwA==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (18, 19)[0m  [["user_id", 21]]
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (11.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:46 UTC], ["updated_at", 2017-03-22 21:38:46 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:46 UTC], ["updated_at", 2017-03-22 21:38:46 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 150ms (ActiveRecord: 54.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:38:46 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (71.8ms)
  Rendered layouts/_headcontent.html.erb (534.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (16.8ms)
  Rendered layouts/_settingnav.html.erb (41.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (19.8ms)
Completed 200 OK in 748ms (Views: 718.3ms | ActiveRecord: 11.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:38:50 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (13.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (13.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (48.3ms)
  Rendered layouts/_headcontent.html.erb (668.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (59.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 850ms (Views: 804.1ms | ActiveRecord: 35.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:39:07 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tvCSS2rZ4pu8aVkbup8E6hlR+Y2m/eE9ijwGPOz7HuJQ//HspTqNm6KyshEqLZAIyF95J9ovAQ9DsJTP5hWpYQ==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 37ms (ActiveRecord: 9.1ms)



ActionController::ParameterMissing - param is missing or the value is empty: departments:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:45:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6acbe6e8d5c45b6d/variables" for 127.0.0.1 at 2017-03-23 00:39:07 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:39:15 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tvCSS2rZ4pu8aVkbup8E6hlR+Y2m/eE9ijwGPOz7HuJQ//HspTqNm6KyshEqLZAIyF95J9ovAQ9DsJTP5hWpYQ==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (9.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.2ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (20, 21)[0m  [["user_id", 21]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:39:15 UTC], ["updated_at", 2017-03-22 21:39:15 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 113ms (ActiveRecord: 46.3ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:39:15 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (76.9ms)
  Rendered layouts/_headcontent.html.erb (607.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (10.8ms)
  Rendered layouts/_settingnav.html.erb (106.4ms)
  Rendered layouts/_topnavbar.html.erb (8.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 859ms (Views: 834.9ms | ActiveRecord: 17.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:39:19 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (13.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (58.8ms)
  Rendered layouts/_headcontent.html.erb (707.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (16.0ms)
  Rendered layouts/_settingnav.html.erb (113.0ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 964ms (Views: 922.8ms | ActiveRecord: 29.3ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-23 00:39:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"mQvZNePYlI3i7dpqa83KQKG7DVtvpa8Qr5w7aj4wgBB/BLqSLDv7jfw2MWD7f16icLWN8RN3TyJmEKmZNN43kw==", "locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 18], ["id", 18]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 53ms (ActiveRecord: 6.4ms)


Started GET "/en" for 127.0.0.1 at 2017-03-23 00:39:33 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-23 00:39:33 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (5.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (76.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 603ms (Views: 600.2ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-23 09:19:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (28.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"siZNLFwZHs4MAbxLCR/8nPdv8IeMai8kSokHv66WjvXGD35TYMWNr9GvHaBsfYZ+7uduyxYxEg+PZq+9Y4n4BA==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (72.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-23 06:19:27 UTC], ["last_sign_in_at", 2017-03-22 18:54:30 UTC], ["sign_in_count", 19], ["updated_at", 2017-03-23 06:19:27 UTC], ["modified_by", nil], ["id", 18]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 1024ms (ActiveRecord: 282.1ms)


Started GET "/en" for 127.0.0.1 at 2017-03-23 09:19:27 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (10.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_navigation.html.erb (27.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2921ms (Views: 2906.6ms | ActiveRecord: 3.0ms)


Started GET "/en" for 127.0.0.1 at 2017-03-23 09:39:47 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.6ms)
  Rendered layouts/_layout_common_js.html.erb (8.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_navigation.html.erb (20.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 421ms (Views: 410.6ms | ActiveRecord: 3.2ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 09:40:01 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.0ms)
  Rendered layouts/_headcontent.html.erb (369.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.3ms)
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 501ms (Views: 490.3ms | ActiveRecord: 1.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 09:40:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (36.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (188.2ms)
  Rendered layouts/_headcontent.html.erb (412.2ms)
  Rendered layouts/_layout_common_js.html.erb (5.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (35.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 684ms (Views: 614.6ms | ActiveRecord: 53.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 09:40:15 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (16.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (14.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (120.2ms)
  Rendered layouts/_headcontent.html.erb (404.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (31.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 650ms (Views: 545.2ms | ActiveRecord: 48.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:40:20 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" = 22[0m  [["user_id", 21]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 139ms (ActiveRecord: 34.4ms)



NoMethodError - undefined method `to_f' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/92336998e7e053b2/variables" for 127.0.0.1 at 2017-03-23 09:40:20 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:45:42 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 196ms (ActiveRecord: 22.8ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6766775bfd8137cc/variables" for 127.0.0.1 at 2017-03-23 09:45:43 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:51:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 189ms (ActiveRecord: 35.0ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/53035e1a17ed8809/variables" for 127.0.0.1 at 2017-03-23 09:51:21 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:55:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 198ms (ActiveRecord: 22.3ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/509f4267c295bb8d/variables" for 127.0.0.1 at 2017-03-23 09:55:45 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:58:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 190ms (ActiveRecord: 22.8ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/14f83eb0f1307207/variables" for 127.0.0.1 at 2017-03-23 09:58:55 +0300
Started GET "/" for 127.0.0.1 at 2017-03-23 10:01:21 +0300
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 11ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-23 10:01:21 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (79.4ms)
  Rendered layouts/_layout_common_js.html.erb (3.9ms)
  Rendered layouts/_topnavbar.html.erb (6.9ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 1952ms (Views: 1946.8ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-23 10:01:29 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"70vpwrj6ZOawtFt/gc1ky7xrYv0x+asYtcyQYcAWD4S3HN5E/ExA65eI6bz4wIMiWH9dOofPrHP/V7Mj+TJh1g==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", 2017-03-23 07:01:29 UTC], ["last_sign_in_at", 2017-03-23 06:19:27 UTC], ["sign_in_count", 20], ["updated_at", 2017-03-23 07:01:29 UTC], ["id", 18]]
  [1m[35m (649.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 1022ms (ActiveRecord: 656.6ms)


Started GET "/" for 127.0.0.1 at 2017-03-23 10:01:30 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (1.1ms)
  Rendered layouts/_layout_common_js.html.erb (6.0ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_navigation.html.erb (35.3ms)
  Rendered layouts/_topnavbar.html.erb (8.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 652ms (Views: 642.7ms | ActiveRecord: 2.0ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 10:01:39 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.0ms)
  Rendered layouts/_headcontent.html.erb (377.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.3ms)
  Rendered layouts/_settingnav.html.erb (38.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (4.4ms)
Completed 200 OK in 468ms (Views: 457.1ms | ActiveRecord: 2.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:01:45 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (124.4ms)
  Rendered layouts/_headcontent.html.erb (410.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (34.3ms)
  Rendered layouts/_topnavbar.html.erb (11.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 628ms (Views: 599.2ms | ActiveRecord: 23.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:01:49 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (75.4ms)
  Rendered layouts/_headcontent.html.erb (501.8ms)
  Rendered layouts/_layout_common_js.html.erb (1.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  Rendered layouts/_settingnav.html.erb (44.4ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (2.2ms)
Completed 200 OK in 681ms (Views: 643.2ms | ActiveRecord: 13.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:01:54 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 55ms (ActiveRecord: 9.3ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/121b793fe8e5415b/variables" for 127.0.0.1 at 2017-03-23 10:01:54 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:08:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 198ms (ActiveRecord: 27.5ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:53:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7a812fa5aa568115/variables" for 127.0.0.1 at 2017-03-23 10:08:02 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:09:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (12.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 194ms (ActiveRecord: 38.7ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/93fc2e87d9d3f226/variables" for 127.0.0.1 at 2017-03-23 10:09:02 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:10:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected '.', expecting '|'
    new_departments.each do |department.to_i|
                                        ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:136: syntax error, unexpected keyword_end, expecting end-of-input:
  app/controllers/users_controller.rb:49:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a6411e690223efd8/variables" for 127.0.0.1 at 2017-03-23 10:10:17 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:12:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 178ms (ActiveRecord: 22.3ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a3c0ec7880bc4b5e/variables" for 127.0.0.1 at 2017-03-23 10:12:56 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:13:01 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (5.9ms)
Completed 500 Internal Server Error in 63ms (ActiveRecord: 5.9ms)



SyntaxError - syntax error, unexpected '<', expecting ']'
                </td>
                 ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:35: unknown regexp options - td
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:36: syntax error, unexpected '<'
              </tr>
               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:38: unknown regexp options - tbdy
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:39: syntax error, unexpected '<'
        </table>
         ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:43: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:48: syntax error, unexpected '<', expecting ')'
    </div>
     ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:49: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:50: syntax error, unexpected '<'
</div>
 ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:50: unterminated regexp meets end of file:
  app/views/users/departments.html.erb:34:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/085b186f9991ced1/variables" for 127.0.0.1 at 2017-03-23 10:13:02 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:13:44 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (9.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (75.3ms)
  Rendered layouts/_headcontent.html.erb (1830.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (151.9ms)
  Rendered layouts/_topnavbar.html.erb (9.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2120ms (Views: 2084.9ms | ActiveRecord: 18.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:13:56 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V0sxglexxbXU8ZjQPis8zz1yzNbju0eci4gdlrLTwCqudIB5yG/Ncqu7RxfBLwYVKMDauyWMhNpf6q67bmS15g==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 36ms (ActiveRecord: 8.6ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/022d6a9dfaa9d543/variables" for 127.0.0.1 at 2017-03-23 10:13:56 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:17:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V0sxglexxbXU8ZjQPis8zz1yzNbju0eci4gdlrLTwCqudIB5yG/Ncqu7RxfBLwYVKMDauyWMhNpf6q67bmS15g==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (40.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:17:29 UTC], ["updated_at", 2017-03-23 07:17:29 UTC]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:17:29 UTC], ["updated_at", 2017-03-23 07:17:29 UTC]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 299ms (ActiveRecord: 77.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:17:29 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (123.6ms)
  Rendered layouts/_headcontent.html.erb (1955.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (50.5ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2197ms (Views: 2142.6ms | ActiveRecord: 32.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:17:36 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (76.3ms)
  Rendered layouts/_headcontent.html.erb (430.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 613ms (Views: 572.2ms | ActiveRecord: 19.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:17:41 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K87f+urfOD7ekX1eHtSDZ7qEmkIDcvGwmLWfaLvMU5TS8W4BdQEw+aHbopnh0Lm9rzaML8VFMvZM1yxFZ3smWA==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.3ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (23, 24)[0m  [["user_id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:17:41 UTC], ["updated_at", 2017-03-23 07:17:41 UTC]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 71ms (ActiveRecord: 32.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:17:41 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (48.7ms)
  Rendered layouts/_headcontent.html.erb (356.2ms)
  Rendered layouts/_layout_common_js.html.erb (1.9ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (29.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 493ms (Views: 470.1ms | ActiveRecord: 13.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:17:45 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (29.1ms)
  Rendered layouts/_headcontent.html.erb (442.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.2ms)
  Rendered layouts/_settingnav.html.erb (38.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 558ms (Views: 533.9ms | ActiveRecord: 12.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:20:05 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (30.9ms)
  Rendered layouts/_headcontent.html.erb (402.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (33.6ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 531ms (Views: 493.6ms | ActiveRecord: 18.2ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:20:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K08CptmwO08I8vhYL14i3+FXXBWiX4AqjaUUOk48nu7ScLNdRm4ziHe4J5/QWhgF9OVKeGRoQ2xZx6cXkovrIg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:20:11 UTC], ["updated_at", 2017-03-23 07:20:11 UTC]]
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:20:11 UTC], ["updated_at", 2017-03-23 07:20:11 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 96ms (ActiveRecord: 55.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:20:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (40.7ms)
  Rendered layouts/_headcontent.html.erb (362.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (21.5ms)
  Rendered layouts/_settingnav.html.erb (73.7ms)
  Rendered layouts/_topnavbar.html.erb (4.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 524ms (Views: 503.1ms | ActiveRecord: 16.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:20:14 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (24.3ms)
  Rendered layouts/_headcontent.html.erb (403.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.6ms)
  Rendered layouts/_settingnav.html.erb (33.6ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 509ms (Views: 488.0ms | ActiveRecord: 12.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:20:21 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Of0SR5GbSiCn84ETtfFqc93RDT4IoqK/3hTv9H8JYpPAwqO8DkVC59i5XtRK9VCpyGMbU86VYfkKdlzZo74XXw==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (26, 27)[0m  [["user_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:20:21 UTC], ["updated_at", 2017-03-23 07:20:21 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 55ms (ActiveRecord: 12.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:20:21 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (44.7ms)
  Rendered layouts/_headcontent.html.erb (368.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_settingnav.html.erb (30.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 506ms (Views: 490.2ms | ActiveRecord: 10.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:25:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (161.5ms)
  Rendered layouts/_headcontent.html.erb (1990.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (46.5ms)
  Rendered layouts/_topnavbar.html.erb (3.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2394ms (Views: 2239.7ms | ActiveRecord: 32.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:25:29 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (102.6ms)
  Rendered layouts/_headcontent.html.erb (431.9ms)
  Rendered layouts/_layout_common_js.html.erb (6.0ms)
  Rendered layouts/_logoheader.html.erb (9.1ms)
  Rendered layouts/_settingnav.html.erb (39.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 648ms (Views: 602.6ms | ActiveRecord: 21.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:25:33 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dik0XFgwwRWrzTxfKaWljyKU8vOXUYtSsJwK1qHxGiCPFoWnx+7J0tSH45jWoZ9VNybknlFmSBRk/rn7fUZv7A==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (12.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 38ms (ActiveRecord: 16.9ms)



NoMethodError - undefined method `save' for #<Class:0x007f6772abbdb0>:
  activerecord (5.0.2) lib/active_record/dynamic_matchers.rb:21:in `method_missing'
  app/controllers/users_controller.rb:47:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/af69ca5ebf2d2950/variables" for 127.0.0.1 at 2017-03-23 10:25:34 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dik0XFgwwRWrzTxfKaWljyKU8vOXUYtSsJwK1qHxGiCPFoWnx+7J0tSH45jWoZ9VNybknlFmSBRk/rn7fUZv7A==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:27:13.017508', "updated_at" = '2017-03-23 07:27:13.017567' WHERE "users_departments"."id" = $1[0m  [["id", 18]]
  [1m[35m (44.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:27:13.068931', "updated_at" = '2017-03-23 07:27:13.068969' WHERE "users_departments"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:27:13.072789', "updated_at" = '2017-03-23 07:27:13.072828' WHERE "users_departments"."id" = $1[0m  [["id", 27]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:13 UTC], ["updated_at", 2017-03-23 07:27:13 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (7.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:13 UTC], ["updated_at", 2017-03-23 07:27:13 UTC]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 299ms (ActiveRecord: 97.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:13 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (146.9ms)
  Rendered layouts/_headcontent.html.erb (2065.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.9ms)
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2354ms (Views: 2293.0ms | ActiveRecord: 17.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (95.6ms)
  Rendered layouts/_headcontent.html.erb (454.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (8.7ms)
  Rendered layouts/_settingnav.html.erb (32.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 638ms (Views: 595.2ms | ActiveRecord: 16.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:24 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rZrWGfQvXl6Omej9/aX7F7Y6APWywneiunHVT5KoYUVUpWfia/FWmfHTNzoCocHNo4gWmHT1tORuE2ZiTh8UiQ==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:24 UTC], ["updated_at", 2017-03-23 07:27:24 UTC]]
  [1m[35m (80.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 121ms (ActiveRecord: 97.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:24 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (55.6ms)
  Rendered layouts/_headcontent.html.erb (424.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.0ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_settingnav.html.erb (30.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 569ms (Views: 542.6ms | ActiveRecord: 17.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (28.1ms)
  Rendered layouts/_headcontent.html.erb (506.5ms)
  Rendered layouts/_layout_common_js.html.erb (7.6ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_settingnav.html.erb (38.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 649ms (Views: 611.1ms | ActiveRecord: 17.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:33 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IvH+D/WAzUVL79oQp0toXNETEY64/Z413YJJH71WeqLbzk/0al7FgjSlBddYT1KGxKEH437KXXMJ4PoyYeEPbg==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:33 UTC], ["updated_at", 2017-03-23 07:27:33 UTC]]
  [1m[35m (34.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 67ms (ActiveRecord: 47.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:33 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (9.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (59.6ms)
  Rendered layouts/_headcontent.html.erb (485.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (5.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 639ms (Views: 601.7ms | ActiveRecord: 19.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:37 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (28.3ms)
  Rendered layouts/_headcontent.html.erb (393.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (60.5ms)
  Rendered layouts/_topnavbar.html.erb (4.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 545ms (Views: 524.7ms | ActiveRecord: 3.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:46 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XTh+9yBp7SZ1twSFU3EU1t4zziRvHZoIGXfh0jAkA0ikB88Mv7fl4Qr920KsdS4My4HYSakqWU7NFVL/7JN2hA==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 13ms (ActiveRecord: 5.9ms)



ActionController::ParameterMissing - param is missing or the value is empty: departments:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:45:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e34bea5cc40a18ba/variables" for 127.0.0.1 at 2017-03-23 10:27:46 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:52 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XTh+9yBp7SZ1twSFU3EU1t4zziRvHZoIGXfh0jAkA0ikB88Mv7fl4Qr920KsdS4My4HYSakqWU7NFVL/7JN2hA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:52 UTC], ["updated_at", 2017-03-23 07:27:52 UTC]]
  [1m[35m (46.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 77ms (ActiveRecord: 54.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:52 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (53.9ms)
  Rendered layouts/_headcontent.html.erb (365.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (39.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 490ms (Views: 474.6ms | ActiveRecord: 8.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:55 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (22.9ms)
  Rendered layouts/_headcontent.html.erb (467.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (30.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (1.6ms)
Completed 200 OK in 580ms (Views: 558.3ms | ActiveRecord: 12.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:29:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (147.3ms)
  Rendered layouts/_headcontent.html.erb (2048.3ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (77.7ms)
  Rendered layouts/_topnavbar.html.erb (10.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2471ms (Views: 2319.5ms | ActiveRecord: 22.1ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:29:18 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Tzuq9Q5QT4OLEwq/9BbhEQd2Y3rzL+ShscCkbtjhbSO2BBsOkY5HRPRZ1XgLEtvLEsR1FzUYJ+dlohdDBFYY7w==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.534726', "updated_at" = '2017-03-23 07:29:18.534803' WHERE "users_departments"."id" = $1[0m  [["id", 28]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.543922', "updated_at" = '2017-03-23 07:29:18.543988' WHERE "users_departments"."id" = $1[0m  [["id", 29]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.551105', "updated_at" = '2017-03-23 07:29:18.551141' WHERE "users_departments"."id" = $1[0m  [["id", 30]]
  [1m[35m (19.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.580289', "updated_at" = '2017-03-23 07:29:18.580347' WHERE "users_departments"."id" = $1[0m  [["id", 31]]
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.602858', "updated_at" = '2017-03-23 07:29:18.602898' WHERE "users_departments"."id" = $1[0m  [["id", 32]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.634448', "updated_at" = '2017-03-23 07:29:18.634507' WHERE "users_departments"."id" = $1[0m  [["id", 33]]
  [1m[35m (29.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:18 UTC], ["updated_at", 2017-03-23 07:29:18 UTC]]
  [1m[35m (22.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:18 UTC], ["updated_at", 2017-03-23 07:29:18 UTC]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 249ms (ActiveRecord: 189.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:29:18 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (93.8ms)
  Rendered layouts/_headcontent.html.erb (427.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (15.5ms)
  Rendered layouts/_settingnav.html.erb (35.3ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 609ms (Views: 571.5ms | ActiveRecord: 26.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:29:22 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (34.2ms)
  Rendered layouts/_headcontent.html.erb (376.2ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (29.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 487ms (Views: 456.1ms | ActiveRecord: 18.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:29:25 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KZ/8ur6NPMdD9v1qAHYr42kGrQwP2KltPg4YtbY5XOTQoE1BIVM0ADy8Iq3/chE5fLS7YcnvaivqbKuYao4pKA==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:25.971982', "updated_at" = '2017-03-23 07:29:25.972021' WHERE "users_departments"."id" = $1[0m  [["id", 34]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:25.979844', "updated_at" = '2017-03-23 07:29:25.979880' WHERE "users_departments"."id" = $1[0m  [["id", 35]]
  [1m[35m (37.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:26 UTC], ["updated_at", 2017-03-23 07:29:26 UTC]]
  [1m[35m (16.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 96ms (ActiveRecord: 67.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:29:26 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (88.9ms)
  Rendered layouts/_headcontent.html.erb (450.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (3.9ms)
  Rendered layouts/_settingnav.html.erb (40.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 621ms (Views: 592.5ms | ActiveRecord: 21.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:29:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (27.4ms)
  Rendered layouts/_headcontent.html.erb (408.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (41.7ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 533ms (Views: 509.8ms | ActiveRecord: 8.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:29:57 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2CsmV1uJdHJOuVySTztLLREu5fYwfChBu4jhmSYSdrQhFJesxFd8tTHzg1WwP3H3BJzzm/ZL6wdv6lK0+qUDeA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:57.087908', "updated_at" = '2017-03-23 07:29:57.087952' WHERE "users_departments"."id" = $1[0m  [["id", 36]]
  [1m[35m (34.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:57 UTC], ["updated_at", 2017-03-23 07:29:57 UTC]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 76ms (ActiveRecord: 46.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:29:57 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (39.6ms)
  Rendered layouts/_headcontent.html.erb (394.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_settingnav.html.erb (37.9ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 519ms (Views: 497.3ms | ActiveRecord: 9.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:30:00 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (7.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (34.6ms)
  Rendered layouts/_headcontent.html.erb (412.8ms)
  Rendered layouts/_layout_common_js.html.erb (11.7ms)
  Rendered layouts/_logoheader.html.erb (8.0ms)
  Rendered layouts/_settingnav.html.erb (39.4ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 542ms (Views: 512.0ms | ActiveRecord: 15.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:30:14 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"z0VZpeVU4aO0PEXh0YsjiMnAgcLwNWfCHOTrha1cyaM2euheeorpZMt2miYujxlS3HKXrzYCpITIhlioceu8bw==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:30:14.191322', "updated_at" = '2017-03-23 07:30:14.191368' WHERE "users_departments"."id" = $1[0m  [["id", 37]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:30:14 UTC], ["updated_at", 2017-03-23 07:30:14 UTC]]
  [1m[35m (20.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 58ms (ActiveRecord: 30.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:30:14 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (38.3ms)
  Rendered layouts/_headcontent.html.erb (399.5ms)
  Rendered layouts/_layout_common_js.html.erb (1.1ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (41.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 526ms (Views: 502.1ms | ActiveRecord: 11.0ms)


