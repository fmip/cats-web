Started GET "/" for 127.0.0.1 at 2017-03-22 15:21:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (54.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c9e8d150f06f26df/variables" for 127.0.0.1 at 2017-03-22 15:21:27 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddNewColumnToUsers (20170226064916)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (180.7ms)[0m  [1m[35mALTER TABLE "users" ADD "user_type_id" integer[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170226064916"]]
  [1m[35m (18.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRationToOperation (20170226153058)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (44.3ms)[0m  [1m[35mALTER TABLE "operations" ADD "ration_id" integer[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170226153058"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddRequestIdToRequisition (20170301145258)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "requisitions" ADD "request_id" integer NOT NULL[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170301145258"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveUomFromRequisitionItem (20170301145658)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (156.9ms)[0m  [1m[35mALTER TABLE "requisition_items" DROP "commodity_id"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "requisition_items" DROP "unit_of_measure_id"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170301145658"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddGeneratedFlagToRequest (20170301150658)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.1ms)[0m  [1m[35mALTER TABLE "regional_requests" ADD "generated" boolean[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170301150658"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to RenameBillOfLoadingInGiftCertificate (20170309101930)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (115.9ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "bill_of_ladding"[0m
  [1m[35m (42.7ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "bill_of_loading" character varying[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170309101930"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeFloatFieldsToDecimalGiftCertificate (20170309113320)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "amount"[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "estimated_price"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "gift_certificates" DROP "estimated_tax"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "amount" decimal(15,2)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "estimated_price" decimal(15,2)[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "estimated_tax" decimal(15,2)[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170309113320"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to MoveItemDetailsToGiftCertificate (20170309152300)
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (165.5ms)[0m  [1m[35mDROP TABLE "gift_certificate_items"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "fund_source_id" integer[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "currency_id" integer[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170309152300"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOwnershipTypes (20170315072023)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (490.4ms)[0m  [1m[35mCREATE TABLE "ownership_types" ("id" serial primary key, "name" character varying NOT NULL, "description" text, "created_by" integer, "modified_by" integer, "deleted" boolean DEFAULT 'f', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170315072023"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddOwnershipTypeToTransporter (20170315072655)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (131.7ms)[0m  [1m[35mALTER TABLE "transporters" DROP "ownership"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "transporters" ADD "ownership_type_id" integer[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170315072655"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCommodityIdToGiftCertificate (20170322110528)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "gift_certificates" ADD "commodity_id" integer[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322110528"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAddressToHub (20170322110633)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (102.3ms)[0m  [1m[35mALTER TABLE "hubs" ADD "address" character varying[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322110633"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (98.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/" for 127.0.0.1 at 2017-03-22 15:23:04 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 43ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-22 15:23:04 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (6.1ms)
  Rendered devise/sessions/new.html.erb within layouts/application (44.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_topnavbar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (8.5ms)
Completed 200 OK in 44023ms (Views: 43934.0ms | ActiveRecord: 12.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-22 15:23:57 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NiZ+c3a7Ih9GConBwe4DZ+fGUegwqd2AS9XOHO+0JBQT3MmZXMAUBPTDxWJh1LAiyseuRmKFkZBnIdMdLHRvUA==", "user"=>{"email"=>"admin@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (330.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 336ms (ActiveRecord: 330.1ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NiZ+c3a7Ih9GConBwe4DZ+fGUegwqd2AS9XOHO+0JBQT3MmZXMAUBPTDxWJh1LAiyseuRmKFkZBnIdMdLHRvUA==", "user"=>{"email"=>"admin@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (3.9ms)
  Rendered devise/sessions/new.html.erb within layouts/application (14.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 991ms (Views: 643.9ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-22 15:24:11 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"HUkUa4QJjc1W5hEqSJkEE1dSNw+E3vJjxPZ88zk7+ak4s6OBrnK71uQvXYnoo7dWelPIodbyvnPoAmHy+vuy7Q==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", 2017-03-22 12:24:11 UTC], ["last_sign_in_at", 2017-03-22 07:51:39 UTC], ["sign_in_count", 17], ["updated_at", 2017-03-22 12:24:11 UTC], ["id", 18]]
  [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 440ms (ActiveRecord: 34.9ms)


Started GET "/" for 127.0.0.1 at 2017-03-22 15:24:11 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  Rendered layouts/_navigation.html.erb (39.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 574ms (Views: 567.0ms | ActiveRecord: 2.3ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 15:24:16 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (6.5ms)
  Rendered layouts/_headcontent.html.erb (596.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[36mRole Load (74.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (348.2ms)
  Rendered layouts/_topnavbar.html.erb (7.4ms)
  Rendered layouts/_footer.html.erb (5.7ms)
Completed 200 OK in 1000ms (Views: 898.9ms | ActiveRecord: 93.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 15:24:28 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (11.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (70.0ms)
  Rendered layouts/_headcontent.html.erb (673.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (43.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 853ms (Views: 799.6ms | ActiveRecord: 30.0ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-22 15:24:43 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (16.7ms)
  Rendered layouts/_headcontent.html.erb (402.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (38.0ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (5.5ms)
Completed 200 OK in 509ms (Views: 478.9ms | ActiveRecord: 8.7ms)


Started GET "/en/roles/new" for 127.0.0.1 at 2017-03-22 15:24:49 +0300
Processing by RolesController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/new.html.erb within layouts/admin
  Rendered roles/_form.html.erb (7.9ms)
  Rendered roles/new.html.erb within layouts/admin (9.8ms)
  Rendered layouts/_headcontent.html.erb (414.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.2ms)
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (43.3ms)
  Rendered layouts/_topnavbar.html.erb (15.5ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 528ms (Views: 518.2ms | ActiveRecord: 3.4ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-22 15:24:54 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (9.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (16.5ms)
  Rendered layouts/_headcontent.html.erb (360.3ms)
  Rendered layouts/_layout_common_js.html.erb (1.9ms)
  Rendered layouts/_logoheader.html.erb (3.5ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (33.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 458ms (Views: 435.9ms | ActiveRecord: 15.1ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-22 15:30:12 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (14.6ms)
  Rendered layouts/_headcontent.html.erb (431.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (8.9ms)
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (46.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 536ms (Views: 514.1ms | ActiveRecord: 16.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 15:30:15 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (8.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (62.0ms)
  Rendered layouts/_headcontent.html.erb (493.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (42.4ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (4.8ms)
Completed 200 OK in 642ms (Views: 612.8ms | ActiveRecord: 19.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 15:47:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (10.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (79.1ms)
  Rendered layouts/_headcontent.html.erb (3107.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (19.2ms)
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (77.7ms)
  Rendered layouts/_topnavbar.html.erb (8.3ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 3697ms (Views: 3311.6ms | ActiveRecord: 55.6ms)


Started GET "/en/users/21/edit" for 127.0.0.1 at 2017-03-22 15:47:36 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 9.0ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5baf3d5b0f71b8fb/variables" for 127.0.0.1 at 2017-03-22 15:47:36 +0300
Started GET "/en/users/26/edit" for 127.0.0.1 at 2017-03-22 15:47:52 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 11.0ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0743270def7ff5e8/variables" for 127.0.0.1 at 2017-03-22 15:47:52 +0300
Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-22 15:47:59 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (70.6ms)
  Rendered layouts/_headcontent.html.erb (857.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (91.1ms)
  Rendered layouts/_topnavbar.html.erb (8.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 1101ms (Views: 1055.1ms | ActiveRecord: 27.7ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 15:49:40 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (9.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (8.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (130.0ms)
  Rendered layouts/_headcontent.html.erb (762.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (14.0ms)
  [1m[36mRole Load (8.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (83.8ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 1064ms (Views: 968.1ms | ActiveRecord: 56.5ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 15:58:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (195.7ms)
  Rendered layouts/_headcontent.html.erb (2391.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  [1m[36mRole Load (10.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (86.7ms)
  Rendered layouts/_topnavbar.html.erb (3.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2893ms (Views: 2693.1ms | ActiveRecord: 59.1ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 16:16:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 71], ["LIMIT", 1]]
  [1m[36mRole Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 74], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 70], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 69], ["LIMIT", 1]]
  [1m[36mRole Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 68], ["LIMIT", 1]]
  [1m[36mRole Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 75], ["LIMIT", 1]]
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 72], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (180.4ms)
  Rendered layouts/_headcontent.html.erb (2479.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (114.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2973ms (Views: 2801.4ms | ActiveRecord: 43.2ms)


Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:16:48 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (57.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  Rendered layouts/_navigation.html.erb (31.4ms)
  Rendered layouts/_topnavbar.html.erb (6.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 645ms (Views: 620.2ms | ActiveRecord: 13.1ms)


Started DELETE "/en/departments/84" for 127.0.0.1 at 2017-03-22 16:18:06 +0300
Processing by DepartmentsController#destroy as HTML
  Parameters: {"authenticity_token"=>"4UlWfyoASmYzWXl01AXaw72fv89LcaMZFW0F9XhFPHbzMcVxTGGKrwqmasozZfYE6WOsAbYRpbMgL07k7pDBTQ==", "locale"=>"en", "id"=>"84"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "departments" SET "deleted_at" = '2017-03-22 13:18:06.137092', "updated_at" = '2017-03-22 13:18:06.137324' WHERE "departments"."id" = $1[0m  [["id", 84]]
  [1m[35m (41.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/departments
Completed 302 Found in 75ms (ActiveRecord: 54.0ms)


Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:18:06 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (6.6ms)
  Rendered layouts/_layout_common_js.html.erb (3.2ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  Rendered layouts/_navigation.html.erb (28.2ms)
  Rendered layouts/_topnavbar.html.erb (2.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 546ms (Views: 536.7ms | ActiveRecord: 3.2ms)


Started GET "/en/departments/new" for 127.0.0.1 at 2017-03-22 16:18:09 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (1.9ms)
  Rendered departments/new.html.erb within layouts/application (8.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_navigation.html.erb (31.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 563ms (Views: 544.7ms | ActiveRecord: 7.7ms)


Started POST "/en/departments" for 127.0.0.1 at 2017-03-22 16:18:25 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SdzdF6JEh3jpe2oMJI4ZRdkYrCyykQtSrl9H+wD7aEZbpE4ZxCVHsdCEebLD7jWCjeS/4k/xDfibHQzqli6VfQ==", "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (9.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (41.1ms)[0m  [1m[32mINSERT INTO "departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:18:25 UTC], ["updated_at", 2017-03-22 13:18:25 UTC]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/departments/87
Completed 302 Found in 80ms (ActiveRecord: 66.8ms)


Started GET "/en/departments/87" for 127.0.0.1 at 2017-03-22 16:18:25 +0300
Processing by DepartmentsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"87"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  Rendering departments/show.html.erb within layouts/application
  Rendered departments/show.html.erb within layouts/application (1.0ms)
  Rendered layouts/_layout_common_js.html.erb (13.3ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  Rendered layouts/_navigation.html.erb (29.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 617ms (Views: 599.2ms | ActiveRecord: 1.0ms)


Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:18:30 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (14.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (13.4ms)
  Rendered layouts/_navigation.html.erb (35.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 579ms (Views: 568.9ms | ActiveRecord: 3.5ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322132045)
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:24:53 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e43078b90cfb40b9/variables" for 127.0.0.1 at 2017-03-22 16:24:53 +0300
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:24:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/265a0faa9670beb6/variables" for 127.0.0.1 at 2017-03-22 16:24:55 +0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322132045)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:26:25 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f0be5857e9c81a06/variables" for 127.0.0.1 at 2017-03-22 16:26:26 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322132045)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (42.6ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322132045"]]
  [1m[35m (23.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/departments" for 127.0.0.1 at 2017-03-22 16:28:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [GET] "/en/departments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [307 times] (211.9ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (32.6ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (19.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (392.1ms)
Started GET "/" for 127.0.0.1 at 2017-03-22 16:29:03 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.5ms)
  Rendered layouts/_navigation.html.erb (50.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 4760ms (Views: 4640.2ms | ActiveRecord: 9.0ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 16:29:11 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.9ms)
  Rendered layouts/_headcontent.html.erb (637.1ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (4.2ms)
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (260.7ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 947ms (Views: 930.8ms | ActiveRecord: 11.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:29:20 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (5.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (22.9ms)
Completed 500 Internal Server Error in 52ms (ActiveRecord: 8.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActiveRecord::StatementInvalid - PG::UndefinedColumn: ERROR:  column departments.deleted_at does not exist
LINE 1: SELECT "departments".* FROM "departments" WHERE "departments...
                                                        ^
: SELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL:
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:578:in `translate_exception_class'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:591:in `rescue in log'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:585:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `block in select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:108:in `cache_sql'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `select_all'
  activerecord (5.0.2) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (5.0.2) lib/active_record/relation.rb:702:in `exec_queries'
  activerecord (5.0.2) lib/active_record/relation.rb:583:in `load'
  activerecord (5.0.2) lib/active_record/relation.rb:260:in `records'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/departments/index.html.erb:34:in `_app_views_departments_index_html_erb___210748001115548111_70215861628420'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/eec29855181d2450/variables" for 127.0.0.1 at 2017-03-22 16:29:20 +0300
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (3.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (3.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322133007)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateDepartments (20170322133007)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (127.7ms)[0m  [1m[35mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322133007"]]
  [1m[35m (44.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 16:33:23 +0300
  [1m[36mActiveRecord::SchemaMigration Load (7.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (17.5ms)
  Rendered layouts/_headcontent.html.erb (2633.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (205.7ms)
  Rendered layouts/_topnavbar.html.erb (7.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3061ms (Views: 2888.1ms | ActiveRecord: 43.3ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:33:34 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (15.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (2.6ms)
  Rendered layouts/_navigation.html.erb (29.1ms)
  Rendered layouts/_topnavbar.html.erb (6.2ms)
  Rendered layouts/_footer.html.erb (3.6ms)
Completed 200 OK in 627ms (Views: 601.6ms | ActiveRecord: 10.6ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-22 16:33:38 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (47.9ms)
  Rendered departments/new.html.erb within layouts/application (58.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.8ms)
  Rendered layouts/_navigation.html.erb (37.8ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 743ms (Views: 699.7ms | ActiveRecord: 5.4ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:33:54 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9NXCKsTzkzkjfY16iQN9RVO8b/5zCE/shJSwhP75lYnmrVEkopJT8BqCnsRuY1GCB0B8MI5oSUax1vuVaCxosg==", "department"=>{"name"=>"new department", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department"], ["description", ""], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:33:54 UTC], ["updated_at", 2017-03-22 13:33:54 UTC]]
  [1m[35m (29.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments/1?locale=en
Completed 302 Found in 59ms (ActiveRecord: 39.0ms)


Started GET "/departments/1?locale=en" for 127.0.0.1 at 2017-03-22 16:33:54 +0300
Processing by DepartmentsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering departments/show.html.erb within layouts/application
  Rendered departments/show.html.erb within layouts/application (1.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  Rendered layouts/_navigation.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (11.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 635ms (Views: 614.9ms | ActiveRecord: 5.2ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:34:01 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (3.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (6.7ms)
  Rendered layouts/_layout_common_js.html.erb (9.5ms)
  Rendered layouts/_logoheader.html.erb (5.7ms)
  Rendered layouts/_navigation.html.erb (31.4ms)
  Rendered layouts/_topnavbar.html.erb (7.0ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 704ms (Views: 685.4ms | ActiveRecord: 11.9ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:34:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (6.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (38.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_navigation.html.erb (32.7ms)
  Rendered layouts/_topnavbar.html.erb (10.5ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2765ms (Views: 2602.9ms | ActiveRecord: 17.0ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-22 16:34:54 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (39.4ms)
  Rendered departments/new.html.erb within layouts/application (48.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  Rendered layouts/_navigation.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (11.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 690ms (Views: 677.1ms | ActiveRecord: 1.4ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:09 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c7CqeahAQ+GgvsJUCk9UcIh0JCDroi3s7Bu52Xpr+xlhyDl3ziGDKJlB0ertL3i33Ig37hbCK0bZWfLI7L4GIg==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department two"], ["description", "and description"], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:35:09 UTC], ["updated_at", 2017-03-22 13:35:09 UTC]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 42ms (ActiveRecord: 21.5ms)



ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"departments", :locale=>:en} missing required keys: [:id]:
  actionpack (5.0.2) lib/action_dispatch/journey/formatter.rb:51:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:629:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:660:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:707:in `url_for'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:236:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:177:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:295:in `block (2 levels) in define_url_helper'
  app/controllers/departments_controller.rb:31:in `block (2 levels) in create'
  actionpack (5.0.2) lib/action_controller/metal/mime_responds.rb:201:in `respond_to'
  app/controllers/departments_controller.rb:29:in `create'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3b37e77b09b8ba04/variables" for 127.0.0.1 at 2017-03-22 16:35:09 +0300
Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c7CqeahAQ+GgvsJUCk9UcIh0JCDroi3s7Bu52Xpr+xlhyDl3ziGDKJlB0ertL3i33Ig37hbCK0bZWfLI7L4GIg==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department two"], ["description", "and description"], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 13:35:37 UTC], ["updated_at", 2017-03-22 13:35:37 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 209ms (ActiveRecord: 26.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:37 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (25.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (19.9ms)
  Rendered layouts/_navigation.html.erb (42.5ms)
  Rendered layouts/_topnavbar.html.erb (11.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2835ms (Views: 2812.7ms | ActiveRecord: 9.4ms)


Started DELETE "/departments/3?locale=en" for 127.0.0.1 at 2017-03-22 16:35:51 +0300
Processing by DepartmentsController#destroy as HTML
  Parameters: {"authenticity_token"=>"v4Y+oMhMsosXr9Eu7HrSiYtKFxEunb7ZVvNPq2Fl7i+t/q2uri1yQi5QwpALGv5O37YE39P9uHNjsQS697ATFA==", "locale"=>"en", "id"=>"3"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "departments" SET "deleted_at" = '2017-03-22 13:35:52.022720', "updated_at" = '2017-03-22 13:35:52.022828' WHERE "departments"."id" = $1[0m  [["id", 3]]
  [1m[35m (167.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 205ms (ActiveRecord: 177.1ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:35:52 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (8.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_navigation.html.erb (37.1ms)
  Rendered layouts/_topnavbar.html.erb (9.8ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 742ms (Views: 726.3ms | ActiveRecord: 3.2ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:38:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (41.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.7ms)
  Rendered layouts/_navigation.html.erb (18.9ms)
  Rendered layouts/_topnavbar.html.erb (4.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2786ms (Views: 2631.4ms | ActiveRecord: 19.5ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-22 16:38:24 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (24.5ms)
  Rendered departments/new.html.erb within layouts/application (37.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.8ms)
  Rendered layouts/_navigation.html.erb (33.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 671ms (Views: 652.3ms | ActiveRecord: 4.3ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:38:30 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"94S09Z559afbdxTEfYHI0Ae1BeSSvhcahWA2tohjAPPl/Cf7+Bg1buKIB3qa4eQXU0kWKm/eEbCwIn2nHrb9yA==", "department"=>{"name"=>"new department two", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL LIMIT $2[0m  [["name", "new department two"], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mROLLBACK[0m
  Rendering departments/new.html.erb within layouts/application
  Rendered departments/_form.html.erb (7.1ms)
  Rendered departments/new.html.erb within layouts/application (11.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_navigation.html.erb (23.6ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 563ms (Views: 509.6ms | ActiveRecord: 15.3ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:38:36 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (6.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (13.0ms)
  Rendered layouts/_navigation.html.erb (49.7ms)
  Rendered layouts/_topnavbar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 602ms (Views: 573.3ms | ActiveRecord: 5.2ms)


Started GET "/departments/2/edit?locale=en" for 127.0.0.1 at 2017-03-22 16:38:47 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/application
  Rendered departments/_form.html.erb (5.0ms)
  Rendered departments/edit.html.erb within layouts/application (15.4ms)
  Rendered layouts/_layout_common_js.html.erb (7.2ms)
  Rendered layouts/_logoheader.html.erb (8.9ms)
  Rendered layouts/_navigation.html.erb (19.5ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 671ms (Views: 651.9ms | ActiveRecord: 3.8ms)


Started PATCH "/departments/2?locale=en" for 127.0.0.1 at 2017-03-22 16:38:50 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SkvWPWADHmG+8hGSJYPcn3fWsH/hUwD5xMEyAnfBRmdYM0UzBmLeqIcNAizC4/BYIyqjsRwzBlPxg3kT4RS7XA==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "new department two"], ["id", 2], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments/2?locale=en
Completed 302 Found in 60ms (ActiveRecord: 11.0ms)


Started GET "/departments/2?locale=en" for 127.0.0.1 at 2017-03-22 16:38:50 +0300
Processing by DepartmentsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/show.html.erb within layouts/application
  Rendered departments/show.html.erb within layouts/application (1.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_navigation.html.erb (17.8ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 541ms (Views: 528.0ms | ActiveRecord: 2.4ms)


Started GET "/departments/2/edit?locale=en" for 127.0.0.1 at 2017-03-22 16:39:45 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/application
  Rendered departments/_form.html.erb (39.6ms)
  Rendered departments/edit.html.erb within layouts/application (54.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_navigation.html.erb (48.3ms)
  Rendered layouts/_topnavbar.html.erb (6.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2937ms (Views: 2741.9ms | ActiveRecord: 25.3ms)


Started PATCH "/departments/2?locale=en" for 127.0.0.1 at 2017-03-22 16:39:52 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cySOWQ5pEBUPTY32Dgr5WGn7GUC9j/Elgd7bxXAiZSVhXB1XaAjQ3DaynkjpatWfPQcKjkDv94+0nJDU5veYHg==", "department"=>{"name"=>"new department two", "description"=>"and description"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "new department two"], ["id", 2], ["LIMIT", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 82ms (ActiveRecord: 20.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-22 16:39:52 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (5.3ms)
  Rendered layouts/_layout_common_js.html.erb (10.3ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  Rendered layouts/_navigation.html.erb (48.0ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 633ms (Views: 619.5ms | ActiveRecord: 5.6ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (112.9ms)[0m  [1m[35mCREATE TABLE "users_departments" ("id" serial primary key, "user_id" integer, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_cbafd1e5ff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b917af0f43"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_user_id" ON "users_departments"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_department_id" ON "users_departments"  ("department_id")[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322184115"]]
  [1m[35m (21.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/" for 127.0.0.1 at 2017-03-22 21:54:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 40ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-22 21:54:15 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (39.9ms)
  Rendered layouts/_layout_common_js.html.erb (8.7ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2387ms (Views: 2309.1ms | ActiveRecord: 7.4ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-22 21:54:30 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kqh3/creLGz+jKZPrAp2VEr5GqTF3j7Gf3o9et3MWzbBalereWbcnSM/OJ4EhTR1+Zf3dWF+QfzGlxkCVGxJVQ==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", 2017-03-22 18:54:30 UTC], ["last_sign_in_at", 2017-03-22 12:24:11 UTC], ["sign_in_count", 18], ["updated_at", 2017-03-22 18:54:30 UTC], ["id", 18]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 402ms (ActiveRecord: 12.9ms)


Started GET "/" for 127.0.0.1 at 2017-03-22 21:54:30 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (12.1ms)
  Rendered layouts/_logoheader.html.erb (14.4ms)
  Rendered layouts/_navigation.html.erb (39.8ms)
  Rendered layouts/_topnavbar.html.erb (8.0ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 639ms (Views: 630.4ms | ActiveRecord: 2.9ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 21:54:35 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.6ms)
  Rendered layouts/_headcontent.html.erb (525.7ms)
  Rendered layouts/_layout_common_js.html.erb (7.6ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (161.7ms)
  Rendered layouts/_topnavbar.html.erb (8.3ms)
  Rendered layouts/_footer.html.erb (3.4ms)
Completed 200 OK in 760ms (Views: 746.1ms | ActiveRecord: 6.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 21:54:41 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 34ms (ActiveRecord: 2.6ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 21:54:41 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.7ms)
  Rendered layouts/_headcontent.html.erb (605.1ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 18]]
  Rendered layouts/_settingnav.html.erb (81.8ms)
  Rendered layouts/_topnavbar.html.erb (4.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 751ms (Views: 741.4ms | ActiveRecord: 4.4ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-22 21:56:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (30.6ms)
  Rendered layouts/_headcontent.html.erb (2820.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.2ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  Rendered layouts/_settingnav.html.erb (50.4ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 3146ms (Views: 2973.0ms | ActiveRecord: 21.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 21:56:22 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (191.4ms)
  Rendered layouts/_headcontent.html.erb (582.7ms)
  Rendered layouts/_layout_common_js.html.erb (9.8ms)
  Rendered layouts/_logoheader.html.erb (6.2ms)
  Rendered layouts/_settingnav.html.erb (32.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 885ms (Views: 850.6ms | ActiveRecord: 20.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 21:56:29 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/departments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [307 times] (204.0ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (24.1ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (366.8ms)
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 21:59:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 406 Not Acceptable in 238ms (ActiveRecord: 16.5ms)



ActionController::UnknownFormat - UsersController#departments is missing a template for this request format and variant.

request.formats: ["text/html"]
request.variant: []

NOTE! For XHR/Ajax or API requests, this action would normally respond with 204 No Content: an empty white screen. Since you're loading it in a web browser, we assume that you expected to actually render a template, not nothing, so we're showing an error to be extra-clear. If you expect 204 No Content, carry on. That's what you'll get from an XHR or API request. Give it a shot.:
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:56:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/04ce4545bdeea1ca/variables" for 127.0.0.1 at 2017-03-22 21:59:17 +0300
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:06:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (23.2ms)
Completed 500 Internal Server Error in 194ms (ActiveRecord: 10.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___4076279030532526235_69966361394360'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1e2f9c6223c0e887/variables" for 127.0.0.1 at 2017-03-22 22:06:25 +0300
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-22 22:06:42 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (211.5ms)
  Rendered layouts/_headcontent.html.erb (2899.7ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  Rendered layouts/_settingnav.html.erb (150.7ms)
  Rendered layouts/_topnavbar.html.erb (21.4ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 3352ms (Views: 3291.7ms | ActiveRecord: 21.4ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 22:06:53 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (7.5ms)
  Rendered layouts/_headcontent.html.erb (588.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_settingnav.html.erb (51.9ms)
  Rendered layouts/_topnavbar.html.erb (9.6ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 721ms (Views: 686.8ms | ActiveRecord: 16.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:06:59 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (12.6ms)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 2.4ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___4076279030532526235_46929387960780'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0cf7a2e89c0ef0a4/variables" for 127.0.0.1 at 2017-03-22 22:06:59 +0300
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:09:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (17.2ms)
Completed 500 Internal Server Error in 212ms (ActiveRecord: 23.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___1342021021015208902_69901400128880'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/46ceb9084431a3b9/variables" for 127.0.0.1 at 2017-03-22 22:09:10 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:09:16 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (8.6ms)
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___1342021021015208902_47201807160480'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/10970301542a8ad0/variables" for 127.0.0.1 at 2017-03-22 22:09:17 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:09:24 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (19.8ms)
Completed 500 Internal Server Error in 53ms (ActiveRecord: 6.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb___1342021021015208902_47201790529360'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f65e416a42eecfda/variables" for 127.0.0.1 at 2017-03-22 22:09:24 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started POST "/__better_errors/f65e416a42eecfda/variables" for 127.0.0.1 at 2017-03-22 22:09:41 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:11:46 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (17.7ms)
Completed 500 Internal Server Error in 170ms (ActiveRecord: 17.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/departments.html.erb:3:in `_app_views_users_departments_html_erb__714957191461321349_47047279189700'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a44e7856141e5871/variables" for 127.0.0.1 at 2017-03-22 22:11:47 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:16:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (84.1ms)
Completed 500 Internal Server Error in 302ms (ActiveRecord: 28.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `department' for #<User:0x007f634043e7c0>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:33:in `block (2 levels) in _app_views_users_departments_html_erb___2029638061335779481_70032128234760'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/departments.html.erb:30:in `block in _app_views_users_departments_html_erb___2029638061335779481_70032128234760'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:25:in `_app_views_users_departments_html_erb___2029638061335779481_70032128234760'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dff7acb7040f979d/variables" for 127.0.0.1 at 2017-03-22 22:16:58 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:18:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (116.1ms)
Completed 500 Internal Server Error in 332ms (ActiveRecord: 19.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `departments' for #<User:0x0055ff8651dcf0>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:33:in `block (2 levels) in _app_views_users_departments_html_erb__4113887986246134916_47277979381700'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/departments.html.erb:30:in `block in _app_views_users_departments_html_erb__4113887986246134916_47277979381700'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:25:in `_app_views_users_departments_html_erb__4113887986246134916_47277979381700'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/753f5f0bc29ef903/variables" for 127.0.0.1 at 2017-03-22 22:18:34 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:20:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (112.2ms)
Completed 500 Internal Server Error in 372ms (ActiveRecord: 23.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `departments' for #<User:0x0055b92399a188>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:33:in `block (2 levels) in _app_views_users_departments_html_erb___3324022280421474054_47126827409960'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/departments.html.erb:30:in `block in _app_views_users_departments_html_erb___3324022280421474054_47126827409960'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:25:in `_app_views_users_departments_html_erb___3324022280421474054_47126827409960'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/58b37fe76a9961ae/variables" for 127.0.0.1 at 2017-03-22 22:20:37 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-22 22:25:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (7.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (38.4ms)
  Rendered layouts/_headcontent.html.erb (2815.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (20.2ms)
  Rendered layouts/_settingnav.html.erb (107.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3190ms (Views: 2998.9ms | ActiveRecord: 32.0ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-22 22:26:16 +0300

AbstractController::ActionNotFound - The action 'updateDepartments' could not be found for UsersController:
  actionpack (5.0.2) lib/abstract_controller/base.rb:121:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/74c68241184ae28a/variables" for 127.0.0.1 at 2017-03-22 22:26:17 +0300
Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-22 22:27:21 +0300

AbstractController::ActionNotFound - The action 'updateDepartments' could not be found for UsersController:
  actionpack (5.0.2) lib/abstract_controller/base.rb:121:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5476998d9a83a535/variables" for 127.0.0.1 at 2017-03-22 22:27:21 +0300
Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-22 22:27:50 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (13.2ms)
  Rendered layouts/_headcontent.html.erb (645.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.9ms)
  Rendered layouts/_settingnav.html.erb (50.3ms)
  Rendered layouts/_topnavbar.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 811ms (Views: 748.9ms | ActiveRecord: 10.6ms)


Started PUT "/users/21/updateRoles" for 127.0.0.1 at 2017-03-22 22:27:54 +0300
Processing by UsersController#updateRoles as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oylnqFvEJs4sGRKYt/160zyo1cfNHuLucM+6VtIUkPdFJgQPlCdJzjLC+ZInT+4x7aZVbbHMAty5Qyil2PondA==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 35ms (ActiveRecord: 9.2ms)



ActionController::ParameterMissing - param is missing or the value is empty: roles:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:65:in `updateRoles'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/082aca78d9ef37cf/variables" for 127.0.0.1 at 2017-03-22 22:27:54 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 22:30:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (13.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (39.6ms)
  Rendered layouts/_headcontent.html.erb (2330.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  Rendered layouts/_settingnav.html.erb (84.5ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2651ms (Views: 2487.8ms | ActiveRecord: 37.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:30:25 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 106ms (ActiveRecord: 16.3ms)



NoMethodError - undefined method `departments=' for #<User:0x007f67e80d21e8>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:46:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e13d9cb4a36ea89b/variables" for 127.0.0.1 at 2017-03-22 22:30:26 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:35:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 235ms (ActiveRecord: 36.6ms)



NoMethodError - undefined method `departments=' for #<User:0x007f90bc3f2880>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:46:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b508045158efeee3/variables" for 127.0.0.1 at 2017-03-22 22:35:57 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:51:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
Completed 500 Internal Server Error in 303ms (ActiveRecord: 26.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

PG::UndefinedColumn - ERROR:  column users_departments.deleted_at does not exist
LINE 1: ..._id" WHERE "departments"."deleted_at" IS NULL AND "users_dep...
                                                             ^
:
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `block in exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:587:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `block in select_all'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:108:in `cache_sql'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:93:in `select_all'
  activerecord (5.0.2) lib/active_record/querying.rb:39:in `find_by_sql'
  activerecord (5.0.2) lib/active_record/relation.rb:702:in `exec_queries'
  activerecord (5.0.2) lib/active_record/association_relation.rb:32:in `exec_queries'
  activerecord (5.0.2) lib/active_record/relation.rb:583:in `load'
  activerecord (5.0.2) lib/active_record/relation.rb:260:in `records'
  activerecord (5.0.2) lib/active_record/relation.rb:256:in `to_a'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:470:in `get_records'
  activerecord (5.0.2) lib/active_record/associations/has_many_through_association.rb:201:in `find_target'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:416:in `load_target'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:388:in `replace'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:53:in `writer'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:119:in `departments='
  app/controllers/users_controller.rb:46:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/04bc0a8dbb68139d/variables" for 127.0.0.1 at 2017-03-22 22:51:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "users_departments"[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170322184115"]]
  [1m[35m (37.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (61.1ms)[0m  [1m[35mCREATE TABLE "users_departments" ("id" serial primary key, "user_id" integer, "department_id" integer, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_cbafd1e5ff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b917af0f43"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (40.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_user_id" ON "users_departments"  ("user_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_department_id" ON "users_departments"  ("department_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322184115"]]
  [1m[35m (23.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (8.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 22:56:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 394ms (ActiveRecord: 38.5ms)



NoMethodError - undefined method `add_department' for #<User:0x0055cc81374a58>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/463c41a0e4a87e06/variables" for 127.0.0.1 at 2017-03-22 22:56:37 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:04:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 309ms (ActiveRecord: 49.6ms)



NameError - uninitialized constant UsersController::UsersDepartments:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/82ff98984ef842c8/variables" for 127.0.0.1 at 2017-03-22 23:04:14 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:05:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcnncTZejMkgiO1FylN5VmxVkAxuiTUJ9D6jJRJ4/MJbxoTW+b3jyT5TBk9a4e20vVsQphJb1Ts9sjHWGJZLQQ==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 253ms (ActiveRecord: 29.5ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:21:in `new'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `each'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5eb4dd51b3a7d3fb/variables" for 127.0.0.1 at 2017-03-22 23:05:58 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:06:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (9.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (93.0ms)
  Rendered layouts/_headcontent.html.erb (2841.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.5ms)
  Rendered layouts/_settingnav.html.erb (99.8ms)
  Rendered layouts/_topnavbar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (5.6ms)
Completed 200 OK in 3143ms (Views: 3105.5ms | ActiveRecord: 17.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:06:28 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"edhDbhrEoTiFnLeT59Ag57OtFjT3BkWXAA5AckFrpYuf1yDJ1SfOOJtHXJl3YrQFYqOWnovUpaXJgtKBS4USCA==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 43ms (ActiveRecord: 9.1ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:21:in `new'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `each'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/934eb231392c97da/variables" for 127.0.0.1 at 2017-03-22 23:06:29 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:06:59 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (100.4ms)
  Rendered layouts/_headcontent.html.erb (565.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (14.2ms)
  Rendered layouts/_settingnav.html.erb (51.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 782ms (Views: 750.6ms | ActiveRecord: 25.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:07:04 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (33.1ms)
  Rendered layouts/_headcontent.html.erb (538.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (110.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.5ms)
Completed 200 OK in 744ms (Views: 712.1ms | ActiveRecord: 19.1ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:07:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"POubdXRjKSDuq7bvtBUTmSH1RBQrn12FMqiA894F2MPa5PjSu4BGIPBwXeUkp4d78PvEvldNvbf7JBIA1OtvQA==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 44ms (ActiveRecord: 18.2ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:21:in `new'
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `each'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/834c3b8e0b001247/variables" for 127.0.0.1 at 2017-03-22 23:07:11 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:11:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected '\n', expecting =>
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:53: syntax error, unexpected '}', expecting keyword_end
      })
       ^:
  app/controllers/users_controller.rb:51:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2eb6dcbafa1eac56/variables" for 127.0.0.1 at 2017-03-22 23:11:15 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:12:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected '\n', expecting =>
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:54: syntax error, unexpected '}', expecting keyword_end
      })
       ^:
  app/controllers/users_controller.rb:51:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bb76ae95ac0d7a88/variables" for 127.0.0.1 at 2017-03-22 23:12:30 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:13:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tIDENTIFIER, expecting '}'
        user_id: @user.id
               ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:54: syntax error, unexpected '}', expecting keyword_end
      })
       ^:
  app/controllers/users_controller.rb:52:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8322468cbe2338de/variables" for 127.0.0.1 at 2017-03-22 23:13:42 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:14:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"POubdXRjKSDuq7bvtBUTmSH1RBQrn12FMqiA894F2MPa5PjSu4BGIPBwXeUkp4d78PvEvldNvbf7JBIA1OtvQA==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 314ms (ActiveRecord: 21.6ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5dae20fa74e73437/variables" for 127.0.0.1 at 2017-03-22 23:14:14 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:14:43 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"POubdXRjKSDuq7bvtBUTmSH1RBQrn12FMqiA894F2MPa5PjSu4BGIPBwXeUkp4d78PvEvldNvbf7JBIA1OtvQA==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 823ms (ActiveRecord: 47.2ms)



NameError - undefined local variable or method `department_id' for #<UsersController:0x007f26545ab6b8>
Did you mean?  department
               departments
               department_url
               departments_url
               department_path:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/abd242aa97dee700/variables" for 127.0.0.1 at 2017-03-22 23:14:44 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:22:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (170.3ms)
  Rendered layouts/_headcontent.html.erb (2874.7ms)
  Rendered layouts/_layout_common_js.html.erb (3.2ms)
  Rendered layouts/_logoheader.html.erb (9.0ms)
  Rendered layouts/_settingnav.html.erb (114.2ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (4.6ms)
Completed 200 OK in 3419ms (Views: 3235.8ms | ActiveRecord: 30.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:22:29 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 341ms (ActiveRecord: 18.1ms)



NameError - undefined local variable or method `department_id' for #<UsersController:0x007f61436e0978>
Did you mean?  department
               departments
               department_url
               departments_url
               department_path:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e76bacb45aa08809/variables" for 127.0.0.1 at 2017-03-22 23:22:29 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:25:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 786ms (ActiveRecord: 41.8ms)



NameError - undefined local variable or method `department_id' for #<UsersController:0x007fe85459ae90>
Did you mean?  department
               departments
               department_url
               departments_url
               department_path:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/360bb3fbb7d87080/variables" for 127.0.0.1 at 2017-03-22 23:25:10 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:25:59 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 327ms (ActiveRecord: 32.9ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/76225214ca976478/variables" for 127.0.0.1 at 2017-03-22 23:26:00 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:26:39 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hi82elK1bYYDQX+ol/pOFR9rx83Id37PNxbMRu5b2e5gIFXdnVYChh2alKIHSNr3zmVHZ7Slnv3+ml615LVubQ==", "departments"=>{"new department"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (9.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:26:40 UTC], ["updated_at", 2017-03-22 20:26:40 UTC]]
  [1m[35m (85.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 463ms (ActiveRecord: 146.8ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:26:40 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (2.5ms)
  Rendered layouts/_headcontent.html.erb (3081.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.4ms)
  Rendered layouts/_settingnav.html.erb (78.9ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 3267ms (Views: 3213.2ms | ActiveRecord: 8.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:26:50 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (10.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (138.0ms)
  Rendered layouts/_headcontent.html.erb (641.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (50.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 901ms (Views: 843.8ms | ActiveRecord: 39.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:26:55 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (69.5ms)
  Rendered layouts/_headcontent.html.erb (581.9ms)
  Rendered layouts/_layout_common_js.html.erb (2.0ms)
  Rendered layouts/_logoheader.html.erb (15.4ms)
  Rendered layouts/_settingnav.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 774ms (Views: 745.3ms | ActiveRecord: 13.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:27:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tIDENTIFIER, expecting '}'
         dep.save
            ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:54: syntax error, unexpected '}', expecting keyword_end
      })
       ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:141: syntax error, unexpected end-of-input, expecting keyword_end:
  app/controllers/users_controller.rb:53:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/29bd3cad451d2c6d/variables" for 127.0.0.1 at 2017-03-22 23:27:37 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:28:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (9.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (176.8ms)
  Rendered layouts/_headcontent.html.erb (3030.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.4ms)
  Rendered layouts/_settingnav.html.erb (113.0ms)
  Rendered layouts/_topnavbar.html.erb (6.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3621ms (Views: 3378.2ms | ActiveRecord: 49.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:28:34 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 52ms (ActiveRecord: 10.5ms)



NoMethodError - undefined method `department_id' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/24596c967515af96/variables" for 127.0.0.1 at 2017-03-22 23:28:34 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:30:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 302ms (ActiveRecord: 30.7ms)



NoMethodError - undefined method `department' for :"new department":Symbol:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e458cf64bc842533/variables" for 127.0.0.1 at 2017-03-22 23:30:15 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:31:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 576ms (ActiveRecord: 41.0ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f2514773900>:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6582553f8bea76cf/variables" for 127.0.0.1 at 2017-03-22 23:31:23 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:33:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 787ms (ActiveRecord: 37.0ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f7ab45d1250>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/aad44ee802a52ff8/variables" for 127.0.0.1 at 2017-03-22 23:33:17 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:34:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1Gi8wZ39DaydgS9YJVboo55IVtnBeHQmsmuk7pKhOGsyZ99mUh5irINaxFK15HxBT0bWc72qlBR75zYdmE+P6A==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:25 UTC], ["updated_at", 2017-03-22 20:34:25 UTC]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:25 UTC], ["updated_at", 2017-03-22 20:34:25 UTC]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 408ms (ActiveRecord: 74.5ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:34:25 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (7.8ms)
  Rendered layouts/_headcontent.html.erb (2976.9ms)
  Rendered layouts/_layout_common_js.html.erb (3.8ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  Rendered layouts/_settingnav.html.erb (79.2ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3178ms (Views: 3129.4ms | ActiveRecord: 4.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:34:36 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (90.2ms)
  Rendered layouts/_headcontent.html.erb (478.3ms)
  Rendered layouts/_layout_common_js.html.erb (3.5ms)
  Rendered layouts/_logoheader.html.erb (22.2ms)
  Rendered layouts/_settingnav.html.erb (46.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 672ms (Views: 642.6ms | ActiveRecord: 22.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:34:41 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (67.7ms)
  Rendered layouts/_headcontent.html.erb (589.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.6ms)
  Rendered layouts/_settingnav.html.erb (48.7ms)
  Rendered layouts/_topnavbar.html.erb (14.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 770ms (Views: 740.1ms | ActiveRecord: 11.3ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:34:47 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9Rg487aA6lAkk6HCpzb7XBvkEDtsVN1cTub/wFq50AcTF1tUeWOFUDpISsg3hG++yuqQkRCGPW6Ham0zUFdnhA==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:47 UTC], ["updated_at", 2017-03-22 20:34:47 UTC]]
  [1m[35m (263.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:34:47 UTC], ["updated_at", 2017-03-22 20:34:47 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 340ms (ActiveRecord: 287.9ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:34:47 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.6ms)
  Rendered layouts/_headcontent.html.erb (685.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.7ms)
  Rendered layouts/_settingnav.html.erb (50.9ms)
  Rendered layouts/_topnavbar.html.erb (11.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 809ms (Views: 786.0ms | ActiveRecord: 2.4ms)


Started GET "/en/users/21/edit" for 127.0.0.1 at 2017-03-22 23:34:52 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 30ms (ActiveRecord: 3.9ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dc5e09e30b0055c2/variables" for 127.0.0.1 at 2017-03-22 23:34:52 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:36:24 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9Rg487aA6lAkk6HCpzb7XBvkEDtsVN1cTub/wFq50AcTF1tUeWOFUDpISsg3hG++yuqQkRCGPW6Ham0zUFdnhA==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:36:24 UTC], ["updated_at", 2017-03-22 20:36:24 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (10.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:36:24 UTC], ["updated_at", 2017-03-22 20:36:24 UTC]]
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 81ms (ActiveRecord: 41.7ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:36:24 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.1ms)
  Rendered layouts/_headcontent.html.erb (543.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (17.5ms)
  Rendered layouts/_settingnav.html.erb (99.8ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 749ms (Views: 726.8ms | ActiveRecord: 2.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:38:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (172.9ms)
  Rendered layouts/_headcontent.html.erb (2823.7ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  Rendered layouts/_settingnav.html.erb (127.9ms)
  Rendered layouts/_topnavbar.html.erb (7.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3367ms (Views: 3170.7ms | ActiveRecord: 29.2ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:38:24 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JsaV2aq0OyR4x5AVIzVthf/z7v5jUE213KakaEd2Gm7AyfZ+ZVdUJGYcex+zh/lnLv1uVB+CrYcVKjabTZit7Q==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:38:24 UTC], ["updated_at", 2017-03-22 20:38:24 UTC]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:38:24 UTC], ["updated_at", 2017-03-22 20:38:24 UTC]]
  [1m[35m (23.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 136ms (ActiveRecord: 71.9ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-22 23:38:24 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.1ms)
  Rendered layouts/_headcontent.html.erb (601.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.9ms)
  Rendered layouts/_settingnav.html.erb (56.0ms)
  Rendered layouts/_topnavbar.html.erb (9.7ms)
  Rendered layouts/_footer.html.erb (2.3ms)
Completed 200 OK in 735ms (Views: 706.3ms | ActiveRecord: 12.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-22 23:43:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (185.6ms)
  Rendered layouts/_headcontent.html.erb (2872.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (6.6ms)
  Rendered layouts/_settingnav.html.erb (106.3ms)
  Rendered layouts/_topnavbar.html.erb (8.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3407ms (Views: 3220.2ms | ActiveRecord: 42.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:43:30 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 20:43:30 UTC], ["updated_at", 2017-03-22 20:43:30 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 91ms (ActiveRecord: 33.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

PG::ForeignKeyViolation - ERROR:  insert or update on table "users_departments" violates foreign key constraint "fk_rails_cbafd1e5ff"
DETAIL:  Key (user_id)=(2) is not present in table "users".
:
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `block in exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:587:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_insert'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:124:in `insert'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:17:in `insert'
  activerecord (5.0.2) lib/active_record/relation.rb:65:in `insert'
  activerecord (5.0.2) lib/active_record/persistence.rb:560:in `_create_record'
  activerecord (5.0.2) lib/active_record/counter_cache.rb:128:in `_create_record'
  activerecord (5.0.2) lib/active_record/locking/optimistic.rb:75:in `_create_record'
  activerecord (5.0.2) lib/active_record/attribute_methods/dirty.rb:123:in `_create_record'
  activerecord (5.0.2) lib/active_record/callbacks.rb:302:in `block in _create_record'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_create_callbacks'
  activerecord (5.0.2) lib/active_record/callbacks.rb:302:in `_create_record'
  activerecord (5.0.2) lib/active_record/timestamp.rb:68:in `_create_record'
  activerecord (5.0.2) lib/active_record/persistence.rb:540:in `create_or_update'
  activerecord (5.0.2) lib/active_record/callbacks.rb:298:in `block in create_or_update'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_save_callbacks'
  activerecord (5.0.2) lib/active_record/callbacks.rb:298:in `create_or_update'
  activerecord (5.0.2) lib/active_record/persistence.rb:125:in `save'
  activerecord (5.0.2) lib/active_record/validations.rb:44:in `save'
  activerecord (5.0.2) lib/active_record/attribute_methods/dirty.rb:22:in `save'
  activerecord (5.0.2) lib/active_record/transactions.rb:319:in `block (2 levels) in save'
  activerecord (5.0.2) lib/active_record/transactions.rb:395:in `block in with_transaction_returning_status'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
  activerecord (5.0.2) lib/active_record/transactions.rb:211:in `transaction'
  activerecord (5.0.2) lib/active_record/transactions.rb:392:in `with_transaction_returning_status'
  activerecord (5.0.2) lib/active_record/transactions.rb:319:in `block in save'
  activerecord (5.0.2) lib/active_record/transactions.rb:334:in `rollback_active_record_state!'
  activerecord (5.0.2) lib/active_record/transactions.rb:318:in `save'
  activerecord (5.0.2) lib/active_record/suppressor.rb:41:in `save'
  app/controllers/users_controller.rb:54:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2de630ce5cdb6c21/variables" for 127.0.0.1 at 2017-03-22 23:43:30 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:50:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 679ms (ActiveRecord: 35.5ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f0d545d6480>:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c91bf24e126171d6/variables" for 127.0.0.1 at 2017-03-22 23:50:57 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:51:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 582ms (ActiveRecord: 40.4ms)



NameError - undefined local variable or method `new_departments' for #<UsersController:0x007f6dc05d2368>
Did you mean?  new_deparrtments
               new_department_url:
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/85fdfdb9057925e7/variables" for 127.0.0.1 at 2017-03-22 23:51:55 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:52:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 669ms (ActiveRecord: 29.2ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f4df85a6e58>:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/084f917da66de9cb/variables" for 127.0.0.1 at 2017-03-22 23:52:48 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:53:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 690ms (ActiveRecord: 40.0ms)



NameError - undefined local variable or method `d_id' for #<UsersController:0x007f9abc5a79f0>:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/210cc39840507a37/variables" for 127.0.0.1 at 2017-03-22 23:53:16 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:53:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 209ms (ActiveRecord: 20.9ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a339102a54bacf98/variables" for 127.0.0.1 at 2017-03-22 23:53:58 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-22 23:54:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+/4kmlUO35Oj97bIeTKj/8cZ8pH4cWRPdxlYd2ql8Nkd8Uc9mu2wk70sXcLpgDcdFhdyO4SjhH2+lcqEYEtHWg==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 288ms (ActiveRecord: 39.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-22 23:54:42 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (142.6ms)
  Rendered layouts/_headcontent.html.erb (2931.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (14.1ms)
  Rendered layouts/_settingnav.html.erb (55.1ms)
  Rendered layouts/_topnavbar.html.erb (10.2ms)
  Rendered layouts/_footer.html.erb (7.5ms)
Completed 200 OK in 3258ms (Views: 3185.9ms | ActiveRecord: 23.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:03:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (11.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (174.1ms)
  Rendered layouts/_headcontent.html.erb (2861.0ms)
  Rendered layouts/_layout_common_js.html.erb (1.2ms)
  Rendered layouts/_logoheader.html.erb (15.7ms)
  Rendered layouts/_settingnav.html.erb (56.2ms)
  Rendered layouts/_topnavbar.html.erb (7.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3358ms (Views: 3143.2ms | ActiveRecord: 50.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:04:04 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (125.0ms)
  Rendered layouts/_headcontent.html.erb (552.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (15.4ms)
  Rendered layouts/_settingnav.html.erb (52.3ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 815ms (Views: 755.0ms | ActiveRecord: 24.6ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:04:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+jMHfBI9crfk8UA+RI7aa7tzQe7wDIQVP+62g0/T/fAcPGTb3d4dt/oqqzTUPE6Jan3BRIzeZCf2YiRwRT1Kcw==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (9.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (8.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 59ms (ActiveRecord: 27.7ms)



NoMethodError - undefined method `id' for :"new department":Symbol:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/12fda151049e897e/variables" for 127.0.0.1 at 2017-03-23 00:04:12 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:06:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+jMHfBI9crfk8UA+RI7aa7tzQe7wDIQVP+62g0/T/fAcPGTb3d4dt/oqqzTUPE6Jan3BRIzeZCf2YiRwRT1Kcw==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (14.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 365ms (ActiveRecord: 37.5ms)



NoMethodError - undefined method `x' for #<UsersController:0x007f31505c6538>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/57b288a4ce79a587/variables" for 127.0.0.1 at 2017-03-23 00:06:19 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:06:53 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+jMHfBI9crfk8UA+RI7aa7tzQe7wDIQVP+62g0/T/fAcPGTb3d4dt/oqqzTUPE6Jan3BRIzeZCf2YiRwRT1Kcw==", "departments"=>{"new department"=>"1", "new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 272ms (ActiveRecord: 54.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:06:54 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (124.9ms)
  Rendered layouts/_headcontent.html.erb (2907.4ms)
  Rendered layouts/_layout_common_js.html.erb (8.3ms)
  Rendered layouts/_logoheader.html.erb (13.0ms)
  Rendered layouts/_settingnav.html.erb (66.6ms)
  Rendered layouts/_topnavbar.html.erb (21.3ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 3220ms (Views: 3158.4ms | ActiveRecord: 11.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:08:42 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (104.3ms)
  Rendered layouts/_headcontent.html.erb (569.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (4.8ms)
  Rendered layouts/_settingnav.html.erb (45.1ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 892ms (Views: 747.7ms | ActiveRecord: 21.8ms)


Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-23 00:09:21 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (70.9ms)
  Rendered layouts/_headcontent.html.erb (571.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.6ms)
  Rendered layouts/_settingnav.html.erb (46.0ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (5.2ms)
Completed 200 OK in 805ms (Views: 742.8ms | ActiveRecord: 15.6ms)


Started GET "/users/18/roles" for 127.0.0.1 at 2017-03-23 00:09:32 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/roles.html.erb within layouts/admin (5.7ms)
  Rendered layouts/_headcontent.html.erb (440.3ms)
  Rendered layouts/_layout_common_js.html.erb (4.8ms)
  Rendered layouts/_logoheader.html.erb (7.8ms)
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (6.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 550ms (Views: 531.3ms | ActiveRecord: 7.7ms)


Started PUT "/users/18/updateRoles" for 127.0.0.1 at 2017-03-23 00:09:37 +0300
Processing by UsersController#updateRoles as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7Ybq8bHFCvp7I27OnvRVTMt+FtQugq9G1n2icgO0iWoLiYlWfiZl+mX4hcQORsGuGnCWflJQT3Qf8TCBCVo+6Q==", "commit"=>"Save Changes", "id"=>"18"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 400 Bad Request in 20ms (ActiveRecord: 7.1ms)



ActionController::ParameterMissing - param is missing or the value is empty: roles:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:67:in `updateRoles'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d84956a0563e721a/variables" for 127.0.0.1 at 2017-03-23 00:09:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (73.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (36.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (16.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (14.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (15.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (16.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "admin"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "guest"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "clerk"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "roles" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "manager"], ["created_at", 2017-03-22 21:12:14 UTC], ["updated_at", 2017-03-22 21:12:14 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:21:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (175.5ms)
  Rendered layouts/_headcontent.html.erb (2991.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (33.1ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3495ms (Views: 3249.7ms | ActiveRecord: 42.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:21:16 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (133.5ms)
  Rendered layouts/_headcontent.html.erb (619.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (60.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 924ms (Views: 832.1ms | ActiveRecord: 35.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:21:22 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"n1BbGzJhYgA3j0m5S5gl9nuLq6dC6OdLyI1gE3s7pKl5Xzi8/YINAClUorPbKrEUqoUrDT46B3kBAfLgcdUTKg==", "departments"=>{"new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 60ms (ActiveRecord: 16.7ms)



NoMethodError - undefined method `name' for :"new department two":Symbol:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/fc3f403b924ba20c/variables" for 127.0.0.1 at 2017-03-23 00:21:22 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:22:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"n1BbGzJhYgA3j0m5S5gl9nuLq6dC6OdLyI1gE3s7pKl5Xzi8/YINAClUorPbKrEUqoUrDT46B3kBAfLgcdUTKg==", "departments"=>{"new department two"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 264ms (ActiveRecord: 23.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:22:03 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (17.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (170.6ms)
  Rendered layouts/_headcontent.html.erb (3243.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.5ms)
  Rendered layouts/_settingnav.html.erb (67.4ms)
  Rendered layouts/_topnavbar.html.erb (9.3ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 3639ms (Views: 3511.7ms | ActiveRecord: 46.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:24:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (228.7ms)
  Rendered layouts/_headcontent.html.erb (3454.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (24.0ms)
  Rendered layouts/_settingnav.html.erb (86.1ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 4063ms (Views: 3813.3ms | ActiveRecord: 31.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:24:34 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (98.1ms)
  Rendered layouts/_headcontent.html.erb (474.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.3ms)
  Rendered layouts/_settingnav.html.erb (52.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 698ms (Views: 635.2ms | ActiveRecord: 34.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:24:39 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"L5HflJcoVLqdUhRTASxElkC/o0DKPY9fCNpmNCpV03bJnrwzWMs7uoOJ/1mRntB0kbEj6rbvb23BVvTHILtk9Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 79ms (ActiveRecord: 16.3ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:24:39 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (85.9ms)
  Rendered layouts/_headcontent.html.erb (580.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (20.1ms)
  Rendered layouts/_settingnav.html.erb (40.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 779ms (Views: 748.3ms | ActiveRecord: 19.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:25:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (265.8ms)
  Rendered layouts/_headcontent.html.erb (3596.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (62.5ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 4277ms (Views: 3981.8ms | ActiveRecord: 35.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:25:38 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (11.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (120.9ms)
  Rendered layouts/_headcontent.html.erb (605.0ms)
  Rendered layouts/_layout_common_js.html.erb (8.6ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (60.2ms)
  Rendered layouts/_topnavbar.html.erb (12.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 921ms (Views: 846.1ms | ActiveRecord: 44.3ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:25:43 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MFRAzWqdZxB+N7uW7qvX3soYT9sDQak1t+ODw+nczanWWyNqpX4IEGDsUJx+GUM8GxbPcX+TSQd+bxEw4zJ6Kg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 64ms (ActiveRecord: 25.0ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/764ea0695a691116/variables" for 127.0.0.1 at 2017-03-23 00:25:44 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:26:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MFRAzWqdZxB+N7uW7qvX3soYT9sDQak1t+ODw+nczanWWyNqpX4IEGDsUJx+GUM8GxbPcX+TSQd+bxEw4zJ6Kg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 274ms (ActiveRecord: 31.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:26:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (157.6ms)
  Rendered layouts/_headcontent.html.erb (3054.7ms)
  Rendered layouts/_layout_common_js.html.erb (5.2ms)
  Rendered layouts/_logoheader.html.erb (17.5ms)
  Rendered layouts/_settingnav.html.erb (52.3ms)
  Rendered layouts/_topnavbar.html.erb (9.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3395ms (Views: 3324.2ms | ActiveRecord: 19.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:27:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (198.3ms)
  Rendered layouts/_headcontent.html.erb (2938.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (20.0ms)
  Rendered layouts/_settingnav.html.erb (64.1ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 3442ms (Views: 3234.8ms | ActiveRecord: 38.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:27:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (10.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (143.2ms)
  Rendered layouts/_headcontent.html.erb (594.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  Rendered layouts/_settingnav.html.erb (47.0ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (2.9ms)
Completed 200 OK in 866ms (Views: 791.1ms | ActiveRecord: 45.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:27:34 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+vsvskfwPnvsjSUy/utBjlG/9Y/2YgEKrlSgX527B4gc9EwViBNRe/JWzjhuWdVsgLF1JYqw4Thn2DKsl1WwCw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:34 UTC], ["updated_at", 2017-03-22 21:27:34 UTC]]
  [1m[35m (156.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (8.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (12.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:34 UTC], ["updated_at", 2017-03-22 21:27:34 UTC]]
  [1m[35m (42.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 311ms (ActiveRecord: 241.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:27:34 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (65.7ms)
  Rendered layouts/_headcontent.html.erb (535.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (18.6ms)
  Rendered layouts/_settingnav.html.erb (73.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 748ms (Views: 714.7ms | ActiveRecord: 10.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:27:39 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (11.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (66.9ms)
  Rendered layouts/_headcontent.html.erb (516.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (14.6ms)
  Rendered layouts/_settingnav.html.erb (45.1ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 719ms (Views: 679.6ms | ActiveRecord: 15.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:27:46 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XlNTktiQPbHrNf8zCvZNzb7Hlu3w7pJGiVtFqBjqaSq4XDA1F3NSsfXuFDmaRNkvb8kWR4w8cnRA19dbEgTeqQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (11, 12)[0m  [["user_id", 21]]
  [1m[35m (87.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:46 UTC], ["updated_at", 2017-03-22 21:27:46 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:27:46 UTC], ["updated_at", 2017-03-22 21:27:46 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 260ms (ActiveRecord: 115.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:27:47 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (58.0ms)
  Rendered layouts/_headcontent.html.erb (562.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (18.5ms)
  Rendered layouts/_settingnav.html.erb (39.1ms)
  Rendered layouts/_topnavbar.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 750ms (Views: 722.9ms | ActiveRecord: 16.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:27:51 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (27.1ms)
  Rendered layouts/_headcontent.html.erb (625.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 777ms (Views: 752.7ms | ActiveRecord: 12.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:28:29 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rOJxDmYL76AViNbYHzvD1ZBs4UNs6AX5TwpkWhjslTZK7RKpqeiAoAtTPdKPiVc3QWJh6RA65cuGhvapEgIitQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:28:29 UTC], ["updated_at", 2017-03-22 21:28:29 UTC]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:28:29 UTC], ["updated_at", 2017-03-22 21:28:29 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 90ms (ActiveRecord: 46.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:28:29 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (81.7ms)
  Rendered layouts/_headcontent.html.erb (576.4ms)
  Rendered layouts/_layout_common_js.html.erb (8.0ms)
  Rendered layouts/_logoheader.html.erb (16.2ms)
  Rendered layouts/_settingnav.html.erb (41.5ms)
  Rendered layouts/_topnavbar.html.erb (7.6ms)
  Rendered layouts/_footer.html.erb (11.4ms)
Completed 200 OK in 771ms (Views: 747.5ms | ActiveRecord: 10.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:29:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (220.0ms)
  Rendered layouts/_headcontent.html.erb (3351.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (54.1ms)
  Rendered layouts/_topnavbar.html.erb (2.7ms)
  Rendered layouts/_footer.html.erb (5.1ms)
Completed 200 OK in 3910ms (Views: 3665.4ms | ActiveRecord: 35.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:30:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (118.3ms)
  Rendered layouts/_headcontent.html.erb (484.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (16.8ms)
  Rendered layouts/_settingnav.html.erb (53.1ms)
  Rendered layouts/_topnavbar.html.erb (16.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 735ms (Views: 689.1ms | ActiveRecord: 19.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:30:25 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"agH922T4NEovRMjnkT/vGGX9+hFeD8yrZ+QGED/5NheMDp58qxtbSjGfI+0BjXv6tPN6uyLdLJmuaJTjNReBlA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (15, 16)[0m  [["user_id", 21]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 21], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:30:25 UTC], ["updated_at", 2017-03-22 21:30:25 UTC]]
  [1m[35m (22.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 144ms (ActiveRecord: 57.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:30:25 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (51.1ms)
  Rendered layouts/_headcontent.html.erb (403.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (12.7ms)
  Rendered layouts/_settingnav.html.erb (37.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 531ms (Views: 514.9ms | ActiveRecord: 5.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:31:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (132.7ms)
  Rendered layouts/_headcontent.html.erb (2348.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (19.8ms)
  Rendered layouts/_settingnav.html.erb (50.3ms)
  Rendered layouts/_topnavbar.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2744ms (Views: 2586.2ms | ActiveRecord: 17.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:31:10 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (131.1ms)
  Rendered layouts/_headcontent.html.erb (620.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (19.0ms)
  Rendered layouts/_settingnav.html.erb (64.5ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 898ms (Views: 827.5ms | ActiveRecord: 38.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:31:15 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wsd1gITX9CFNiCtrh205GpyQ5sIIf0AeTBlbNeL5+uokyBYnSzSbIVNTwGEX3634TZ5maHStoCyFlcnG6BdNaQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" = 17[0m  [["user_id", 21]]
  [1m[35m (41.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 531ms (ActiveRecord: 75.2ms)



NameError - undefined local variable or method `d_f' for #<UsersController:0x007f085c0756c8>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/82a8244b24dbf265/variables" for 127.0.0.1 at 2017-03-23 00:31:16 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:37:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wsd1gITX9CFNiCtrh205GpyQ5sIIf0AeTBlbNeL5+uokyBYnSzSbIVNTwGEX3634TZ5maHStoCyFlcnG6BdNaQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 547ms (ActiveRecord: 41.7ms)



NameError - undefined local variable or method `d_ft' for #<UsersController:0x007f3564773dc8>:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8de07d1809754cf1/variables" for 127.0.0.1 at 2017-03-23 00:37:41 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:38:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wsd1gITX9CFNiCtrh205GpyQ5sIIf0AeTBlbNeL5+uokyBYnSzSbIVNTwGEX3634TZ5maHStoCyFlcnG6BdNaQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:27 UTC], ["updated_at", 2017-03-22 21:38:27 UTC]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:27 UTC], ["updated_at", 2017-03-22 21:38:27 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 392ms (ActiveRecord: 59.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:38:27 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (12.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (147.8ms)
  Rendered layouts/_headcontent.html.erb (3082.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  Rendered layouts/_settingnav.html.erb (66.6ms)
  Rendered layouts/_topnavbar.html.erb (12.7ms)
  Rendered layouts/_footer.html.erb (3.7ms)
Completed 200 OK in 3436ms (Views: 3362.8ms | ActiveRecord: 27.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:38:37 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (155.9ms)
  Rendered layouts/_headcontent.html.erb (773.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  Rendered layouts/_settingnav.html.erb (38.1ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 1095ms (Views: 1006.5ms | ActiveRecord: 42.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:38:45 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"nBBbrWcOu5o5iHoH1PA8LiaHUNVlWZtZdzjysKERkkN6HzgKqO3UmidTkQ1EQqjM94nQfxmLe2u+tGBDq/8lwA==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (18, 19)[0m  [["user_id", 21]]
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (11.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:46 UTC], ["updated_at", 2017-03-22 21:38:46 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:38:46 UTC], ["updated_at", 2017-03-22 21:38:46 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 150ms (ActiveRecord: 54.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:38:46 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (71.8ms)
  Rendered layouts/_headcontent.html.erb (534.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (16.8ms)
  Rendered layouts/_settingnav.html.erb (41.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (19.8ms)
Completed 200 OK in 748ms (Views: 718.3ms | ActiveRecord: 11.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:38:50 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (13.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (13.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (48.3ms)
  Rendered layouts/_headcontent.html.erb (668.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (59.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 850ms (Views: 804.1ms | ActiveRecord: 35.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:39:07 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tvCSS2rZ4pu8aVkbup8E6hlR+Y2m/eE9ijwGPOz7HuJQ//HspTqNm6KyshEqLZAIyF95J9ovAQ9DsJTP5hWpYQ==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 37ms (ActiveRecord: 9.1ms)



ActionController::ParameterMissing - param is missing or the value is empty: departments:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:45:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6acbe6e8d5c45b6d/variables" for 127.0.0.1 at 2017-03-23 00:39:07 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 00:39:15 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tvCSS2rZ4pu8aVkbup8E6hlR+Y2m/eE9ijwGPOz7HuJQ//HspTqNm6KyshEqLZAIyF95J9ovAQ9DsJTP5hWpYQ==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (9.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.2ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (20, 21)[0m  [["user_id", 21]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-22 21:39:15 UTC], ["updated_at", 2017-03-22 21:39:15 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 113ms (ActiveRecord: 46.3ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 00:39:15 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (76.9ms)
  Rendered layouts/_headcontent.html.erb (607.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (10.8ms)
  Rendered layouts/_settingnav.html.erb (106.4ms)
  Rendered layouts/_topnavbar.html.erb (8.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 859ms (Views: 834.9ms | ActiveRecord: 17.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 00:39:19 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (13.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (58.8ms)
  Rendered layouts/_headcontent.html.erb (707.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (16.0ms)
  Rendered layouts/_settingnav.html.erb (113.0ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 964ms (Views: 922.8ms | ActiveRecord: 29.3ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-23 00:39:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"mQvZNePYlI3i7dpqa83KQKG7DVtvpa8Qr5w7aj4wgBB/BLqSLDv7jfw2MWD7f16icLWN8RN3TyJmEKmZNN43kw==", "locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 18], ["id", 18]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 53ms (ActiveRecord: 6.4ms)


Started GET "/en" for 127.0.0.1 at 2017-03-23 00:39:33 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-23 00:39:33 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (5.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (76.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 603ms (Views: 600.2ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-23 09:19:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (28.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"siZNLFwZHs4MAbxLCR/8nPdv8IeMai8kSokHv66WjvXGD35TYMWNr9GvHaBsfYZ+7uduyxYxEg+PZq+9Y4n4BA==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (72.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-23 06:19:27 UTC], ["last_sign_in_at", 2017-03-22 18:54:30 UTC], ["sign_in_count", 19], ["updated_at", 2017-03-23 06:19:27 UTC], ["modified_by", nil], ["id", 18]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 1024ms (ActiveRecord: 282.1ms)


Started GET "/en" for 127.0.0.1 at 2017-03-23 09:19:27 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (10.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_navigation.html.erb (27.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2921ms (Views: 2906.6ms | ActiveRecord: 3.0ms)


Started GET "/en" for 127.0.0.1 at 2017-03-23 09:39:47 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.6ms)
  Rendered layouts/_layout_common_js.html.erb (8.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_navigation.html.erb (20.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 421ms (Views: 410.6ms | ActiveRecord: 3.2ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 09:40:01 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.0ms)
  Rendered layouts/_headcontent.html.erb (369.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.3ms)
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 501ms (Views: 490.3ms | ActiveRecord: 1.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 09:40:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (36.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (188.2ms)
  Rendered layouts/_headcontent.html.erb (412.2ms)
  Rendered layouts/_layout_common_js.html.erb (5.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (35.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 684ms (Views: 614.6ms | ActiveRecord: 53.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 09:40:15 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (16.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (14.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (120.2ms)
  Rendered layouts/_headcontent.html.erb (404.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (31.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 650ms (Views: 545.2ms | ActiveRecord: 48.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:40:20 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" = 22[0m  [["user_id", 21]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 139ms (ActiveRecord: 34.4ms)



NoMethodError - undefined method `to_f' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/92336998e7e053b2/variables" for 127.0.0.1 at 2017-03-23 09:40:20 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:45:42 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 196ms (ActiveRecord: 22.8ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6766775bfd8137cc/variables" for 127.0.0.1 at 2017-03-23 09:45:43 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:51:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 189ms (ActiveRecord: 35.0ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/53035e1a17ed8809/variables" for 127.0.0.1 at 2017-03-23 09:51:21 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:55:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 198ms (ActiveRecord: 22.3ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:50:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/509f4267c295bb8d/variables" for 127.0.0.1 at 2017-03-23 09:55:45 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 09:58:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jkdyiYLJKXF4RUglptuw4rn2NEv55Pc6cYRxbziJB5+8DGG8vTvSU+LydPCoJh22HApFJ4KH+Mpet4SCsOoM2Q==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 190ms (ActiveRecord: 22.8ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/14f83eb0f1307207/variables" for 127.0.0.1 at 2017-03-23 09:58:55 +0300
Started GET "/" for 127.0.0.1 at 2017-03-23 10:01:21 +0300
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 11ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-23 10:01:21 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (79.4ms)
  Rendered layouts/_layout_common_js.html.erb (3.9ms)
  Rendered layouts/_topnavbar.html.erb (6.9ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 1952ms (Views: 1946.8ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-23 10:01:29 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"70vpwrj6ZOawtFt/gc1ky7xrYv0x+asYtcyQYcAWD4S3HN5E/ExA65eI6bz4wIMiWH9dOofPrHP/V7Mj+TJh1g==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", 2017-03-23 07:01:29 UTC], ["last_sign_in_at", 2017-03-23 06:19:27 UTC], ["sign_in_count", 20], ["updated_at", 2017-03-23 07:01:29 UTC], ["id", 18]]
  [1m[35m (649.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 1022ms (ActiveRecord: 656.6ms)


Started GET "/" for 127.0.0.1 at 2017-03-23 10:01:30 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (1.1ms)
  Rendered layouts/_layout_common_js.html.erb (6.0ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_navigation.html.erb (35.3ms)
  Rendered layouts/_topnavbar.html.erb (8.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 652ms (Views: 642.7ms | ActiveRecord: 2.0ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 10:01:39 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.0ms)
  Rendered layouts/_headcontent.html.erb (377.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.3ms)
  Rendered layouts/_settingnav.html.erb (38.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (4.4ms)
Completed 200 OK in 468ms (Views: 457.1ms | ActiveRecord: 2.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:01:45 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (124.4ms)
  Rendered layouts/_headcontent.html.erb (410.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (34.3ms)
  Rendered layouts/_topnavbar.html.erb (11.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 628ms (Views: 599.2ms | ActiveRecord: 23.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:01:49 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (75.4ms)
  Rendered layouts/_headcontent.html.erb (501.8ms)
  Rendered layouts/_layout_common_js.html.erb (1.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  Rendered layouts/_settingnav.html.erb (44.4ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (2.2ms)
Completed 200 OK in 681ms (Views: 643.2ms | ActiveRecord: 13.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:01:54 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 55ms (ActiveRecord: 9.3ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/121b793fe8e5415b/variables" for 127.0.0.1 at 2017-03-23 10:01:54 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:08:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 198ms (ActiveRecord: 27.5ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:53:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7a812fa5aa568115/variables" for 127.0.0.1 at 2017-03-23 10:08:02 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:09:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (12.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 194ms (ActiveRecord: 38.7ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:51:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/93fc2e87d9d3f226/variables" for 127.0.0.1 at 2017-03-23 10:09:02 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:10:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected '.', expecting '|'
    new_departments.each do |department.to_i|
                                        ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:136: syntax error, unexpected keyword_end, expecting end-of-input:
  app/controllers/users_controller.rb:49:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a6411e690223efd8/variables" for 127.0.0.1 at 2017-03-23 10:10:17 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:12:55 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OWxyMNun1OjEmc1hdSUXgy4t1Jw3sXP6Oh0kZY6weIfAU8PLRHncL7vTEqaKIS1ZO5/C8fGGsLzuf5dIUgcNSw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 178ms (ActiveRecord: 22.3ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a3c0ec7880bc4b5e/variables" for 127.0.0.1 at 2017-03-23 10:12:56 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:13:01 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (5.9ms)
Completed 500 Internal Server Error in 63ms (ActiveRecord: 5.9ms)



SyntaxError - syntax error, unexpected '<', expecting ']'
                </td>
                 ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:35: unknown regexp options - td
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:36: syntax error, unexpected '<'
              </tr>
               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:38: unknown regexp options - tbdy
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:39: syntax error, unexpected '<'
        </table>
         ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:43: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:48: syntax error, unexpected '<', expecting ')'
    </div>
     ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:49: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:50: syntax error, unexpected '<'
</div>
 ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:50: unterminated regexp meets end of file:
  app/views/users/departments.html.erb:34:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/085b186f9991ced1/variables" for 127.0.0.1 at 2017-03-23 10:13:02 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:13:44 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (9.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (75.3ms)
  Rendered layouts/_headcontent.html.erb (1830.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (151.9ms)
  Rendered layouts/_topnavbar.html.erb (9.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2120ms (Views: 2084.9ms | ActiveRecord: 18.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:13:56 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V0sxglexxbXU8ZjQPis8zz1yzNbju0eci4gdlrLTwCqudIB5yG/Ncqu7RxfBLwYVKMDauyWMhNpf6q67bmS15g==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 36ms (ActiveRecord: 8.6ms)



NoMethodError - undefined method `to_i' for :"1":Symbol
Did you mean?  to_s:
  app/controllers/users_controller.rb:52:in `block in updateDepartments'
  app/controllers/users_controller.rb:49:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/022d6a9dfaa9d543/variables" for 127.0.0.1 at 2017-03-23 10:13:56 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:17:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V0sxglexxbXU8ZjQPis8zz1yzNbju0eci4gdlrLTwCqudIB5yG/Ncqu7RxfBLwYVKMDauyWMhNpf6q67bmS15g==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (40.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:17:29 UTC], ["updated_at", 2017-03-23 07:17:29 UTC]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:17:29 UTC], ["updated_at", 2017-03-23 07:17:29 UTC]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 299ms (ActiveRecord: 77.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:17:29 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (123.6ms)
  Rendered layouts/_headcontent.html.erb (1955.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (50.5ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2197ms (Views: 2142.6ms | ActiveRecord: 32.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:17:36 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (76.3ms)
  Rendered layouts/_headcontent.html.erb (430.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 613ms (Views: 572.2ms | ActiveRecord: 19.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:17:41 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K87f+urfOD7ekX1eHtSDZ7qEmkIDcvGwmLWfaLvMU5TS8W4BdQEw+aHbopnh0Lm9rzaML8VFMvZM1yxFZ3smWA==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.3ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (23, 24)[0m  [["user_id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:17:41 UTC], ["updated_at", 2017-03-23 07:17:41 UTC]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 71ms (ActiveRecord: 32.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:17:41 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (48.7ms)
  Rendered layouts/_headcontent.html.erb (356.2ms)
  Rendered layouts/_layout_common_js.html.erb (1.9ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (29.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 493ms (Views: 470.1ms | ActiveRecord: 13.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:17:45 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (29.1ms)
  Rendered layouts/_headcontent.html.erb (442.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.2ms)
  Rendered layouts/_settingnav.html.erb (38.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 558ms (Views: 533.9ms | ActiveRecord: 12.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:20:05 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (30.9ms)
  Rendered layouts/_headcontent.html.erb (402.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (33.6ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 531ms (Views: 493.6ms | ActiveRecord: 18.2ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:20:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"K08CptmwO08I8vhYL14i3+FXXBWiX4AqjaUUOk48nu7ScLNdRm4ziHe4J5/QWhgF9OVKeGRoQ2xZx6cXkovrIg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:20:11 UTC], ["updated_at", 2017-03-23 07:20:11 UTC]]
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:20:11 UTC], ["updated_at", 2017-03-23 07:20:11 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 96ms (ActiveRecord: 55.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:20:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (40.7ms)
  Rendered layouts/_headcontent.html.erb (362.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (21.5ms)
  Rendered layouts/_settingnav.html.erb (73.7ms)
  Rendered layouts/_topnavbar.html.erb (4.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 524ms (Views: 503.1ms | ActiveRecord: 16.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:20:14 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (24.3ms)
  Rendered layouts/_headcontent.html.erb (403.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.6ms)
  Rendered layouts/_settingnav.html.erb (33.6ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 509ms (Views: 488.0ms | ActiveRecord: 12.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:20:21 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Of0SR5GbSiCn84ETtfFqc93RDT4IoqK/3hTv9H8JYpPAwqO8DkVC59i5XtRK9VCpyGMbU86VYfkKdlzZo74XXw==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "user_id" = NULL WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "users_departments"."id" IN (26, 27)[0m  [["user_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:20:21 UTC], ["updated_at", 2017-03-23 07:20:21 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 55ms (ActiveRecord: 12.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:20:21 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (44.7ms)
  Rendered layouts/_headcontent.html.erb (368.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_settingnav.html.erb (30.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 506ms (Views: 490.2ms | ActiveRecord: 10.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:25:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (161.5ms)
  Rendered layouts/_headcontent.html.erb (1990.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (46.5ms)
  Rendered layouts/_topnavbar.html.erb (3.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2394ms (Views: 2239.7ms | ActiveRecord: 32.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:25:29 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (102.6ms)
  Rendered layouts/_headcontent.html.erb (431.9ms)
  Rendered layouts/_layout_common_js.html.erb (6.0ms)
  Rendered layouts/_logoheader.html.erb (9.1ms)
  Rendered layouts/_settingnav.html.erb (39.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 648ms (Views: 602.6ms | ActiveRecord: 21.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:25:33 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dik0XFgwwRWrzTxfKaWljyKU8vOXUYtSsJwK1qHxGiCPFoWnx+7J0tSH45jWoZ9VNybknlFmSBRk/rn7fUZv7A==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (12.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 38ms (ActiveRecord: 16.9ms)



NoMethodError - undefined method `save' for #<Class:0x007f6772abbdb0>:
  activerecord (5.0.2) lib/active_record/dynamic_matchers.rb:21:in `method_missing'
  app/controllers/users_controller.rb:47:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/af69ca5ebf2d2950/variables" for 127.0.0.1 at 2017-03-23 10:25:34 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dik0XFgwwRWrzTxfKaWljyKU8vOXUYtSsJwK1qHxGiCPFoWnx+7J0tSH45jWoZ9VNybknlFmSBRk/rn7fUZv7A==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:27:13.017508', "updated_at" = '2017-03-23 07:27:13.017567' WHERE "users_departments"."id" = $1[0m  [["id", 18]]
  [1m[35m (44.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:27:13.068931', "updated_at" = '2017-03-23 07:27:13.068969' WHERE "users_departments"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:27:13.072789', "updated_at" = '2017-03-23 07:27:13.072828' WHERE "users_departments"."id" = $1[0m  [["id", 27]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:13 UTC], ["updated_at", 2017-03-23 07:27:13 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (7.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:13 UTC], ["updated_at", 2017-03-23 07:27:13 UTC]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 299ms (ActiveRecord: 97.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:13 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (146.9ms)
  Rendered layouts/_headcontent.html.erb (2065.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.9ms)
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2354ms (Views: 2293.0ms | ActiveRecord: 17.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (95.6ms)
  Rendered layouts/_headcontent.html.erb (454.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (8.7ms)
  Rendered layouts/_settingnav.html.erb (32.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 638ms (Views: 595.2ms | ActiveRecord: 16.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:24 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rZrWGfQvXl6Omej9/aX7F7Y6APWywneiunHVT5KoYUVUpWfia/FWmfHTNzoCocHNo4gWmHT1tORuE2ZiTh8UiQ==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:24 UTC], ["updated_at", 2017-03-23 07:27:24 UTC]]
  [1m[35m (80.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 121ms (ActiveRecord: 97.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:24 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (55.6ms)
  Rendered layouts/_headcontent.html.erb (424.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.0ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_settingnav.html.erb (30.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 569ms (Views: 542.6ms | ActiveRecord: 17.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (28.1ms)
  Rendered layouts/_headcontent.html.erb (506.5ms)
  Rendered layouts/_layout_common_js.html.erb (7.6ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_settingnav.html.erb (38.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 649ms (Views: 611.1ms | ActiveRecord: 17.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:33 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IvH+D/WAzUVL79oQp0toXNETEY64/Z413YJJH71WeqLbzk/0al7FgjSlBddYT1KGxKEH437KXXMJ4PoyYeEPbg==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:33 UTC], ["updated_at", 2017-03-23 07:27:33 UTC]]
  [1m[35m (34.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 67ms (ActiveRecord: 47.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:33 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (9.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (59.6ms)
  Rendered layouts/_headcontent.html.erb (485.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (5.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 639ms (Views: 601.7ms | ActiveRecord: 19.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:37 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (28.3ms)
  Rendered layouts/_headcontent.html.erb (393.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (60.5ms)
  Rendered layouts/_topnavbar.html.erb (4.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 545ms (Views: 524.7ms | ActiveRecord: 3.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:46 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XTh+9yBp7SZ1twSFU3EU1t4zziRvHZoIGXfh0jAkA0ikB88Mv7fl4Qr920KsdS4My4HYSakqWU7NFVL/7JN2hA==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 13ms (ActiveRecord: 5.9ms)



ActionController::ParameterMissing - param is missing or the value is empty: departments:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:45:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e34bea5cc40a18ba/variables" for 127.0.0.1 at 2017-03-23 10:27:46 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:27:52 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XTh+9yBp7SZ1twSFU3EU1t4zziRvHZoIGXfh0jAkA0ikB88Mv7fl4Qr920KsdS4My4HYSakqWU7NFVL/7JN2hA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" IS NULL[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:27:52 UTC], ["updated_at", 2017-03-23 07:27:52 UTC]]
  [1m[35m (46.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 77ms (ActiveRecord: 54.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:27:52 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (53.9ms)
  Rendered layouts/_headcontent.html.erb (365.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (39.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 490ms (Views: 474.6ms | ActiveRecord: 8.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:27:55 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (22.9ms)
  Rendered layouts/_headcontent.html.erb (467.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (30.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (1.6ms)
Completed 200 OK in 580ms (Views: 558.3ms | ActiveRecord: 12.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:29:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (147.3ms)
  Rendered layouts/_headcontent.html.erb (2048.3ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (77.7ms)
  Rendered layouts/_topnavbar.html.erb (10.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2471ms (Views: 2319.5ms | ActiveRecord: 22.1ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:29:18 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Tzuq9Q5QT4OLEwq/9BbhEQd2Y3rzL+ShscCkbtjhbSO2BBsOkY5HRPRZ1XgLEtvLEsR1FzUYJ+dlohdDBFYY7w==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.534726', "updated_at" = '2017-03-23 07:29:18.534803' WHERE "users_departments"."id" = $1[0m  [["id", 28]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.543922', "updated_at" = '2017-03-23 07:29:18.543988' WHERE "users_departments"."id" = $1[0m  [["id", 29]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.551105', "updated_at" = '2017-03-23 07:29:18.551141' WHERE "users_departments"."id" = $1[0m  [["id", 30]]
  [1m[35m (19.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.580289', "updated_at" = '2017-03-23 07:29:18.580347' WHERE "users_departments"."id" = $1[0m  [["id", 31]]
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.602858', "updated_at" = '2017-03-23 07:29:18.602898' WHERE "users_departments"."id" = $1[0m  [["id", 32]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:18.634448', "updated_at" = '2017-03-23 07:29:18.634507' WHERE "users_departments"."id" = $1[0m  [["id", 33]]
  [1m[35m (29.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:18 UTC], ["updated_at", 2017-03-23 07:29:18 UTC]]
  [1m[35m (22.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:18 UTC], ["updated_at", 2017-03-23 07:29:18 UTC]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 249ms (ActiveRecord: 189.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:29:18 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (93.8ms)
  Rendered layouts/_headcontent.html.erb (427.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (15.5ms)
  Rendered layouts/_settingnav.html.erb (35.3ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 609ms (Views: 571.5ms | ActiveRecord: 26.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:29:22 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (34.2ms)
  Rendered layouts/_headcontent.html.erb (376.2ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (29.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 487ms (Views: 456.1ms | ActiveRecord: 18.7ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:29:25 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KZ/8ur6NPMdD9v1qAHYr42kGrQwP2KltPg4YtbY5XOTQoE1BIVM0ADy8Iq3/chE5fLS7YcnvaivqbKuYao4pKA==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:25.971982', "updated_at" = '2017-03-23 07:29:25.972021' WHERE "users_departments"."id" = $1[0m  [["id", 34]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:25.979844', "updated_at" = '2017-03-23 07:29:25.979880' WHERE "users_departments"."id" = $1[0m  [["id", 35]]
  [1m[35m (37.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:26 UTC], ["updated_at", 2017-03-23 07:29:26 UTC]]
  [1m[35m (16.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 96ms (ActiveRecord: 67.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:29:26 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (88.9ms)
  Rendered layouts/_headcontent.html.erb (450.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (3.9ms)
  Rendered layouts/_settingnav.html.erb (40.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 621ms (Views: 592.5ms | ActiveRecord: 21.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:29:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (27.4ms)
  Rendered layouts/_headcontent.html.erb (408.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (41.7ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 533ms (Views: 509.8ms | ActiveRecord: 8.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:29:57 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2CsmV1uJdHJOuVySTztLLREu5fYwfChBu4jhmSYSdrQhFJesxFd8tTHzg1WwP3H3BJzzm/ZL6wdv6lK0+qUDeA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:29:57.087908', "updated_at" = '2017-03-23 07:29:57.087952' WHERE "users_departments"."id" = $1[0m  [["id", 36]]
  [1m[35m (34.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:29:57 UTC], ["updated_at", 2017-03-23 07:29:57 UTC]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 76ms (ActiveRecord: 46.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:29:57 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (39.6ms)
  Rendered layouts/_headcontent.html.erb (394.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_settingnav.html.erb (37.9ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 519ms (Views: 497.3ms | ActiveRecord: 9.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:30:00 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (7.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (34.6ms)
  Rendered layouts/_headcontent.html.erb (412.8ms)
  Rendered layouts/_layout_common_js.html.erb (11.7ms)
  Rendered layouts/_logoheader.html.erb (8.0ms)
  Rendered layouts/_settingnav.html.erb (39.4ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 542ms (Views: 512.0ms | ActiveRecord: 15.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:30:14 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"z0VZpeVU4aO0PEXh0YsjiMnAgcLwNWfCHOTrha1cyaM2euheeorpZMt2miYujxlS3HKXrzYCpITIhlioceu8bw==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:30:14.191322', "updated_at" = '2017-03-23 07:30:14.191368' WHERE "users_departments"."id" = $1[0m  [["id", 37]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:30:14 UTC], ["updated_at", 2017-03-23 07:30:14 UTC]]
  [1m[35m (20.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 58ms (ActiveRecord: 30.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:30:14 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (38.3ms)
  Rendered layouts/_headcontent.html.erb (399.5ms)
  Rendered layouts/_layout_common_js.html.erb (1.1ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (41.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 526ms (Views: 502.1ms | ActiveRecord: 11.0ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateRolesDepartments (20170323074334)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (272.8ms)[0m  [1m[35mCREATE TABLE "roles_departments" ("id" serial primary key, "roles_id" integer, "departments_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_f03ead7669"
FOREIGN KEY ("roles_id")
  REFERENCES "roles" ("id")
, CONSTRAINT "fk_rails_cc4da4e9c1"
FOREIGN KEY ("departments_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_roles_departments_on_roles_id" ON "roles_departments"  ("roles_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_roles_departments_on_departments_id" ON "roles_departments"  ("departments_id")[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170323074334"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (143.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:47:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (179.8ms)
  Rendered layouts/_headcontent.html.erb (2256.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_settingnav.html.erb (36.0ms)
  Rendered layouts/_topnavbar.html.erb (17.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2689ms (Views: 2522.6ms | ActiveRecord: 36.0ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 10:48:00 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (7.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (45.6ms)
  Rendered layouts/_layout_common_js.html.erb (8.5ms)
  Rendered layouts/_logoheader.html.erb (7.1ms)
  Rendered layouts/_navigation.html.erb (21.3ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 611ms (Views: 569.7ms | ActiveRecord: 25.0ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 10:48:05 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.8ms)
  Rendered layouts/_headcontent.html.erb (457.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (33.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 563ms (Views: 545.2ms | ActiveRecord: 9.0ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 10:48:10 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (5.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.6ms)
  Rendered layouts/_navigation.html.erb (19.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (1.9ms)
Completed 200 OK in 538ms (Views: 524.4ms | ActiveRecord: 5.1ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 10:48:19 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.9ms)
  Rendered layouts/_headcontent.html.erb (476.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.6ms)
  Rendered layouts/_settingnav.html.erb (39.9ms)
  Rendered layouts/_topnavbar.html.erb (7.5ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 576ms (Views: 567.0ms | ActiveRecord: 2.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:48:24 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (46.3ms)
  Rendered layouts/_headcontent.html.erb (442.4ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  Rendered layouts/_settingnav.html.erb (32.5ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 575ms (Views: 548.6ms | ActiveRecord: 16.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 10:48:28 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/application
  [1m[36mDepartment Load (4.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/application (8.5ms)
  Rendered layouts/_layout_common_js.html.erb (14.8ms)
  Rendered layouts/_logoheader.html.erb (9.0ms)
  Rendered layouts/_navigation.html.erb (33.0ms)
  Rendered layouts/_topnavbar.html.erb (3.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 648ms (Views: 633.8ms | ActiveRecord: 9.1ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 10:50:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (38.3ms)
  Rendered layouts/_headcontent.html.erb (2205.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.2ms)
  Rendered layouts/_settingnav.html.erb (34.5ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2483ms (Views: 2337.0ms | ActiveRecord: 24.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:50:23 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (6.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (161.2ms)
  Rendered layouts/_headcontent.html.erb (454.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.2ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  Rendered layouts/_settingnav.html.erb (39.9ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 694ms (Views: 650.5ms | ActiveRecord: 29.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:50:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (71.1ms)
  Rendered layouts/_headcontent.html.erb (424.3ms)
  Rendered layouts/_layout_common_js.html.erb (3.1ms)
  Rendered layouts/_logoheader.html.erb (9.7ms)
  Rendered layouts/_settingnav.html.erb (47.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 597ms (Views: 571.9ms | ActiveRecord: 12.6ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 10:50:49 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fOVqD8p1SFXNeb7TFCijBKWnP4xsmei+Cd94pEwC/NGF2tv0VatAkrIzYRTrLJnesBUp4aquK/jdvcuJkLWJHQ==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 07:50:50.030501', "updated_at" = '2017-03-23 07:50:50.030572' WHERE "users_departments"."id" = $1[0m  [["id", 38]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 07:50:50 UTC], ["updated_at", 2017-03-23 07:50:50 UTC]]
  [1m[35m (38.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 105ms (ActiveRecord: 59.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:50:50 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (42.1ms)
  Rendered layouts/_headcontent.html.erb (482.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.4ms)
  Rendered layouts/_settingnav.html.erb (48.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 629ms (Views: 597.7ms | ActiveRecord: 21.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 10:50:54 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (24.9ms)
  Rendered layouts/_headcontent.html.erb (444.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.5ms)
  Rendered layouts/_settingnav.html.erb (33.0ms)
  Rendered layouts/_topnavbar.html.erb (7.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 573ms (Views: 545.4ms | ActiveRecord: 10.5ms)


Started GET "/" for 127.0.0.1 at 2017-03-23 10:52:01 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.8ms)
  Rendered layouts/_navigation.html.erb (54.1ms)
  Rendered layouts/_topnavbar.html.erb (6.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 522ms (Views: 507.7ms | ActiveRecord: 0.5ms)


Started GET "/en/rations" for 127.0.0.1 at 2017-03-23 10:52:08 +0300
Processing by RationsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/index.html.erb within layouts/application
  [1m[36mRation Load (56.0ms)[0m  [1m[34mSELECT "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL[0m
  Rendered rations/index.html.erb within layouts/application (84.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.7ms)
  Rendered layouts/_navigation.html.erb (32.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 627ms (Views: 542.6ms | ActiveRecord: 63.5ms)


Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 10:52:15 +0300
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (49.4ms)
  Rendered rations/new.html.erb within layouts/application (54.4ms)
  Rendered layouts/_layout_common_js.html.erb (13.7ms)
  Rendered layouts/_logoheader.html.erb (11.0ms)
  Rendered layouts/_navigation.html.erb (36.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 589ms (Views: 573.2ms | ActiveRecord: 3.7ms)


Started POST "/en/rations" for 127.0.0.1 at 2017-03-23 10:52:32 +0300
Processing by RationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"P6h7tZLAQ91igRRWVyIIvDdcNDAArQI6yAKAYNscz1vGl8pODR5LGh3Ly5GoJjJmIu4iXcaawXwcYDNNB6u6lw==", "ration"=>{"reference_no"=>"sample ration", "description"=>"", "current"=>"0"}, "commit"=>"Create Ration", "locale"=>"en"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Unpermitted parameter: current
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (96.8ms)[0m  [1m[32mINSERT INTO "rations" ("reference_no", "description", "created_at", "updated_at", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["reference_no", "sample ration"], ["description", ""], ["created_at", 2017-03-23 07:52:32 UTC], ["updated_at", 2017-03-23 07:52:32 UTC], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (25.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/rations/2
Completed 302 Found in 146ms (ActiveRecord: 130.9ms)


Started GET "/en/rations/2" for 127.0.0.1 at 2017-03-23 10:52:32 +0300
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (1.2ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  [1m[35m (84.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "ration_items" WHERE "ration_items"."deleted_at" IS NULL AND "ration_items"."ration_id" = $1[0m  [["ration_id", 2]]
  Rendered rations/_ration_view.html.erb (121.4ms)
  Rendered rations/show.html.erb within layouts/application (123.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_navigation.html.erb (17.7ms)
  Rendered layouts/_topnavbar.html.erb (2.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 698ms (Views: 591.6ms | ActiveRecord: 90.1ms)


Started GET "/en/ration_items/new?ration_id=2" for 127.0.0.1 at 2017-03-23 10:52:45 +0300
Processing by RationItemsController#new as HTML
  Parameters: {"ration_id"=>"2", "locale"=>"en"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (0.7ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering ration_items/new.html.erb within layouts/application
  [1m[36mCommodity Load (34.9ms)[0m  [1m[34mSELECT "commodities".* FROM "commodities" WHERE "commodities"."deleted_at" IS NULL ORDER BY "commodities"."name" ASC[0m
  [1m[36mUnitOfMeasure Load (7.0ms)[0m  [1m[34mSELECT "unit_of_measures".* FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL ORDER BY "unit_of_measures"."name" ASC[0m
  [1m[36mRation Load (0.9ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered ration_items/_form.html.erb (236.8ms)
  Rendered ration_items/new.html.erb within layouts/application (244.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  Rendered layouts/_navigation.html.erb (23.8ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 813ms (Views: 716.5ms | ActiveRecord: 65.5ms)


Started GET "/en/rations/2" for 127.0.0.1 at 2017-03-23 10:52:54 +0300
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (2.7ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "ration_items" WHERE "ration_items"."deleted_at" IS NULL AND "ration_items"."ration_id" = $1[0m  [["ration_id", 2]]
  Rendered rations/_ration_view.html.erb (27.7ms)
  Rendered rations/show.html.erb within layouts/application (38.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (11.1ms)
  Rendered layouts/_navigation.html.erb (35.2ms)
  Rendered layouts/_topnavbar.html.erb (5.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 564ms (Views: 540.4ms | ActiveRecord: 12.1ms)


Started GET "/en/rations/2/edit" for 127.0.0.1 at 2017-03-23 10:53:22 +0300
Processing by RationsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (2.7ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering rations/edit.html.erb within layouts/application
  Rendered rations/_form.html.erb (7.9ms)
  Rendered rations/edit.html.erb within layouts/application (12.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (13.3ms)
  Rendered layouts/_navigation.html.erb (26.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (2.3ms)
Completed 200 OK in 566ms (Views: 549.4ms | ActiveRecord: 3.3ms)


Started PATCH "/en/rations/2" for 127.0.0.1 at 2017-03-23 10:53:28 +0300
Processing by RationsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xbX4ypca80fPMY83qDsxtyFpUJmV3bDBff2Ef/5TAxg8ikkxCMT7gLB7UPBXPwttNNtG9FPqc4epnzdSIuR21A==", "ration"=>{"reference_no"=>"sample ration", "description"=>"", "current"=>"0"}, "commit"=>"Update Ration", "locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (0.5ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Unpermitted parameter: current
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/rations/2
Completed 302 Found in 25ms (ActiveRecord: 6.4ms)


Started GET "/en/rations/2" for 127.0.0.1 at 2017-03-23 10:53:28 +0300
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (3.3ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "ration_items" WHERE "ration_items"."deleted_at" IS NULL AND "ration_items"."ration_id" = $1[0m  [["ration_id", 2]]
  Rendered rations/_ration_view.html.erb (18.2ms)
  Rendered rations/show.html.erb within layouts/application (24.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.2ms)
  Rendered layouts/_navigation.html.erb (32.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 540ms (Views: 523.6ms | ActiveRecord: 8.1ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 10:53:48 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (4.9ms)
  Rendered layouts/_headcontent.html.erb (413.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.3ms)
  Rendered layouts/_settingnav.html.erb (35.0ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 503ms (Views: 496.5ms | ActiveRecord: 0.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 10:53:53 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (50.4ms)
  Rendered layouts/_headcontent.html.erb (457.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (14.2ms)
  Rendered layouts/_settingnav.html.erb (43.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 594ms (Views: 580.3ms | ActiveRecord: 8.0ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 11:16:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (11.6ms)
  Rendered layouts/_headcontent.html.erb (2297.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  Rendered layouts/_settingnav.html.erb (55.2ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (2.4ms)
Completed 200 OK in 2566ms (Views: 2417.0ms | ActiveRecord: 20.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 11:16:30 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (169.9ms)
  Rendered layouts/_headcontent.html.erb (501.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (36.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 764ms (Views: 725.9ms | ActiveRecord: 31.0ms)


Started GET "/en/users/new" for 127.0.0.1 at 2017-03-23 11:16:37 +0300
Processing by UsersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 33ms (ActiveRecord: 3.4ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:24:in `new'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/261bc688d39666ea/variables" for 127.0.0.1 at 2017-03-23 11:16:37 +0300
Started GET "/en/users/new" for 127.0.0.1 at 2017-03-23 11:17:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 158ms (ActiveRecord: 15.2ms)



NameError - uninitialized constant UsersController::CaseTeam:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:25:in `new'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/261794a295dcad60/variables" for 127.0.0.1 at 2017-03-23 11:17:29 +0300
Started GET "/en/users/new" for 127.0.0.1 at 2017-03-23 11:18:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/admin
  Rendered users/_form.html.erb (78.8ms)
  Rendered users/new.html.erb within layouts/admin (92.6ms)
Completed 500 Internal Server Error in 253ms (ActiveRecord: 21.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `hubUser' for #<User:0x007fe7e83abc40>
Did you mean?  hub_user
               hub_user?
               hub_user=:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:35:in `value'
  actionview (5.0.2) lib/action_view/helpers/tags/checkable.rb:10:in `input_checked?'
  actionview (5.0.2) lib/action_view/helpers/tags/check_box.rb:19:in `render'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:952:in `check_box'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:1699:in `check_box'
  app/views/users/_form.html.erb:41:in `block in _app_views_users__form_html_erb___2945393648216083266_70317004954080'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb___2945393648216083266_70317004954080'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/new.html.erb:20:in `_app_views_users_new_html_erb__2951864392029114515_47118443297280'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8ffb8705675249ce/variables" for 127.0.0.1 at 2017-03-23 11:18:03 +0300
Started GET "/en/users/new" for 127.0.0.1 at 2017-03-23 11:23:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/admin
  Rendered users/_form.html.erb (70.6ms)
  Rendered users/new.html.erb within layouts/admin (84.4ms)
Completed 500 Internal Server Error in 245ms (ActiveRecord: 23.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `hubUser' for #<User:0x007f0ff03af9b0>
Did you mean?  hub_user
               hub_user?
               hub_user=:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:35:in `value'
  actionview (5.0.2) lib/action_view/helpers/tags/checkable.rb:10:in `input_checked?'
  actionview (5.0.2) lib/action_view/helpers/tags/check_box.rb:19:in `render'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:952:in `check_box'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:1699:in `check_box'
  app/views/users/_form.html.erb:41:in `block in _app_views_users__form_html_erb___1354464864937297299_69853215602980'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb___1354464864937297299_69853215602980'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/new.html.erb:20:in `_app_views_users_new_html_erb__4402636624641457100_46967648753860'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1d8db3acf96af207/variables" for 127.0.0.1 at 2017-03-23 11:23:52 +0300
Started GET "/en/users/new" for 127.0.0.1 at 2017-03-23 11:25:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/admin
  Rendered users/_form.html.erb (95.8ms)
  Rendered users/new.html.erb within layouts/admin (116.4ms)
Completed 500 Internal Server Error in 276ms (ActiveRecord: 11.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `regionalUser' for #<User:0x007f0628406188>
Did you mean?  regional_user
               regional_user?
               regional_user=:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:35:in `value'
  actionview (5.0.2) lib/action_view/helpers/tags/checkable.rb:10:in `input_checked?'
  actionview (5.0.2) lib/action_view/helpers/tags/check_box.rb:19:in `render'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:952:in `check_box'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:1699:in `check_box'
  app/views/users/_form.html.erb:43:in `block in _app_views_users__form_html_erb__4057298456803213267_69832210705580'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb__4057298456803213267_69832210705580'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/new.html.erb:20:in `_app_views_users_new_html_erb___923964653027514447_69832013040860'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5b2bc448f332edee/variables" for 127.0.0.1 at 2017-03-23 11:25:42 +0300
Started GET "/en/users/new" for 127.0.0.1 at 2017-03-23 11:26:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/admin
  Rendered users/_form.html.erb (45.7ms)
  Rendered users/new.html.erb within layouts/admin (61.8ms)
Completed 500 Internal Server Error in 220ms (ActiveRecord: 12.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `map' for nil:NilClass
Did you mean?  tap:
  actionview (5.0.2) lib/action_view/helpers/form_options_helper.rb:358:in `options_for_select'
  app/views/users/_form.html.erb:44:in `block in _app_views_users__form_html_erb___2560163792923480319_70211308546940'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb___2560163792923480319_70211308546940'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/new.html.erb:20:in `_app_views_users_new_html_erb___353339255000666857_70211077450600'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5bb71af2492caf39/variables" for 127.0.0.1 at 2017-03-23 11:26:57 +0300
Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-23 11:50:45 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (144.0ms)
  Rendered layouts/_headcontent.html.erb (1951.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_settingnav.html.erb (71.2ms)
  Rendered layouts/_topnavbar.html.erb (3.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2345ms (Views: 2183.5ms | ActiveRecord: 30.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 11:59:49 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (151.2ms)
  Rendered layouts/_headcontent.html.erb (622.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (3.1ms)
  Rendered layouts/_settingnav.html.erb (25.8ms)
  Rendered layouts/_topnavbar.html.erb (6.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 880ms (Views: 813.1ms | ActiveRecord: 27.1ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 12:00:02 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (21.9ms)
  Rendered layouts/_headcontent.html.erb (416.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.6ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_settingnav.html.erb (30.6ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 513ms (Views: 494.9ms | ActiveRecord: 9.9ms)


Started GET "/users/18/departments" for 127.0.0.1 at 2017-03-23 12:00:07 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (22.1ms)
  Rendered layouts/_headcontent.html.erb (411.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.6ms)
  Rendered layouts/_settingnav.html.erb (35.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 648ms (Views: 628.1ms | ActiveRecord: 11.3ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 12:01:35 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (22.9ms)
  Rendered layouts/_headcontent.html.erb (509.4ms)
  Rendered layouts/_layout_common_js.html.erb (2.6ms)
  Rendered layouts/_logoheader.html.erb (4.3ms)
  Rendered layouts/_settingnav.html.erb (37.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 616ms (Views: 598.2ms | ActiveRecord: 4.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 12:01:41 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (29.1ms)
  Rendered layouts/_headcontent.html.erb (435.8ms)
  Rendered layouts/_layout_common_js.html.erb (2.2ms)
  Rendered layouts/_logoheader.html.erb (8.8ms)
  Rendered layouts/_settingnav.html.erb (35.6ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 560ms (Views: 532.8ms | ActiveRecord: 13.5ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-23 12:01:49 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (34.8ms)
  Rendered layouts/_headcontent.html.erb (427.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (8.0ms)
  Rendered layouts/_settingnav.html.erb (34.4ms)
  Rendered layouts/_topnavbar.html.erb (6.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 548ms (Views: 526.1ms | ActiveRecord: 7.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 12:02:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (31.6ms)
  Rendered layouts/_headcontent.html.erb (479.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.2ms)
  Rendered layouts/_settingnav.html.erb (40.0ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 599ms (Views: 576.0ms | ActiveRecord: 15.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 14:42:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (133.7ms)
  Rendered layouts/_headcontent.html.erb (2367.5ms)
  Rendered layouts/_layout_common_js.html.erb (2.5ms)
  Rendered layouts/_logoheader.html.erb (7.6ms)
  Rendered layouts/_settingnav.html.erb (40.8ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2760ms (Views: 2563.1ms | ActiveRecord: 43.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 14:42:59 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (11.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (114.4ms)
  Rendered layouts/_headcontent.html.erb (515.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.8ms)
  Rendered layouts/_logoheader.html.erb (6.2ms)
  Rendered layouts/_settingnav.html.erb (31.9ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (2.0ms)
Completed 200 OK in 721ms (Views: 662.9ms | ActiveRecord: 37.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 14:46:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (129.7ms)
  Rendered layouts/_headcontent.html.erb (2294.4ms)
  Rendered layouts/_layout_common_js.html.erb (6.7ms)
  Rendered layouts/_logoheader.html.erb (8.5ms)
  Rendered layouts/_settingnav.html.erb (91.8ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2694ms (Views: 2554.7ms | ActiveRecord: 26.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 14:48:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (1.7ms)
Completed 500 Internal Server Error in 145ms (ActiveRecord: 13.3ms)



SyntaxError - syntax error, unexpected ':', expecting ')'
..._buffer.append=( f.label :user:  );@output_buffer.safe_appen...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:64: syntax error, unexpected keyword_ensure, expecting ')'
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:66: syntax error, unexpected keyword_end, expecting ')':
  app/views/users/departments.html.erb:23:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/5b39bea1e16f3ab0/variables" for 127.0.0.1 at 2017-03-23 14:48:08 +0300
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 14:53:43 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (139.9ms)
  Rendered layouts/_headcontent.html.erb (2339.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.6ms)
  Rendered layouts/_settingnav.html.erb (79.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2740ms (Views: 2585.0ms | ActiveRecord: 36.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 14:58:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (132.7ms)
  Rendered layouts/_headcontent.html.erb (2229.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (14.6ms)
  Rendered layouts/_settingnav.html.erb (70.5ms)
  Rendered layouts/_topnavbar.html.erb (6.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2636ms (Views: 2476.0ms | ActiveRecord: 28.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:00:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (157.5ms)
  Rendered layouts/_headcontent.html.erb (2320.9ms)
  Rendered layouts/_layout_common_js.html.erb (2.1ms)
  Rendered layouts/_logoheader.html.erb (4.9ms)
  Rendered layouts/_settingnav.html.erb (83.9ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2752ms (Views: 2582.1ms | ActiveRecord: 52.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:00:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (142.1ms)
  Rendered layouts/_headcontent.html.erb (2296.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.9ms)
  Rendered layouts/_settingnav.html.erb (81.1ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2709ms (Views: 2546.0ms | ActiveRecord: 39.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:04:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (132.6ms)
  Rendered layouts/_headcontent.html.erb (2224.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (11.1ms)
  Rendered layouts/_settingnav.html.erb (72.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2625ms (Views: 2470.9ms | ActiveRecord: 37.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:09:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (160.5ms)
  Rendered layouts/_headcontent.html.erb (2486.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.9ms)
  Rendered layouts/_settingnav.html.erb (73.7ms)
  Rendered layouts/_topnavbar.html.erb (2.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2937ms (Views: 2766.1ms | ActiveRecord: 27.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:19:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (135.2ms)
  Rendered layouts/_headcontent.html.erb (2226.0ms)
  Rendered layouts/_layout_common_js.html.erb (2.8ms)
  Rendered layouts/_logoheader.html.erb (10.2ms)
  Rendered layouts/_settingnav.html.erb (80.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2631ms (Views: 2479.0ms | ActiveRecord: 21.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:21:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (129.0ms)
  Rendered layouts/_headcontent.html.erb (2212.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (3.5ms)
  Rendered layouts/_settingnav.html.erb (72.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (4.6ms)
Completed 200 OK in 2604ms (Views: 2450.4ms | ActiveRecord: 27.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:22:45 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (124.1ms)
  Rendered layouts/_headcontent.html.erb (2177.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.5ms)
  Rendered layouts/_settingnav.html.erb (71.1ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2569ms (Views: 2413.4ms | ActiveRecord: 26.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:25:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (132.1ms)
  Rendered layouts/_headcontent.html.erb (2205.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (14.0ms)
  Rendered layouts/_settingnav.html.erb (79.6ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2586ms (Views: 2438.4ms | ActiveRecord: 36.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:29:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (160.7ms)
  Rendered layouts/_headcontent.html.erb (2251.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.9ms)
  Rendered layouts/_settingnav.html.erb (70.2ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (1.9ms)
Completed 200 OK in 2682ms (Views: 2529.5ms | ActiveRecord: 24.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:30:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (145.9ms)
  Rendered layouts/_headcontent.html.erb (2320.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (3.7ms)
  Rendered layouts/_settingnav.html.erb (74.1ms)
  Rendered layouts/_topnavbar.html.erb (3.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2743ms (Views: 2574.5ms | ActiveRecord: 41.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:30:49 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (138.0ms)
  Rendered layouts/_headcontent.html.erb (2220.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (7.3ms)
  Rendered layouts/_settingnav.html.erb (80.5ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2626ms (Views: 2466.7ms | ActiveRecord: 32.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:32:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (127.3ms)
  Rendered layouts/_headcontent.html.erb (2337.0ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (14.5ms)
  Rendered layouts/_settingnav.html.erb (78.0ms)
  Rendered layouts/_topnavbar.html.erb (7.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2740ms (Views: 2572.1ms | ActiveRecord: 35.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:33:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (132.8ms)
  Rendered layouts/_headcontent.html.erb (2320.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (68.1ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2740ms (Views: 2572.9ms | ActiveRecord: 29.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:34:04 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (7.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (150.2ms)
  Rendered layouts/_headcontent.html.erb (2545.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (15.6ms)
  Rendered layouts/_settingnav.html.erb (82.3ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2965ms (Views: 2799.7ms | ActiveRecord: 51.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:35:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (9.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (147.8ms)
  Rendered layouts/_headcontent.html.erb (2293.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (4.1ms)
  Rendered layouts/_settingnav.html.erb (79.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (1.7ms)
Completed 200 OK in 2697ms (Views: 2548.8ms | ActiveRecord: 29.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:35:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (129.0ms)
  Rendered layouts/_headcontent.html.erb (2347.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (15.6ms)
  Rendered layouts/_settingnav.html.erb (72.9ms)
  Rendered layouts/_topnavbar.html.erb (5.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2754ms (Views: 2572.2ms | ActiveRecord: 31.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:36:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (136.7ms)
  Rendered layouts/_headcontent.html.erb (2356.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.7ms)
  Rendered layouts/_settingnav.html.erb (81.7ms)
  Rendered layouts/_topnavbar.html.erb (5.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2770ms (Views: 2611.1ms | ActiveRecord: 27.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:36:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (167.9ms)
  Rendered layouts/_headcontent.html.erb (2443.4ms)
  Rendered layouts/_layout_common_js.html.erb (2.6ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  Rendered layouts/_settingnav.html.erb (90.2ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2888ms (Views: 2733.5ms | ActiveRecord: 30.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:47:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (24.0ms)
Completed 500 Internal Server Error in 176ms (ActiveRecord: 14.1ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `active' for nil:NilClass
Did you mean?  acts_like?:
  app/views/users/departments.html.erb:21:in `_app_views_users_departments_html_erb__899215396048612469_70348314536020'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/840e4ae0000786fb/variables" for 127.0.0.1 at 2017-03-23 15:47:57 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:48:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (44.0ms)
Completed 500 Internal Server Error in 206ms (ActiveRecord: 14.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `active' for #<User:0x007ff564426ba0>
Did you mean?  acts_like?:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/departments.html.erb:21:in `_app_views_users_departments_html_erb___4494711031839922786_70345962813980'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/17a698caf79b4b13/variables" for 127.0.0.1 at 2017-03-23 15:48:21 +0300
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:49:33 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (146.2ms)
  Rendered layouts/_headcontent.html.erb (2256.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  Rendered layouts/_settingnav.html.erb (73.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2674ms (Views: 2508.0ms | ActiveRecord: 28.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:52:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (135.2ms)
  Rendered layouts/_headcontent.html.erb (2183.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_settingnav.html.erb (73.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2582ms (Views: 2433.5ms | ActiveRecord: 40.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:53:45 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (155.7ms)
  Rendered layouts/_headcontent.html.erb (2332.3ms)
  Rendered layouts/_layout_common_js.html.erb (3.7ms)
  Rendered layouts/_logoheader.html.erb (17.7ms)
  Rendered layouts/_settingnav.html.erb (74.0ms)
  Rendered layouts/_topnavbar.html.erb (4.3ms)
  Rendered layouts/_footer.html.erb (5.0ms)
Completed 200 OK in 2771ms (Views: 2610.0ms | ActiveRecord: 31.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:58:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (156.5ms)
  Rendered layouts/_headcontent.html.erb (2345.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (20.9ms)
  Rendered layouts/_settingnav.html.erb (76.1ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2759ms (Views: 2599.9ms | ActiveRecord: 37.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 15:59:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (148.0ms)
  Rendered layouts/_headcontent.html.erb (2359.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.9ms)
  Rendered layouts/_settingnav.html.erb (74.4ms)
  Rendered layouts/_topnavbar.html.erb (13.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2786ms (Views: 2619.0ms | ActiveRecord: 38.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:01:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (140.0ms)
  Rendered layouts/_headcontent.html.erb (2420.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (70.1ms)
  Rendered layouts/_topnavbar.html.erb (10.5ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2842ms (Views: 2683.8ms | ActiveRecord: 35.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:01:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (164.2ms)
  Rendered layouts/_headcontent.html.erb (2228.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.8ms)
  Rendered layouts/_settingnav.html.erb (75.2ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2687ms (Views: 2509.1ms | ActiveRecord: 38.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:02:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (168.6ms)
  Rendered layouts/_headcontent.html.erb (2243.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (17.1ms)
  Rendered layouts/_settingnav.html.erb (84.4ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2694ms (Views: 2516.4ms | ActiveRecord: 47.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:05:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (147.6ms)
  Rendered layouts/_headcontent.html.erb (2356.4ms)
  Rendered layouts/_layout_common_js.html.erb (2.5ms)
  Rendered layouts/_logoheader.html.erb (13.5ms)
  Rendered layouts/_settingnav.html.erb (71.9ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2815ms (Views: 2608.1ms | ActiveRecord: 42.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:08:23 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (34.0ms)
  Rendered layouts/_headcontent.html.erb (517.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_settingnav.html.erb (48.7ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 658ms (Views: 621.4ms | ActiveRecord: 12.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:09:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (9.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (147.7ms)
  Rendered layouts/_headcontent.html.erb (2362.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.1ms)
  Rendered layouts/_settingnav.html.erb (84.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2783ms (Views: 2616.7ms | ActiveRecord: 46.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:12:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (7.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (147.1ms)
  Rendered layouts/_headcontent.html.erb (2553.9ms)
  Rendered layouts/_layout_common_js.html.erb (5.6ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  Rendered layouts/_settingnav.html.erb (86.1ms)
  Rendered layouts/_topnavbar.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2986ms (Views: 2831.1ms | ActiveRecord: 24.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:13:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (10.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (182.6ms)
  Rendered layouts/_headcontent.html.erb (2591.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_settingnav.html.erb (85.3ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3067ms (Views: 2875.4ms | ActiveRecord: 49.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:14:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (166.9ms)
  Rendered layouts/_headcontent.html.erb (2510.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (12.3ms)
  Rendered layouts/_settingnav.html.erb (75.7ms)
  Rendered layouts/_topnavbar.html.erb (10.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2959ms (Views: 2804.6ms | ActiveRecord: 35.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:14:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (160.2ms)
  Rendered layouts/_headcontent.html.erb (1851.2ms)
  Rendered layouts/_layout_common_js.html.erb (8.2ms)
  Rendered layouts/_logoheader.html.erb (4.9ms)
  Rendered layouts/_settingnav.html.erb (75.4ms)
  Rendered layouts/_topnavbar.html.erb (4.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2275ms (Views: 2111.5ms | ActiveRecord: 44.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:15:03 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (29.1ms)
  Rendered layouts/_headcontent.html.erb (475.2ms)
  Rendered layouts/_layout_common_js.html.erb (5.3ms)
  Rendered layouts/_logoheader.html.erb (9.6ms)
  Rendered layouts/_settingnav.html.erb (42.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 629ms (Views: 605.0ms | ActiveRecord: 12.4ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:15:12 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (45.6ms)
  Rendered departments/new.html.erb within layouts/admin (51.4ms)
  Rendered layouts/_headcontent.html.erb (470.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (39.9ms)
  Rendered layouts/_topnavbar.html.erb (4.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 628ms (Views: 615.8ms | ActiveRecord: 5.5ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:15:22 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tSDCG9WDdUurSMWvEcy5bzDYw182oP6p1H6oLJk1QzFMH3PgSl19jNQCGmjuyIO1JWrVMvCXPe8AHBsBRYI2/Q==", "department"=>{"name"=>"new department three", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL LIMIT $2[0m  [["name", "new department three"], ["LIMIT", 1]]
  [1m[35mSQL (22.7ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "new department three"], ["description", ""], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 13:15:22 UTC], ["updated_at", 2017-03-23 13:15:22 UTC]]
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 56ms (ActiveRecord: 39.4ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:15:22 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (10.2ms)
  Rendered layouts/_headcontent.html.erb (542.3ms)
  Rendered layouts/_layout_common_js.html.erb (2.3ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_settingnav.html.erb (53.9ms)
  Rendered layouts/_topnavbar.html.erb (4.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 658ms (Views: 644.2ms | ActiveRecord: 8.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 16:15:28 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (104.0ms)
  Rendered layouts/_headcontent.html.erb (515.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (12.5ms)
  Rendered layouts/_footer.html.erb (1.2ms)
Completed 200 OK in 719ms (Views: 692.0ms | ActiveRecord: 16.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:15:32 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (43.7ms)
  Rendered layouts/_headcontent.html.erb (458.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.6ms)
  Rendered layouts/_logoheader.html.erb (17.7ms)
  Rendered layouts/_settingnav.html.erb (80.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 650ms (Views: 618.4ms | ActiveRecord: 16.3ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:19:44 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (12.0ms)
  Rendered layouts/_headcontent.html.erb (508.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (2.6ms)
  Rendered layouts/_settingnav.html.erb (35.9ms)
  Rendered layouts/_topnavbar.html.erb (6.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 620ms (Views: 611.0ms | ActiveRecord: 4.1ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:19:48 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (6.1ms)
  Rendered departments/new.html.erb within layouts/admin (16.7ms)
  Rendered layouts/_headcontent.html.erb (527.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.8ms)
  Rendered layouts/_settingnav.html.erb (32.0ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 629ms (Views: 622.3ms | ActiveRecord: 1.9ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:20:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/new.html.erb within layouts/admin (1.3ms)
Completed 500 Internal Server Error in 193ms (ActiveRecord: 19.4ms)



SyntaxError - syntax error, unexpected tIDENTIFIER, expecting ')'
...d}/departments,  :class => "btn btn-default");@output_buffer...
...                               ^
/home/dawit/cats/cats-web/app/views/departments/new.html.erb:15: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...s,  :class => "btn btn-default");@output_buffer.safe_append='
...                               ^
/home/dawit/cats/cats-web/app/views/departments/new.html.erb:15: unterminated string meets end of file:
  app/views/departments/new.html.erb:15:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bc3d32b6fcdffebf/variables" for 127.0.0.1 at 2017-03-23 16:20:23 +0300
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:20:42 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/new.html.erb within layouts/admin (565.5ms)
Completed 500 Internal Server Error in 793ms (ActiveRecord: 24.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `user' for #<#<Class:0x007f2804b55198>:0x007f282036c870>:
  app/views/departments/new.html.erb:15:in `_app_views_departments_new_html_erb___3555359211468499368_69904927207340'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9e5014cccb1beae1/variables" for 127.0.0.1 at 2017-03-23 16:20:43 +0300
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:21:30 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/new.html.erb within layouts/admin (12.7ms)
Completed 500 Internal Server Error in 205ms (ActiveRecord: 24.3ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `id' for nil:NilClass:
  app/views/departments/new.html.erb:15:in `_app_views_departments_new_html_erb___1247640728167406191_70058166084820'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8c24e40f447d6963/variables" for 127.0.0.1 at 2017-03-23 16:21:31 +0300
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:21:43 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/new.html.erb within layouts/admin (8.2ms)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 3.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `id' for nil:NilClass:
  app/views/departments/new.html.erb:15:in `_app_views_departments_new_html_erb___1247640728167406191_70057895937300'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c3a5d1d479abf52d/variables" for 127.0.0.1 at 2017-03-23 16:21:43 +0300
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:25:04 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/new.html.erb within layouts/admin (1.5ms)
Completed 500 Internal Server Error in 197ms (ActiveRecord: 20.2ms)



SyntaxError - syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
..."/users/#{@user.id/departments",  :class => "btn btn-default...
...                               ^
/home/dawit/cats/cats-web/app/views/departments/new.html.erb:15: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...d/departments",  :class => "btn btn-default");@output_buffer...
...                               ^
/home/dawit/cats/cats-web/app/views/departments/new.html.erb:15: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...",  :class => "btn btn-default");@output_buffer.safe_append='
...                               ^
/home/dawit/cats/cats-web/app/views/departments/new.html.erb:15: unterminated string meets end of file:
  app/views/departments/new.html.erb:15:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ee6e339f099205fb/variables" for 127.0.0.1 at 2017-03-23 16:25:05 +0300
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:25:32 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/new.html.erb within layouts/admin (7.3ms)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 3.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `id' for nil:NilClass:
  app/views/departments/new.html.erb:15:in `_app_views_departments_new_html_erb__1685277858928860391_47120292313960'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/18e617394e4cf339/variables" for 127.0.0.1 at 2017-03-23 16:25:33 +0300
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:27:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (29.4ms)
  Rendered departments/new.html.erb within layouts/admin (51.4ms)
  Rendered layouts/_headcontent.html.erb (2516.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.3ms)
  Rendered layouts/_settingnav.html.erb (42.4ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2843ms (Views: 2654.0ms | ActiveRecord: 24.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 16:28:03 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (152.9ms)
  Rendered layouts/_headcontent.html.erb (548.8ms)
  Rendered layouts/_layout_common_js.html.erb (5.9ms)
  Rendered layouts/_logoheader.html.erb (7.8ms)
  Rendered layouts/_settingnav.html.erb (34.8ms)
  Rendered layouts/_topnavbar.html.erb (8.9ms)
  Rendered layouts/_footer.html.erb (3.2ms)
Completed 200 OK in 796ms (Views: 761.8ms | ActiveRecord: 24.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:28:06 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (108.2ms)
Completed 500 Internal Server Error in 138ms (ActiveRecord: 21.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `each' for nil:NilClass:
  app/views/users/departments.html.erb:123:in `block in _app_views_users_departments_html_erb__2072252155738087597_47338998701520'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:118:in `_app_views_users_departments_html_erb__2072252155738087597_47338998701520'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0dc1284d2e0e51e8/variables" for 127.0.0.1 at 2017-03-23 16:28:07 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:29:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (251.4ms)
  Rendered layouts/_headcontent.html.erb (2311.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.9ms)
  Rendered layouts/_settingnav.html.erb (77.9ms)
  Rendered layouts/_topnavbar.html.erb (5.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2926ms (Views: 2646.7ms | ActiveRecord: 59.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:30:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (283.7ms)
  Rendered layouts/_headcontent.html.erb (2561.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (7.3ms)
  Rendered layouts/_settingnav.html.erb (96.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3154ms (Views: 2954.9ms | ActiveRecord: 59.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:35:31 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (744.1ms)
Completed 500 Internal Server Error in 943ms (ActiveRecord: 45.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `new_roles_path' for #<#<Class:0x007f22c09df140>:0x007f22dc3ca798>
Did you mean?  new_role_path
               new_store_path
               new_user_path
               new_role_type_path
               new_session_path
               new_donor_path
               new_delivery_path
               new_currency_path
               new_password_path
               new_user_session_path
               new_role_url
               new_hub_path
               new_project_path:
  app/views/users/departments.html.erb:121:in `_app_views_users_departments_html_erb__4417506283791359453_69893618597760'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1bd5b22391593b0c/variables" for 127.0.0.1 at 2017-03-23 16:35:33 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:36:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (11.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (9.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (254.0ms)
  Rendered layouts/_headcontent.html.erb (2387.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.2ms)
  Rendered layouts/_settingnav.html.erb (93.1ms)
  Rendered layouts/_topnavbar.html.erb (5.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2934ms (Views: 2723.4ms | ActiveRecord: 73.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:38:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (241.8ms)
  Rendered layouts/_headcontent.html.erb (2510.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.6ms)
  Rendered layouts/_settingnav.html.erb (79.4ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3032ms (Views: 2839.7ms | ActiveRecord: 43.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:44:15 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:44:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (232.2ms)
  Rendered layouts/_headcontent.html.erb (2133.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.1ms)
  Rendered layouts/_settingnav.html.erb (71.3ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (3.5ms)
Completed 200 OK in 2660ms (Views: 2454.0ms | ActiveRecord: 51.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:46:11 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (12.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (93.6ms)
  Rendered layouts/_headcontent.html.erb (472.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.4ms)
  Rendered layouts/_settingnav.html.erb (44.3ms)
  Rendered layouts/_topnavbar.html.erb (5.2ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 669ms (Views: 617.1ms | ActiveRecord: 32.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 16:49:31 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (236.0ms)
  Rendered layouts/_headcontent.html.erb (1912.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (83.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (2.6ms)
Completed 200 OK in 2459ms (Views: 2248.0ms | ActiveRecord: 45.5ms)


  
ActionController::RoutingError (No route matches [GET] "/assets/parsley.min.js.map"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `block in call'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:63:in `block (3 levels) in broadcast'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:61:in `block (2 levels) in broadcast'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  
ActionController::RoutingError (No route matches [GET] "/assets/dataTables/pdfmake.min.js.map"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `block in call'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:63:in `block (3 levels) in broadcast'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:61:in `block (2 levels) in broadcast'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/users/21/roles/new/21" for 127.0.0.1 at 2017-03-23 16:49:43 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/roles/new/21"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [309 times] (240.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.4ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (380.9ms)
Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:49:58 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (20.8ms)
  Rendered departments/new.html.erb within layouts/admin (26.6ms)
  Rendered layouts/_headcontent.html.erb (431.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.1ms)
  Rendered layouts/_settingnav.html.erb (49.1ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (4.0ms)
Completed 200 OK in 568ms (Views: 550.9ms | ActiveRecord: 2.0ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 16:50:21 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (89.3ms)
  Rendered layouts/_headcontent.html.erb (481.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (47.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 672ms (Views: 625.1ms | ActiveRecord: 36.5ms)


Started GET "/users/26/roles/new/26" for 127.0.0.1 at 2017-03-23 16:50:33 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/26/roles/new/26"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.4ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [309 times] (190.1ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (305.0ms)
Started GET "/users/26/roles/new/26" for 127.0.0.1 at 2017-03-23 16:55:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [GET] "/users/26/roles/new/26"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [309 times] (237.1ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (20.6ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (21.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (429.0ms)
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 16:55:08 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (232.1ms)
  Rendered layouts/_headcontent.html.erb (1940.5ms)
  Rendered layouts/_layout_common_js.html.erb (1.5ms)
  Rendered layouts/_logoheader.html.erb (18.4ms)
  Rendered layouts/_settingnav.html.erb (72.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2431ms (Views: 2240.4ms | ActiveRecord: 68.6ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-23 16:55:16 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (8.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (15.2ms)
  Rendered layouts/_headcontent.html.erb (436.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.4ms)
  Rendered layouts/_settingnav.html.erb (40.6ms)
  Rendered layouts/_topnavbar.html.erb (7.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 564ms (Views: 540.4ms | ActiveRecord: 9.1ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:55:54 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (9.0ms)
  Rendered layouts/_headcontent.html.erb (350.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (31.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 458ms (Views: 439.3ms | ActiveRecord: 5.5ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 16:56:12 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (22.1ms)
  Rendered departments/new.html.erb within layouts/admin (28.4ms)
  Rendered layouts/_headcontent.html.erb (444.0ms)
  Rendered layouts/_layout_common_js.html.erb (12.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (40.8ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 586ms (Views: 569.8ms | ActiveRecord: 1.2ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:56:21 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"69a8R7Sb/YcGT08IoUGl1uRH6sfO4PGoSQG1g0UJrywS6Q28K0X1QHkFkM9eRZ8M8fX8qgjXMu6dYwaumb7a4A==", "department"=>{"name"=>"", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", ""], ["description", ""], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 13:56:21 UTC], ["updated_at", 2017-03-23 13:56:21 UTC]]
  [1m[35m (37.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 72ms (ActiveRecord: 44.0ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:56:21 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (5.3ms)
  Rendered layouts/_headcontent.html.erb (388.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.9ms)
  Rendered layouts/_settingnav.html.erb (35.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 476ms (Views: 463.7ms | ActiveRecord: 7.6ms)


Started DELETE "/departments/5?locale=en" for 127.0.0.1 at 2017-03-23 16:56:28 +0300
Processing by DepartmentsController#destroy as HTML
  Parameters: {"authenticity_token"=>"V9LX00ZLC610NpwxO8NPvViokUHAFMuwhD2B9y3vmOGu7WYo2ZUDagt8Q/bEx3VnTRqHLAYjCPZQXzLa8VjtLQ==", "locale"=>"en", "id"=>"5"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[33mUPDATE "departments" SET "deleted_at" = '2017-03-23 13:56:28.632286', "updated_at" = '2017-03-23 13:56:28.632341' WHERE "departments"."id" = $1[0m  [["id", 5]]
  [1m[35m (72.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 95ms (ActiveRecord: 81.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 16:56:28 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (13.1ms)
  Rendered layouts/_headcontent.html.erb (358.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (34.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 463ms (Views: 451.1ms | ActiveRecord: 2.2ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 17:12:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (1.8ms)
Completed 500 Internal Server Error in 174ms (ActiveRecord: 23.5ms)



SyntaxError - syntax error, unexpected keyword_ensure, expecting keyword_end
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:161: syntax error, unexpected end-of-input, expecting keyword_end:
  app/views/users/departments.html.erb:159:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2d14d0dd6d997ed6/variables" for 127.0.0.1 at 2017-03-23 17:12:27 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 18:12:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (209.0ms)
  Rendered layouts/_headcontent.html.erb (1925.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (86.6ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2432ms (Views: 2242.5ms | ActiveRecord: 56.9ms)


Started GET "/" for 127.0.0.1 at 2017-03-23 18:12:10 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.6ms)
  Rendered layouts/_layout_common_js.html.erb (8.8ms)
  Rendered layouts/_logoheader.html.erb (11.0ms)
  Rendered layouts/_navigation.html.erb (44.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 531ms (Views: 515.1ms | ActiveRecord: 5.6ms)


Started GET "/en/rations" for 127.0.0.1 at 2017-03-23 18:12:16 +0300
Processing by RationsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/index.html.erb within layouts/application
  [1m[36mRation Load (2.6ms)[0m  [1m[34mSELECT "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL[0m
  Rendered rations/index.html.erb within layouts/application (38.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (12.0ms)
  Rendered layouts/_navigation.html.erb (29.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 499ms (Views: 472.1ms | ActiveRecord: 12.6ms)


Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 18:12:20 +0300
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (36.2ms)
  Rendered rations/new.html.erb within layouts/application (41.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_navigation.html.erb (16.3ms)
  Rendered layouts/_topnavbar.html.erb (4.5ms)
  Rendered layouts/_footer.html.erb (3.9ms)
Completed 200 OK in 536ms (Views: 523.2ms | ActiveRecord: 2.7ms)


Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 18:24:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (37.1ms)
  Rendered rations/new.html.erb within layouts/application (56.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_navigation.html.erb (40.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2259ms (Views: 2090.8ms | ActiveRecord: 12.8ms)


  
ActionController::RoutingError (No route matches [GET] "/assets/parsley.min.js.map"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `block in call'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:63:in `block (3 levels) in broadcast'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:61:in `block (2 levels) in broadcast'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  
ActionController::RoutingError (No route matches [GET] "/assets/dataTables/pdfmake.min.js.map"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `block in call'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:63:in `block (3 levels) in broadcast'
activesupport (5.0.2) lib/active_support/logger_silence.rb:20:in `silence'
activesupport (5.0.2) lib/active_support/logger.rb:61:in `block (2 levels) in broadcast'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:11:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 18:24:40 +0300
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (19.1ms)
  Rendered rations/new.html.erb within layouts/application (26.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.3ms)
  Rendered layouts/_navigation.html.erb (36.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 537ms (Views: 515.5ms | ActiveRecord: 2.3ms)


Started POST "/en/rations" for 127.0.0.1 at 2017-03-23 18:24:47 +0300
Processing by RationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/ByT/nEhrfrC3UBTjfjRo9XpkIUeQL70PrG9eJrKCg8FIyIF7v+lPb2Xn5Ry/Ot5wFuG6Nh3fbLq0w5VRn1/ww==", "ration"=>{"reference_no"=>"vv", "description"=>"vv", "current"=>"0"}, "commit"=>"Create Ration", "locale"=>"en"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Unpermitted parameter: current
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.7ms)[0m  [1m[32mINSERT INTO "rations" ("reference_no", "description", "created_at", "updated_at", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["reference_no", "vv"], ["description", "vv"], ["created_at", 2017-03-23 15:24:47 UTC], ["updated_at", 2017-03-23 15:24:47 UTC], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/rations/3
Completed 302 Found in 54ms (ActiveRecord: 14.7ms)


Started GET "/en/rations/3" for 127.0.0.1 at 2017-03-23 18:24:47 +0300
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (1.7ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  [1m[35m (5.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "ration_items" WHERE "ration_items"."deleted_at" IS NULL AND "ration_items"."ration_id" = $1[0m  [["ration_id", 3]]
  Rendered rations/_ration_view.html.erb (66.1ms)
  Rendered rations/show.html.erb within layouts/application (71.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (16.7ms)
  Rendered layouts/_navigation.html.erb (27.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 605ms (Views: 578.5ms | ActiveRecord: 10.6ms)


Started POST "/en/rations" for 127.0.0.1 at 2017-03-23 18:24:56 +0300
Processing by RationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/ByT/nEhrfrC3UBTjfjRo9XpkIUeQL70PrG9eJrKCg8FIyIF7v+lPb2Xn5Ry/Ot5wFuG6Nh3fbLq0w5VRn1/ww==", "ration"=>{"reference_no"=>"vv", "description"=>"vv", "current"=>"0"}, "commit"=>"Create Ration", "locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Unpermitted parameter: current
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.9ms)[0m  [1m[32mINSERT INTO "rations" ("reference_no", "description", "created_at", "updated_at", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["reference_no", "vv"], ["description", "vv"], ["created_at", 2017-03-23 15:24:56 UTC], ["updated_at", 2017-03-23 15:24:56 UTC], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (2.4ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 40ms (ActiveRecord: 14.1ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

PG::UniqueViolation - ERROR:  duplicate key value violates unique constraint "index_rations_on_reference_no"
DETAIL:  Key (reference_no)=(vv) already exists.
:
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `block in exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:598:in `exec_no_cache'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql_adapter.rb:587:in `execute_and_clear'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:103:in `exec_query'
  activerecord (5.0.2) lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_insert'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:124:in `insert'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/query_cache.rb:17:in `insert'
  activerecord (5.0.2) lib/active_record/relation.rb:65:in `insert'
  activerecord (5.0.2) lib/active_record/persistence.rb:560:in `_create_record'
  activerecord (5.0.2) lib/active_record/counter_cache.rb:128:in `_create_record'
  activerecord (5.0.2) lib/active_record/locking/optimistic.rb:75:in `_create_record'
  activerecord (5.0.2) lib/active_record/attribute_methods/dirty.rb:123:in `_create_record'
  activerecord (5.0.2) lib/active_record/callbacks.rb:302:in `block in _create_record'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_create_callbacks'
  activerecord (5.0.2) lib/active_record/callbacks.rb:302:in `_create_record'
  activerecord (5.0.2) lib/active_record/timestamp.rb:68:in `_create_record'
  activerecord (5.0.2) lib/active_record/persistence.rb:540:in `create_or_update'
  activerecord (5.0.2) lib/active_record/callbacks.rb:298:in `block in create_or_update'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_save_callbacks'
  activerecord (5.0.2) lib/active_record/callbacks.rb:298:in `create_or_update'
  activerecord (5.0.2) lib/active_record/persistence.rb:125:in `save'
  activerecord (5.0.2) lib/active_record/validations.rb:44:in `save'
  activerecord (5.0.2) lib/active_record/attribute_methods/dirty.rb:22:in `save'
  activerecord (5.0.2) lib/active_record/transactions.rb:319:in `block (2 levels) in save'
  activerecord (5.0.2) lib/active_record/transactions.rb:395:in `block in with_transaction_returning_status'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
  activerecord (5.0.2) lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
  activerecord (5.0.2) lib/active_record/transactions.rb:211:in `transaction'
  activerecord (5.0.2) lib/active_record/transactions.rb:392:in `with_transaction_returning_status'
  activerecord (5.0.2) lib/active_record/transactions.rb:319:in `block in save'
  activerecord (5.0.2) lib/active_record/transactions.rb:334:in `rollback_active_record_state!'
  activerecord (5.0.2) lib/active_record/transactions.rb:318:in `save'
  activerecord (5.0.2) lib/active_record/suppressor.rb:41:in `save'
  app/controllers/rations_controller.rb:30:in `block in create'
  actionpack (5.0.2) lib/action_controller/metal/mime_responds.rb:195:in `respond_to'
  app/controllers/rations_controller.rb:29:in `create'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d8beeab1348f7746/variables" for 127.0.0.1 at 2017-03-23 18:24:56 +0300
Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 18:36:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (44.1ms)
  Rendered rations/new.html.erb within layouts/application (63.4ms)
  Rendered layouts/_layout_common_js.html.erb (3.6ms)
  Rendered layouts/_logoheader.html.erb (5.7ms)
  Rendered layouts/_navigation.html.erb (23.1ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2308ms (Views: 2149.4ms | ActiveRecord: 19.2ms)


Started POST "/en/rations" for 127.0.0.1 at 2017-03-23 18:37:06 +0300
Processing by RationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"usvGxgspFipoLBJcYbHJXb923O3wBjtuWqDRATNPiL1D9Hc9lPce7RdmzZuetfOHqsTKgDYx+CiOwmIs7/j9cQ==", "ration"=>{"reference_no"=>"vvm", "description"=>"vv", "current"=>"0"}, "commit"=>"Create Ration", "locale"=>"en"}
  [1m[36mUser Load (9.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Unpermitted parameter: current
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.1ms)[0m  [1m[32mINSERT INTO "rations" ("reference_no", "description", "created_at", "updated_at", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["reference_no", "vvm"], ["description", "vv"], ["created_at", 2017-03-23 15:37:06 UTC], ["updated_at", 2017-03-23 15:37:06 UTC], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (32.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/rations/5
Completed 302 Found in 73ms (ActiveRecord: 48.7ms)


Started GET "/en/rations/5" for 127.0.0.1 at 2017-03-23 18:37:06 +0300
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"5"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (0.8ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  Rendered rations/show.html.erb within layouts/application (24.4ms)
Completed 500 Internal Server Error in 52ms (ActiveRecord: 2.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActionView::MissingTemplate - Missing partial rations/_ration_view, application/_ration_view with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :axlsx, :coffee, :jbuilder]}. Searched in:
  * "/home/dawit/cats/cats-web/app/views"
  * "/home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/devise-4.2.1/app/views"
:
  actionview (5.0.2) lib/action_view/path_set.rb:46:in `find'
  actionview (5.0.2) lib/action_view/lookup_context.rb:122:in `find'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:420:in `find_template'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:415:in `find_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:297:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/rations/show.html.erb:25:in `_app_views_rations_show_html_erb___4501724239109995189_70075311551340'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a4c50a45a578c1d8/variables" for 127.0.0.1 at 2017-03-23 18:37:07 +0300
Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 18:57:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (33.0ms)
  Rendered rations/new.html.erb within layouts/application (48.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_navigation.html.erb (36.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2242ms (Views: 2071.7ms | ActiveRecord: 14.0ms)


Started GET "/" for 127.0.0.1 at 2017-03-23 18:57:56 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (16.1ms)
  Rendered layouts/_navigation.html.erb (34.9ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 502ms (Views: 477.3ms | ActiveRecord: 7.8ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 18:58:01 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.1ms)
  Rendered layouts/_headcontent.html.erb (372.1ms)
  Rendered layouts/_layout_common_js.html.erb (6.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (47.6ms)
  Rendered layouts/_topnavbar.html.erb (9.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 489ms (Views: 475.2ms | ActiveRecord: 2.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 18:58:08 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (116.8ms)
  Rendered layouts/_headcontent.html.erb (406.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (58.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 645ms (Views: 609.4ms | ActiveRecord: 23.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 18:58:12 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (9.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (170.2ms)
  Rendered layouts/_headcontent.html.erb (388.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.7ms)
  Rendered layouts/_settingnav.html.erb (41.1ms)
  Rendered layouts/_topnavbar.html.erb (11.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 683ms (Views: 592.3ms | ActiveRecord: 60.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 18:58:30 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"b848j/92P3uuSbP7ru0s89nLsNdhU3PRfOMbAkBDIM+W8Y10YKg3vNEDbDxR6RYpzHmmuqdksJeogagvnPRVAw==", "departments"=>{"2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 15:58:30.584395', "updated_at" = '2017-03-23 15:58:30.584488' WHERE "users_departments"."id" = $1[0m  [["id", 39]]
  [1m[35m (46.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 15:58:30 UTC], ["updated_at", 2017-03-23 15:58:30 UTC]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 15:58:30 UTC], ["updated_at", 2017-03-23 15:58:30 UTC]]
  [1m[35m (26.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to 
Completed 500 Internal Server Error in 178ms (ActiveRecord: 108.2ms)



ActionController::ActionControllerError - Cannot redirect to nil!:
  actionpack (5.0.2) lib/action_controller/metal/redirecting.rb:62:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/flash.rb:57:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:64:in `block in redirect_to'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:63:in `redirect_to'
  turbolinks (5.0.1) lib/turbolinks/redirection.rb:12:in `redirect_to'
  app/controllers/users_controller.rb:59:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d733c7ec5ea72519/variables" for 127.0.0.1 at 2017-03-23 18:58:30 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 18:59:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"b848j/92P3uuSbP7ru0s89nLsNdhU3PRfOMbAkBDIM+W8Y10YKg3vNEDbDxR6RYpzHmmuqdksJeogagvnPRVAw==", "departments"=>{"2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 15:59:22.207493', "updated_at" = '2017-03-23 15:59:22.207556' WHERE "users_departments"."id" = $1[0m  [["id", 40]]
  [1m[35m (44.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 15:59:22.257036', "updated_at" = '2017-03-23 15:59:22.257071' WHERE "users_departments"."id" = $1[0m  [["id", 41]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 15:59:22 UTC], ["updated_at", 2017-03-23 15:59:22 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 15:59:22 UTC], ["updated_at", 2017-03-23 15:59:22 UTC]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21
Completed 302 Found in 279ms (ActiveRecord: 94.9ms)


Started GET "/en/users/21" for 127.0.0.1 at 2017-03-23 18:59:22 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (10.3ms)
Completed 500 Internal Server Error in 71ms (ActiveRecord: 6.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActionView::MissingTemplate - Missing partial users/_user_profile_view, application/_user_profile_view with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :axlsx, :coffee, :jbuilder]}. Searched in:
  * "/home/dawit/cats/cats-web/app/views"
  * "/home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/devise-4.2.1/app/views"
:
  actionview (5.0.2) lib/action_view/path_set.rb:46:in `find'
  actionview (5.0.2) lib/action_view/lookup_context.rb:122:in `find'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:420:in `find_template'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:415:in `find_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:297:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/show.html.erb:24:in `_app_views_users_show_html_erb__604091573835381737_70154164868840'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/fa150e6ec3055c0d/variables" for 127.0.0.1 at 2017-03-23 18:59:22 +0300
Started GET "/en/users/21" for 127.0.0.1 at 2017-03-23 19:00:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/_user_profile_view.html.erb (501.7ms)
  Rendered users/show.html.erb within layouts/admin (524.1ms)
Completed 500 Internal Server Error in 703ms (ActiveRecord: 28.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `roles' for #<#<Class:0x007fa4ccadb0b0>:0x007fa4e83a67d8>
Did you mean?  roles_url:
  app/views/users/_user_profile_view.html.erb:3:in `_app_views_users__user_profile_view_html_erb__212073749417465740_70173123561640'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/show.html.erb:24:in `_app_views_users_show_html_erb__28398391200954756_70172892651320'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/03fc4345e2cc22a8/variables" for 127.0.0.1 at 2017-03-23 19:00:33 +0300
Started GET "/en/users/21" for 127.0.0.1 at 2017-03-23 19:01:06 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/_user_profile_view.html.erb (732.1ms)
  Rendered users/show.html.erb within layouts/admin (742.1ms)
Completed 500 Internal Server Error in 772ms (ActiveRecord: 8.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `all_departments' for #<#<Class:0x007fa4ccadb0b0>:0x007fa4ccb05fe0>:
  app/views/users/_user_profile_view.html.erb:3:in `_app_views_users__user_profile_view_html_erb__212073749417465740_70172893147700'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/show.html.erb:24:in `_app_views_users_show_html_erb__28398391200954756_70172892739540'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b51cd2d20ae51f74/variables" for 127.0.0.1 at 2017-03-23 19:01:07 +0300
Started GET "/en/users/21" for 127.0.0.1 at 2017-03-23 19:02:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/_user_profile_view.html.erb (511.3ms)
  Rendered users/show.html.erb within layouts/admin (524.6ms)
Completed 500 Internal Server Error in 682ms (ActiveRecord: 24.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `updateDepartments' for #<#<Class:0x007fb4b0ad7ae8>:0x007fb4d039b200>:
  app/views/users/_user_profile_view.html.erb:3:in `_app_views_users__user_profile_view_html_erb___2915017084732184011_70207281958320'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/show.html.erb:24:in `_app_views_users_show_html_erb___10463218608753053_70207282169000'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/209516fc7693d717/variables" for 127.0.0.1 at 2017-03-23 19:02:12 +0300
Started GET "/en/users/21" for 127.0.0.1 at 2017-03-23 19:03:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/_user_profile_view.html.erb (12.4ms)
  Rendered users/show.html.erb within layouts/admin (26.6ms)
Completed 500 Internal Server Error in 182ms (ActiveRecord: 13.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:438:in `form_for'
  app/views/users/_user_profile_view.html.erb:3:in `_app_views_users__user_profile_view_html_erb___1533405839668539298_69870198365560'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/show.html.erb:24:in `_app_views_users_show_html_erb___2379375120491909791_69870198092860'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c5af38f84e4ba290/variables" for 127.0.0.1 at 2017-03-23 19:03:53 +0300
Started GET "/en/users/21" for 127.0.0.1 at 2017-03-23 19:08:49 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/_user_profile_view.html.erb (8.2ms)
  Rendered users/show.html.erb within layouts/admin (26.6ms)
Completed 500 Internal Server Error in 191ms (ActiveRecord: 9.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:438:in `form_for'
  app/views/users/_user_profile_view.html.erb:3:in `_app_views_users__user_profile_view_html_erb__427284380879079131_70287611366060'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/show.html.erb:24:in `_app_views_users_show_html_erb__890272643104038573_70287611568600'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/fa82a3bf43d7aafe/variables" for 127.0.0.1 at 2017-03-23 19:08:50 +0300
Started GET "/" for 127.0.0.1 at 2017-03-23 19:09:01 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (9.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.9ms)
  Rendered layouts/_layout_common_js.html.erb (5.4ms)
  Rendered layouts/_logoheader.html.erb (15.2ms)
  Rendered layouts/_navigation.html.erb (45.6ms)
  Rendered layouts/_topnavbar.html.erb (11.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2092ms (Views: 2073.1ms | ActiveRecord: 9.1ms)


Started GET "/en/rations" for 127.0.0.1 at 2017-03-23 19:09:12 +0300
Processing by RationsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/index.html.erb within layouts/application
  [1m[36mRation Load (2.2ms)[0m  [1m[34mSELECT "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL[0m
  Rendered rations/index.html.erb within layouts/application (48.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  Rendered layouts/_navigation.html.erb (29.2ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 653ms (Views: 617.6ms | ActiveRecord: 10.9ms)


Started GET "/en/rations/new" for 127.0.0.1 at 2017-03-23 19:09:15 +0300
Processing by RationsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering rations/new.html.erb within layouts/application
  Rendered rations/_form.html.erb (43.8ms)
  Rendered rations/new.html.erb within layouts/application (52.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  Rendered layouts/_navigation.html.erb (18.2ms)
  Rendered layouts/_topnavbar.html.erb (10.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 491ms (Views: 483.0ms | ActiveRecord: 2.5ms)


Started POST "/en/rations" for 127.0.0.1 at 2017-03-23 19:09:29 +0300
Processing by RationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"U0bCZ0e3GT/ac8Tv+Bs6mfxxLTUYOjaIKqBiH5DFq2+qeXOc2GkR+KU5GygHHwBD6cM7WN4N9c7+wtEyTHLeow==", "ration"=>{"reference_no"=>"bb", "description"=>"", "current"=>"0"}, "commit"=>"Create Ration", "locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Unpermitted parameter: current
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "rations" ("reference_no", "description", "created_at", "updated_at", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["reference_no", "bb"], ["description", ""], ["created_at", 2017-03-23 16:09:29 UTC], ["updated_at", 2017-03-23 16:09:29 UTC], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/rations/6
Completed 302 Found in 31ms (ActiveRecord: 8.0ms)


Started GET "/en/rations/6" for 127.0.0.1 at 2017-03-23 19:09:29 +0300
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"6"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (3.7ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "ration_items" WHERE "ration_items"."deleted_at" IS NULL AND "ration_items"."ration_id" = $1[0m  [["ration_id", 6]]
  Rendered rations/_ration_view.html.erb (69.8ms)
  Rendered rations/show.html.erb within layouts/application (72.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.7ms)
  Rendered layouts/_navigation.html.erb (26.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 509ms (Views: 492.4ms | ActiveRecord: 6.0ms)


Started GET "/en/ration_items/new?ration_id=6" for 127.0.0.1 at 2017-03-23 19:09:51 +0300
Processing by RationItemsController#new as HTML
  Parameters: {"ration_id"=>"6", "locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (2.7ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  Rendering ration_items/new.html.erb within layouts/application
  [1m[36mCommodity Load (1.0ms)[0m  [1m[34mSELECT "commodities".* FROM "commodities" WHERE "commodities"."deleted_at" IS NULL ORDER BY "commodities"."name" ASC[0m
  [1m[36mUnitOfMeasure Load (0.8ms)[0m  [1m[34mSELECT "unit_of_measures".* FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL ORDER BY "unit_of_measures"."name" ASC[0m
  [1m[36mRation Load (0.5ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  Rendered ration_items/_form.html.erb (150.7ms)
  Rendered ration_items/new.html.erb within layouts/application (157.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.9ms)
  Rendered layouts/_navigation.html.erb (43.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 717ms (Views: 633.4ms | ActiveRecord: 20.7ms)


Started POST "/en/ration_items" for 127.0.0.1 at 2017-03-23 19:10:13 +0300
Processing by RationItemsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mGLUOMBV7apM887ioNtuCPgUWZA3mHwraEtk8ZZPmCthXWXDX4vlbTO5ESVf31TS7aZP/fGvv228KdfcSvjt5w==", "ration_item"=>{"ration_id"=>"6", "commodity_id"=>"7", "amount"=>"mm", "unit_of_measure_id"=>"5"}, "commit"=>"Create Ration item", "locale"=>"en"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCommodity Load (2.7ms)[0m  [1m[34mSELECT  "commodities".* FROM "commodities" WHERE "commodities"."deleted_at" IS NULL AND "commodities"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUnitOfMeasure Load (3.0ms)[0m  [1m[34mSELECT  "unit_of_measures".* FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL AND "unit_of_measures"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mRation Load (5.6ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendering ration_items/new.html.erb within layouts/application
  Rendered ration_items/new.html.erb within layouts/application (5.9ms)
Completed 500 Internal Server Error in 76ms (ActiveRecord: 16.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"rations", :id=>nil, :locale=>:en} missing required keys: [:id]:
  actionpack (5.0.2) lib/action_dispatch/journey/formatter.rb:51:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:629:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:660:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:707:in `url_for'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:236:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:295:in `block (2 levels) in define_url_helper'
  app/views/ration_items/new.html.erb:15:in `_app_views_ration_items_new_html_erb___2663875097374280799_70287360107520'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/ration_items_controller.rb:53:in `block (2 levels) in create'
  actionpack (5.0.2) lib/action_controller/metal/mime_responds.rb:201:in `respond_to'
  app/controllers/ration_items_controller.rb:48:in `create'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3ddf2180cd110210/variables" for 127.0.0.1 at 2017-03-23 19:10:13 +0300
Started GET "/en/rations/6" for 127.0.0.1 at 2017-03-23 19:10:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by RationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"6"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRation Load (0.5ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  Rendering rations/show.html.erb within layouts/application
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "ration_items" WHERE "ration_items"."deleted_at" IS NULL AND "ration_items"."ration_id" = $1[0m  [["ration_id", 6]]
  Rendered rations/_ration_view.html.erb (97.6ms)
  Rendered rations/show.html.erb within layouts/application (108.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (9.6ms)
  Rendered layouts/_navigation.html.erb (31.9ms)
  Rendered layouts/_topnavbar.html.erb (7.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2357ms (Views: 2181.1ms | ActiveRecord: 29.0ms)


Started POST "/en/ration_items" for 127.0.0.1 at 2017-03-23 19:10:53 +0300
Processing by RationItemsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mGLUOMBV7apM887ioNtuCPgUWZA3mHwraEtk8ZZPmCthXWXDX4vlbTO5ESVf31TS7aZP/fGvv228KdfcSvjt5w==", "ration_item"=>{"ration_id"=>"6", "commodity_id"=>"7", "amount"=>"mm", "unit_of_measure_id"=>"5"}, "commit"=>"Create Ration item", "locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (9.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCommodity Load (3.9ms)[0m  [1m[34mSELECT  "commodities".* FROM "commodities" WHERE "commodities"."deleted_at" IS NULL AND "commodities"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUnitOfMeasure Load (0.6ms)[0m  [1m[34mSELECT  "unit_of_measures".* FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL AND "unit_of_measures"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mRation Load (0.5ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering ration_items/new.html.erb within layouts/application
  Rendered ration_items/new.html.erb within layouts/application (17.3ms)
Completed 500 Internal Server Error in 215ms (ActiveRecord: 40.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"rations", :id=>nil, :locale=>:en} missing required keys: [:id]:
  actionpack (5.0.2) lib/action_dispatch/journey/formatter.rb:51:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:629:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:660:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:707:in `url_for'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:236:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:295:in `block (2 levels) in define_url_helper'
  app/views/ration_items/new.html.erb:15:in `_app_views_ration_items_new_html_erb___1705588021405075440_69913212071520'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/ration_items_controller.rb:53:in `block (2 levels) in create'
  actionpack (5.0.2) lib/action_controller/metal/mime_responds.rb:201:in `respond_to'
  app/controllers/ration_items_controller.rb:48:in `create'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2c6ebb9f8b270ee9/variables" for 127.0.0.1 at 2017-03-23 19:10:53 +0300
Started POST "/en/ration_items" for 127.0.0.1 at 2017-03-23 19:11:03 +0300
Processing by RationItemsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mGLUOMBV7apM887ioNtuCPgUWZA3mHwraEtk8ZZPmCthXWXDX4vlbTO5ESVf31TS7aZP/fGvv228KdfcSvjt5w==", "ration_item"=>{"ration_id"=>"6", "commodity_id"=>"7", "amount"=>"mm", "unit_of_measure_id"=>"5"}, "commit"=>"Create Ration item", "locale"=>"en"}
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCommodity Load (2.6ms)[0m  [1m[34mSELECT  "commodities".* FROM "commodities" WHERE "commodities"."deleted_at" IS NULL AND "commodities"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUnitOfMeasure Load (3.6ms)[0m  [1m[34mSELECT  "unit_of_measures".* FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL AND "unit_of_measures"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mRation Load (1.0ms)[0m  [1m[34mSELECT  "rations".* FROM "rations" WHERE "rations"."deleted_at" IS NULL AND "rations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[31mROLLBACK[0m
  Rendering ration_items/new.html.erb within layouts/application
  Rendered ration_items/new.html.erb within layouts/application (11.3ms)
Completed 500 Internal Server Error in 87ms (ActiveRecord: 19.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActionController::UrlGenerationError - No route matches {:action=>"show", :controller=>"rations", :id=>nil, :locale=>:en} missing required keys: [:id]:
  actionpack (5.0.2) lib/action_dispatch/journey/formatter.rb:51:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:629:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:660:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:707:in `url_for'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:236:in `call'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:295:in `block (2 levels) in define_url_helper'
  app/views/ration_items/new.html.erb:15:in `_app_views_ration_items_new_html_erb___1705588021405075440_69913131359220'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/ration_items_controller.rb:53:in `block (2 levels) in create'
  actionpack (5.0.2) lib/action_controller/metal/mime_responds.rb:201:in `respond_to'
  app/controllers/ration_items_controller.rb:48:in `create'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/724421d3dbbbfaf0/variables" for 127.0.0.1 at 2017-03-23 19:11:03 +0300
Started GET "/" for 127.0.0.1 at 2017-03-23 19:13:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (6.1ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (10.6ms)
  Rendered layouts/_navigation.html.erb (64.3ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (5.5ms)
Completed 200 OK in 2221ms (Views: 2112.7ms | ActiveRecord: 14.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 19:13:09 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.1ms)
  Rendered layouts/_headcontent.html.erb (367.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.4ms)
  Rendered layouts/_settingnav.html.erb (40.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (4.6ms)
Completed 200 OK in 459ms (Views: 446.3ms | ActiveRecord: 2.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 19:13:15 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (8.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (128.1ms)
  Rendered layouts/_headcontent.html.erb (397.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.1ms)
  Rendered layouts/_settingnav.html.erb (34.8ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 614ms (Views: 579.5ms | ActiveRecord: 29.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 19:13:18 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (187.0ms)
  Rendered layouts/_headcontent.html.erb (411.1ms)
  Rendered layouts/_layout_common_js.html.erb (9.0ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (39.7ms)
  Rendered layouts/_topnavbar.html.erb (8.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 724ms (Views: 667.0ms | ActiveRecord: 31.8ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 19:13:27 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zWLg6TudkxGROUzBB3KqMHXCMx1LC9Yf1NyZR29iDG40XVESpEOb1u5zkwb4dpDqYHAlcI08FVkAvipqs9V5og==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 16:13:27.962910', "updated_at" = '2017-03-23 16:13:27.962974' WHERE "users_departments"."id" = $1[0m  [["id", 42]]
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 16:13:27.982125', "updated_at" = '2017-03-23 16:13:27.982168' WHERE "users_departments"."id" = $1[0m  [["id", 43]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (10.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 16:13:27 UTC], ["updated_at", 2017-03-23 16:13:27 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 16:13:28 UTC], ["updated_at", 2017-03-23 16:13:28 UTC]]
  [1m[35m (22.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 16:13:28 UTC], ["updated_at", 2017-03-23 16:13:28 UTC]]
  [1m[35m (20.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to 
Completed 500 Internal Server Error in 163ms (ActiveRecord: 98.8ms)



ActionController::ActionControllerError - Cannot redirect to nil!:
  actionpack (5.0.2) lib/action_controller/metal/redirecting.rb:62:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/flash.rb:57:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:64:in `block in redirect_to'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:63:in `redirect_to'
  turbolinks (5.0.1) lib/turbolinks/redirection.rb:12:in `redirect_to'
  app/controllers/users_controller.rb:59:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7182d22894bdd1b0/variables" for 127.0.0.1 at 2017-03-23 19:13:28 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-23 19:14:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zWLg6TudkxGROUzBB3KqMHXCMx1LC9Yf1NyZR29iDG40XVESpEOb1u5zkwb4dpDqYHAlcI08FVkAvipqs9V5og==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 16:14:35.192808', "updated_at" = '2017-03-23 16:14:35.192873' WHERE "users_departments"."id" = $1[0m  [["id", 44]]
  [1m[35m (32.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 16:14:35.233409', "updated_at" = '2017-03-23 16:14:35.233444' WHERE "users_departments"."id" = $1[0m  [["id", 45]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-23 16:14:35.243384', "updated_at" = '2017-03-23 16:14:35.243421' WHERE "users_departments"."id" = $1[0m  [["id", 46]]
  [1m[35m (24.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (9.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 16:14:35 UTC], ["updated_at", 2017-03-23 16:14:35 UTC]]
  [1m[35m (18.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 16:14:35 UTC], ["updated_at", 2017-03-23 16:14:35 UTC]]
  [1m[35m (28.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-23 16:14:35 UTC], ["updated_at", 2017-03-23 16:14:35 UTC]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to 
Completed 500 Internal Server Error in 366ms (ActiveRecord: 188.3ms)



ActionController::ActionControllerError - Cannot redirect to nil!:
  actionpack (5.0.2) lib/action_controller/metal/redirecting.rb:62:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/flash.rb:57:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:64:in `block in redirect_to'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:63:in `redirect_to'
  turbolinks (5.0.1) lib/turbolinks/redirection.rb:12:in `redirect_to'
  app/controllers/users_controller.rb:59:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d6b498962293c2b4/variables" for 127.0.0.1 at 2017-03-23 19:14:35 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-23 20:56:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (8.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (184.8ms)
  Rendered layouts/_headcontent.html.erb (2683.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (11.5ms)
  Rendered layouts/_settingnav.html.erb (82.5ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3213ms (Views: 2981.7ms | ActiveRecord: 43.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 20:56:43 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (10.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (887.6ms)
Completed 500 Internal Server Error in 959ms (ActiveRecord: 39.1ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `updateDepartments' for #<#<Class:0x007f618cad67f0>:0x0055cf7d5c3800>:
  app/views/users/departments.html.erb:78:in `_app_views_users_departments_html_erb___2562190764802266616_70028570395160'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e8bc11e47ef1a798/variables" for 127.0.0.1 at 2017-03-23 20:56:44 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 21:00:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (803.8ms)
Completed 500 Internal Server Error in 1001ms (ActiveRecord: 37.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `department' for #<#<Class:0x0055b5ddf57bc8>:0x007f42583eb268>
Did you mean?  department_url:
  app/views/users/departments.html.erb:78:in `_app_views_users_departments_html_erb___3209352357618243110_69961462555880'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c1d22c7009c95796/variables" for 127.0.0.1 at 2017-03-23 21:00:04 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 21:02:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (779.4ms)
Completed 500 Internal Server Error in 991ms (ActiveRecord: 41.3ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `user' for #<#<Class:0x007f7ea89d1c18>:0x007f7ec43ed240>
Did you mean?  @user:
  app/views/users/departments.html.erb:78:in `_app_views_users_departments_html_erb__2013463639238578615_70090985739500'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/969de1b74d87ba42/variables" for 127.0.0.1 at 2017-03-23 21:02:01 +0300
Started GET "/" for 127.0.0.1 at 2017-03-23 21:06:04 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (10.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (1.0ms)
  Rendered layouts/_layout_common_js.html.erb (3.2ms)
  Rendered layouts/_logoheader.html.erb (10.3ms)
  Rendered layouts/_navigation.html.erb (122.2ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2261ms (Views: 2243.0ms | ActiveRecord: 10.9ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-23 21:06:20 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (67.3ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (203.2ms)
  Rendered layouts/_layout_common_js.html.erb (7.0ms)
  Rendered layouts/_logoheader.html.erb (21.5ms)
  Rendered layouts/_navigation.html.erb (49.0ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 1137ms (Views: 1011.8ms | ActiveRecord: 80.9ms)


Started GET "/en/transporters/new" for 127.0.0.1 at 2017-03-23 21:06:25 +0300
Processing by TransportersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering transporters/new.html.erb within layouts/application
  [1m[36mOwnershipType Load (21.7ms)[0m  [1m[34mSELECT "ownership_types".* FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL ORDER BY "ownership_types"."name" ASC[0m
  Rendered transporters/_form.html.erb (119.4ms)
  Rendered transporters/new.html.erb within layouts/application (133.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (25.7ms)
  Rendered layouts/_navigation.html.erb (51.0ms)
  Rendered layouts/_topnavbar.html.erb (18.8ms)
  Rendered layouts/_footer.html.erb (1.3ms)
Completed 200 OK in 982ms (Views: 939.5ms | ActiveRecord: 28.7ms)


Started POST "/en/transporters" for 127.0.0.1 at 2017-03-23 21:06:45 +0300
Processing by TransportersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TBoGH4BuKbs6bfFM+gaUnKQQFXKkrJrFnKQrgIWlo4q1JbfkH7AhfEUnLosFAq5GsaIDH2KbWYNIxpitWRLWRg==", "transporter"=>{"name"=>"dd", "code"=>"", "contact"=>"", "contact_phone"=>"", "ownership_type_id"=>"", "vehicle_count"=>"", "lift_capacity"=>"", "capital"=>"", "employees"=>"", "remark"=>""}, "commit"=>"Create Transporter", "locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (10.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (20.8ms)[0m  [1m[32mINSERT INTO "transporters" ("name", "code", "contact", "contact_phone", "remark", "created_at", "updated_at", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "dd"], ["code", ""], ["contact", ""], ["contact_phone", ""], ["remark", ""], ["created_at", 2017-03-23 18:06:45 UTC], ["updated_at", 2017-03-23 18:06:45 UTC], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/transporters
Completed 302 Found in 73ms (ActiveRecord: 42.4ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-23 21:06:45 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (2.1ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (27.7ms)
  Rendered layouts/_layout_common_js.html.erb (8.3ms)
  Rendered layouts/_logoheader.html.erb (3.8ms)
  Rendered layouts/_navigation.html.erb (43.3ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 789ms (Views: 768.2ms | ActiveRecord: 3.0ms)


Started GET "/en/transporters/7" for 127.0.0.1 at 2017-03-23 21:06:52 +0300
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mTransporter Load (2.2ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (17.4ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 7]]
  Rendered transporters/show.html.erb within layouts/application (92.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (2.1ms)
  Rendered layouts/_navigation.html.erb (49.7ms)
  Rendered layouts/_topnavbar.html.erb (6.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 693ms (Views: 637.5ms | ActiveRecord: 28.9ms)


Started GET "/en/transporters/new" for 127.0.0.1 at 2017-03-23 21:07:34 +0300
Processing by TransportersController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering transporters/new.html.erb within layouts/application
  [1m[36mOwnershipType Load (2.4ms)[0m  [1m[34mSELECT "ownership_types".* FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL ORDER BY "ownership_types"."name" ASC[0m
  Rendered transporters/_form.html.erb (18.6ms)
  Rendered transporters/new.html.erb within layouts/application (21.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_navigation.html.erb (28.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 563ms (Views: 545.9ms | ActiveRecord: 12.1ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-23 21:07:59 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (5.8ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (19.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.1ms)
  Rendered layouts/_logoheader.html.erb (12.3ms)
  Rendered layouts/_navigation.html.erb (46.1ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (7.3ms)
Completed 200 OK in 707ms (Views: 675.4ms | ActiveRecord: 6.5ms)


Started GET "/en/transporters/8" for 127.0.0.1 at 2017-03-23 21:08:06 +0300
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"8"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mTransporter Load (10.0ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (5.5ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 8]]
  Rendered transporters/show.html.erb within layouts/application (14.5ms)
  Rendered layouts/_layout_common_js.html.erb (6.1ms)
  Rendered layouts/_logoheader.html.erb (2.9ms)
  Rendered layouts/_navigation.html.erb (39.6ms)
  Rendered layouts/_topnavbar.html.erb (10.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 677ms (Views: 647.6ms | ActiveRecord: 18.4ms)


Started GET "/en/transporters/7/edit" for 127.0.0.1 at 2017-03-23 21:08:45 +0300
Processing by TransportersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mTransporter Load (2.8ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/edit.html.erb within layouts/application
  [1m[36mOwnershipType Load (2.4ms)[0m  [1m[34mSELECT "ownership_types".* FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL ORDER BY "ownership_types"."name" ASC[0m
  Rendered transporters/_form.html.erb (38.9ms)
  Rendered transporters/edit.html.erb within layouts/application (45.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.6ms)
  Rendered layouts/_navigation.html.erb (48.6ms)
  Rendered layouts/_topnavbar.html.erb (18.2ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 718ms (Views: 698.0ms | ActiveRecord: 12.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 21:09:04 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (13.5ms)
  Rendered layouts/_headcontent.html.erb (551.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (56.3ms)
  Rendered layouts/_topnavbar.html.erb (11.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 696ms (Views: 680.5ms | ActiveRecord: 0.8ms)


Started GET "/en/programs" for 127.0.0.1 at 2017-03-23 21:09:10 +0300
Processing by ProgramsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering programs/index.html.erb within layouts/admin
  [1m[36mProgram Load (66.0ms)[0m  [1m[34mSELECT "programs".* FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  Rendered programs/index.html.erb within layouts/admin (112.1ms)
  Rendered layouts/_headcontent.html.erb (504.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (2.0ms)
  Rendered layouts/_settingnav.html.erb (121.6ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 825ms (Views: 716.7ms | ActiveRecord: 78.5ms)


Started GET "/en/currencies" for 127.0.0.1 at 2017-03-23 21:09:16 +0300
Processing by CurrenciesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering currencies/index.html.erb within layouts/admin
  [1m[36mCurrency Load (228.4ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  Rendered currencies/index.html.erb within layouts/admin (268.6ms)
  Rendered layouts/_headcontent.html.erb (431.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (46.5ms)
  Rendered layouts/_topnavbar.html.erb (10.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 803ms (Views: 537.4ms | ActiveRecord: 246.4ms)


Started GET "/en/organizations" for 127.0.0.1 at 2017-03-23 21:09:21 +0300
Processing by OrganizationsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering organizations/index.html.erb within layouts/admin
  [1m[36mOrganization Load (36.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."deleted_at" IS NULL[0m
  Rendered organizations/index.html.erb within layouts/admin (67.2ms)
  Rendered layouts/_headcontent.html.erb (462.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_settingnav.html.erb (40.0ms)
  Rendered layouts/_topnavbar.html.erb (2.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 631ms (Views: 575.3ms | ActiveRecord: 45.3ms)


Started GET "/en/programs" for 127.0.0.1 at 2017-03-23 21:09:36 +0300
Processing by ProgramsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering programs/index.html.erb within layouts/admin
  [1m[36mProgram Load (0.8ms)[0m  [1m[34mSELECT "programs".* FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  Rendered programs/index.html.erb within layouts/admin (5.7ms)
  Rendered layouts/_headcontent.html.erb (611.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.9ms)
  Rendered layouts/_settingnav.html.erb (41.0ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (6.3ms)
Completed 200 OK in 730ms (Views: 714.7ms | ActiveRecord: 1.7ms)


Started GET "/en/locations" for 127.0.0.1 at 2017-03-23 21:09:41 +0300
Processing by LocationsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Redirected to http://localhost:3000/en/locations/0
Completed 302 Found in 25ms (ActiveRecord: 1.9ms)


Started GET "/en/locations/0" for 127.0.0.1 at 2017-03-23 21:09:41 +0300
Processing by LocationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"0"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering locations/show.html.erb within layouts/admin
  [1m[36mLocation Load (294.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  Rendered locations/show.html.erb within layouts/admin (341.0ms)
  Rendered layouts/_headcontent.html.erb (540.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (10.3ms)
  Rendered layouts/_settingnav.html.erb (58.8ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 1023ms (Views: 695.0ms | ActiveRecord: 308.0ms)


Started GET "/en/fdps" for 127.0.0.1 at 2017-03-23 21:09:47 +0300
Processing by FdpsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering fdps/index.html.erb within layouts/admin
  [1m[36mFdp Load (38.3ms)[0m  [1m[34mSELECT "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.6ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mLocation Load (4.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  Rendered fdps/index.html.erb within layouts/admin (90.1ms)
  Rendered layouts/_headcontent.html.erb (587.3ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (11.8ms)
  Rendered layouts/_settingnav.html.erb (65.2ms)
  Rendered layouts/_topnavbar.html.erb (8.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 840ms (Views: 774.1ms | ActiveRecord: 52.2ms)


Started GET "/en/locations" for 127.0.0.1 at 2017-03-23 21:09:57 +0300
Processing by LocationsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Redirected to http://localhost:3000/en/locations/0
Completed 302 Found in 22ms (ActiveRecord: 7.6ms)


Started GET "/en/locations/0" for 127.0.0.1 at 2017-03-23 21:09:58 +0300
Processing by LocationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"0"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering locations/show.html.erb within layouts/admin
  [1m[36mLocation Load (2.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  Rendered locations/show.html.erb within layouts/admin (21.3ms)
  Rendered layouts/_headcontent.html.erb (550.6ms)
  Rendered layouts/_layout_common_js.html.erb (1.1ms)
  Rendered layouts/_logoheader.html.erb (10.2ms)
  Rendered layouts/_settingnav.html.erb (59.4ms)
  Rendered layouts/_topnavbar.html.erb (8.9ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 706ms (Views: 680.8ms | ActiveRecord: 3.8ms)


Started POST "/locations" for 127.0.0.1 at 2017-03-23 21:10:12 +0300
Processing by LocationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hrX8Sx6oFkir0nsmDQYV0JfAikScAaL2qq0XWeLd6ol/ik2wgXYej9SYpOHyAi8KgnKcKVo2YbB+z6R0PmqfRQ==", "name"=>"b", "parent_id"=>"0"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (24.9ms)[0m  [1m[32mINSERT INTO "locations" ("name", "created_at", "updated_at", "location_type", "created_by", "modified_by") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "b"], ["created_at", 2017-03-23 18:10:12 UTC], ["updated_at", 2017-03-23 18:10:12 UTC], ["location_type", 1], ["created_by", 18], ["modified_by", 18]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/locations/0
Completed 302 Found in 55ms (ActiveRecord: 33.4ms)


Started GET "/en/locations/0" for 127.0.0.1 at 2017-03-23 21:10:12 +0300
Processing by LocationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"0"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering locations/show.html.erb within layouts/admin
  [1m[36mLocation Load (7.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  Rendered locations/show.html.erb within layouts/admin (16.7ms)
  Rendered layouts/_headcontent.html.erb (490.0ms)
  Rendered layouts/_layout_common_js.html.erb (3.3ms)
  Rendered layouts/_logoheader.html.erb (4.0ms)
  Rendered layouts/_settingnav.html.erb (32.6ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 605ms (Views: 587.4ms | ActiveRecord: 11.4ms)


Started GET "/en/locations/7" for 127.0.0.1 at 2017-03-23 21:10:18 +0300
Processing by LocationsController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mLocation Load (5.3ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering locations/show.html.erb within layouts/admin
  [1m[36mLocation Load (4.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND 1=0 ORDER BY coalesce("locations"."ancestry", '')[0m
  [1m[36mLocation Load (2.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."ancestry" = '7'[0m
  Rendered locations/show.html.erb within layouts/admin (22.8ms)
  Rendered layouts/_headcontent.html.erb (544.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_settingnav.html.erb (47.1ms)
  Rendered layouts/_topnavbar.html.erb (4.4ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 693ms (Views: 654.6ms | ActiveRecord: 20.7ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 21:10:49 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (20.2ms)
  Rendered layouts/_headcontent.html.erb (573.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.0ms)
  Rendered layouts/_logoheader.html.erb (10.3ms)
  Rendered layouts/_settingnav.html.erb (38.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 722ms (Views: 704.1ms | ActiveRecord: 3.6ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-23 21:12:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (44.7ms)
  Rendered layouts/_headcontent.html.erb (2556.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (68.4ms)
  Rendered layouts/_topnavbar.html.erb (9.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3002ms (Views: 2728.5ms | ActiveRecord: 33.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 21:13:07 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (12.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (200.5ms)
  Rendered layouts/_headcontent.html.erb (532.1ms)
  Rendered layouts/_layout_common_js.html.erb (3.6ms)
  Rendered layouts/_logoheader.html.erb (4.6ms)
  Rendered layouts/_settingnav.html.erb (53.1ms)
  Rendered layouts/_topnavbar.html.erb (6.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 870ms (Views: 807.7ms | ActiveRecord: 47.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 21:13:12 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (11.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (716.5ms)
Completed 500 Internal Server Error in 756ms (ActiveRecord: 24.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `user' for #<#<Class:0x007fafc82434c8>:0x007fafc81f35b8>
Did you mean?  @user:
  app/views/users/departments.html.erb:78:in `_app_views_users_departments_html_erb__1548944713809439955_70196476731540'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/62615ff90dcc025b/variables" for 127.0.0.1 at 2017-03-23 21:13:13 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-23 21:36:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (155.6ms)
  Rendered layouts/_headcontent.html.erb (2000.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (39.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2390ms (Views: 2231.7ms | ActiveRecord: 28.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 21:36:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (176.6ms)
  Rendered layouts/_headcontent.html.erb (392.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.2ms)
  Rendered layouts/_settingnav.html.erb (44.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 674ms (Views: 618.2ms | ActiveRecord: 31.7ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-23 22:23:30 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (25.0ms)
  Rendered departments/new.html.erb within layouts/admin (27.8ms)
  Rendered layouts/_headcontent.html.erb (333.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (2.2ms)
  Rendered layouts/_settingnav.html.erb (41.0ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 469ms (Views: 456.2ms | ActiveRecord: 4.3ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-23 22:24:17 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (8.6ms)
  Rendered layouts/_headcontent.html.erb (399.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (40.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 497ms (Views: 483.4ms | ActiveRecord: 7.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 22:24:53 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (54.5ms)
  Rendered layouts/_headcontent.html.erb (413.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_settingnav.html.erb (36.3ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 569ms (Views: 543.7ms | ActiveRecord: 9.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 22:24:58 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (8.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (72.6ms)
  Rendered layouts/_headcontent.html.erb (353.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.7ms)
  Rendered layouts/_settingnav.html.erb (26.3ms)
  Rendered layouts/_topnavbar.html.erb (6.8ms)
  Rendered layouts/_footer.html.erb (8.8ms)
Completed 200 OK in 524ms (Views: 482.7ms | ActiveRecord: 28.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 22:26:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  Rendered users/index.html.erb within layouts/admin (8.4ms)
Completed 500 Internal Server Error in 159ms (ActiveRecord: 16.5ms)



SyntaxError - syntax error, unexpected keyword_end, expecting ')'
'.freeze;           end 
                       ^
/home/dawit/cats/cats-web/app/views/users/index.html.erb:62: syntax error, unexpected keyword_ensure, expecting ')'
/home/dawit/cats/cats-web/app/views/users/index.html.erb:64: syntax error, unexpected keyword_end, expecting ')':
  app/views/users/index.html.erb:54:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8a2739dd9a91043f/variables" for 127.0.0.1 at 2017-03-23 22:26:36 +0300
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-23 22:27:02 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (134.5ms)
  Rendered layouts/_headcontent.html.erb (2031.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (8.9ms)
  Rendered layouts/_settingnav.html.erb (41.6ms)
  Rendered layouts/_topnavbar.html.erb (4.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2400ms (Views: 2245.0ms | ActiveRecord: 30.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 22:27:17 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (204.2ms)
  Rendered layouts/_headcontent.html.erb (405.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.1ms)
  Rendered layouts/_settingnav.html.erb (45.5ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 721ms (Views: 646.5ms | ActiveRecord: 46.3ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-23 22:27:46 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (7.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (91.8ms)
  Rendered layouts/_headcontent.html.erb (344.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (14.2ms)
  Rendered layouts/_settingnav.html.erb (33.8ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 528ms (Views: 482.9ms | ActiveRecord: 24.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 22:28:03 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (12.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (60.2ms)
  Rendered layouts/_headcontent.html.erb (423.7ms)
  Rendered layouts/_layout_common_js.html.erb (1.1ms)
  Rendered layouts/_logoheader.html.erb (5.1ms)
  Rendered layouts/_settingnav.html.erb (44.6ms)
  Rendered layouts/_topnavbar.html.erb (3.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 563ms (Views: 525.1ms | ActiveRecord: 32.4ms)


Started GET "/users/18/departments" for 127.0.0.1 at 2017-03-23 22:28:10 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (7.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (10.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (99.9ms)
  Rendered layouts/_headcontent.html.erb (373.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (38.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 583ms (Views: 523.9ms | ActiveRecord: 43.0ms)


Started GET "/" for 127.0.0.1 at 2017-03-23 22:49:33 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/05f6809ce8b3135d/variables" for 127.0.0.1 at 2017-03-23 22:49:33 +0300
Started GET "/" for 127.0.0.1 at 2017-03-23 22:50:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (1.7ms)
  Rendered layouts/_layout_common_js.html.erb (6.4ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_navigation.html.erb (56.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2434ms (Views: 2326.0ms | ActiveRecord: 14.8ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-23 22:50:29 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.3ms)
  Rendered layouts/_headcontent.html.erb (465.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (4.4ms)
  Rendered layouts/_settingnav.html.erb (44.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (2.4ms)
Completed 200 OK in 586ms (Views: 571.4ms | ActiveRecord: 2.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 22:50:34 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (158.2ms)
  Rendered layouts/_headcontent.html.erb (375.5ms)
  Rendered layouts/_layout_common_js.html.erb (5.8ms)
  Rendered layouts/_logoheader.html.erb (15.2ms)
  Rendered layouts/_settingnav.html.erb (33.6ms)
  Rendered layouts/_topnavbar.html.erb (12.1ms)
  Rendered layouts/_footer.html.erb (4.7ms)
Completed 200 OK in 637ms (Views: 607.3ms | ActiveRecord: 18.7ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-23 22:50:38 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (60.4ms)
  Rendered layouts/_headcontent.html.erb (480.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  Rendered layouts/_settingnav.html.erb (41.3ms)
  Rendered layouts/_topnavbar.html.erb (4.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 669ms (Views: 631.3ms | ActiveRecord: 18.4ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-23 22:51:43 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (125.8ms)
  Rendered layouts/_headcontent.html.erb (2251.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (12.6ms)
  Rendered layouts/_settingnav.html.erb (97.2ms)
  Rendered layouts/_topnavbar.html.erb (14.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2658ms (Views: 2509.1ms | ActiveRecord: 31.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-23 22:51:59 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (75.0ms)
  Rendered layouts/_headcontent.html.erb (457.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (17.3ms)
  Rendered layouts/_settingnav.html.erb (51.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 637ms (Views: 603.0ms | ActiveRecord: 21.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 22:52:03 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 3.1ms)



SyntaxError - syntax error, unexpected ':', expecting keyword_end
    has_many: permissions
             ^:
  app/models/department.rb:6:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/dependencies.rb:543:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:41:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7207b0c5c35c0e2d/variables" for 127.0.0.1 at 2017-03-23 22:52:03 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-23 22:52:38 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (10.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (8.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (9.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (241.1ms)
  Rendered layouts/_headcontent.html.erb (2164.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (16.0ms)
  Rendered layouts/_settingnav.html.erb (85.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2715ms (Views: 2489.8ms | ActiveRecord: 69.8ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 10:48:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (30.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (67.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (18.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (18.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (34.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (7.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (416.5ms)
  Rendered layouts/_headcontent.html.erb (3070.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (165.8ms)
  Rendered layouts/_topnavbar.html.erb (11.2ms)
  Rendered layouts/_footer.html.erb (2.0ms)
Completed 200 OK in 4240ms (Views: 3676.2ms | ActiveRecord: 356.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 10:58:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (11.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (64.5ms)
Completed 500 Internal Server Error in 255ms (ActiveRecord: 26.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `each' for #<ActiveRecord::QueryMethods::WhereChain:0x007f143098e1a8>:
  app/views/users/departments.html.erb:10:in `block in _app_views_users_departments_html_erb___1328043429364022415_69862345697000'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:5:in `_app_views_users_departments_html_erb___1328043429364022415_69862345697000'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dc033094e57be7c0/variables" for 127.0.0.1 at 2017-03-24 10:58:41 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 10:58:50 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (232.8ms)
  Rendered layouts/_headcontent.html.erb (2434.7ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (90.1ms)
  Rendered layouts/_topnavbar.html.erb (3.2ms)
  Rendered layouts/_footer.html.erb (6.7ms)
Completed 200 OK in 2889ms (Views: 2795.4ms | ActiveRecord: 32.1ms)


Started GET "/" for 127.0.0.1 at 2017-03-24 10:59:41 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (6.2ms)
  Rendered layouts/_logoheader.html.erb (9.7ms)
  Rendered layouts/_navigation.html.erb (30.3ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 585ms (Views: 561.2ms | ActiveRecord: 8.4ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-24 10:59:45 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.8ms)
  Rendered layouts/_headcontent.html.erb (412.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (49.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 512ms (Views: 500.4ms | ActiveRecord: 1.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-24 10:59:51 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (42.6ms)
  Rendered layouts/_headcontent.html.erb (507.1ms)
  Rendered layouts/_layout_common_js.html.erb (5.3ms)
  Rendered layouts/_logoheader.html.erb (12.5ms)
  Rendered layouts/_settingnav.html.erb (39.5ms)
  Rendered layouts/_topnavbar.html.erb (6.0ms)
  Rendered layouts/_footer.html.erb (6.4ms)
Completed 200 OK in 655ms (Views: 624.3ms | ActiveRecord: 12.0ms)


Started GET "/users/21/userDepartment" for 127.0.0.1 at 2017-03-24 10:59:56 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartment"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [309 times] (285.0ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (53.7ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (569.3ms)
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:05:31 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (13.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (10.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (165.0ms)
  Rendered layouts/_headcontent.html.erb (2066.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.6ms)
  Rendered layouts/_settingnav.html.erb (41.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2484ms (Views: 2296.3ms | ActiveRecord: 42.8ms)


Started GET "/users/21/userDepartment" for 127.0.0.1 at 2017-03-24 11:05:59 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartment"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (6.4ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (300.0ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (39.1ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (507.5ms)
Started GET "/users/21/userDepartment" for 127.0.0.1 at 2017-03-24 11:06:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartment"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (209.9ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (36.4ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (25.1ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (412.1ms)
Started GET "/users/21/userDepartment" for 127.0.0.1 at 2017-03-24 11:06:53 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartment"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (220.6ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (359.7ms)
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:07:03 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (10.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (169.5ms)
  Rendered layouts/_headcontent.html.erb (1914.5ms)
  Rendered layouts/_layout_common_js.html.erb (5.4ms)
  Rendered layouts/_logoheader.html.erb (5.0ms)
  Rendered layouts/_settingnav.html.erb (138.5ms)
  Rendered layouts/_topnavbar.html.erb (6.0ms)
  Rendered layouts/_footer.html.erb (6.3ms)
Completed 200 OK in 2432ms (Views: 2252.0ms | ActiveRecord: 37.5ms)


Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:07:11 +0300

ActionController::RoutingError - uninitialized constant UserController:
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:46:in `rescue in controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/25fbd0bfadf3794d/variables" for 127.0.0.1 at 2017-03-24 11:07:11 +0300
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:10:15 +0300

ActionController::RoutingError - uninitialized constant UserController:
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:46:in `rescue in controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a9b79dad95ba5869/variables" for 127.0.0.1 at 2017-03-24 11:10:15 +0300
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:10:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (7.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError - uninitialized constant UserController:
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:46:in `rescue in controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/54f31bf847653b18/variables" for 127.0.0.1 at 2017-03-24 11:10:26 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:10:34 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (169.9ms)
  Rendered layouts/_headcontent.html.erb (1976.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.1ms)
  Rendered layouts/_settingnav.html.erb (39.8ms)
  Rendered layouts/_topnavbar.html.erb (9.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2415ms (Views: 2227.5ms | ActiveRecord: 33.0ms)


Started GET "/users/21/userDepartments" for 127.0.0.1 at 2017-03-24 11:10:41 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (230.5ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (23.2ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (412.4ms)
Started GET "/users/21/userDepartments" for 127.0.0.1 at 2017-03-24 11:11:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (216.5ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (24.8ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (20.6ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (415.4ms)
Started GET "/users/21/userDepartments" for 127.0.0.1 at 2017-03-24 11:11:26 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (185.6ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (328.0ms)
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:11:31 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (181.5ms)
  Rendered layouts/_headcontent.html.erb (1811.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.7ms)
  Rendered layouts/_logoheader.html.erb (18.8ms)
  Rendered layouts/_settingnav.html.erb (120.7ms)
  Rendered layouts/_topnavbar.html.erb (7.7ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 2339ms (Views: 2146.5ms | ActiveRecord: 40.6ms)


Started GET "/users/21/userDepartments" for 127.0.0.1 at 2017-03-24 11:11:40 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.5ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (234.0ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (4.3ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (376.4ms)
Started GET "/users/21/userDepartments" for 127.0.0.1 at 2017-03-24 11:12:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#userDepartments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 406 Not Acceptable in 192ms (ActiveRecord: 12.2ms)



ActionController::UnknownFormat - UsersController#userDepartments is missing a template for this request format and variant.

request.formats: ["text/html"]
request.variant: []

NOTE! For XHR/Ajax or API requests, this action would normally respond with 204 No Content: an empty white screen. Since you're loading it in a web browser, we assume that you expected to actually render a template, not nothing, so we're showing an error to be extra-clear. If you expect 204 No Content, carry on. That's what you'll get from an XHR or API request. Give it a shot.:
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:56:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/359030ee4f26f7e1/variables" for 127.0.0.1 at 2017-03-24 11:12:22 +0300
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:13:59 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (154.9ms)
  Rendered layouts/_headcontent.html.erb (2205.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (12.7ms)
  Rendered layouts/_settingnav.html.erb (57.7ms)
  Rendered layouts/_topnavbar.html.erb (14.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2650ms (Views: 2476.7ms | ActiveRecord: 20.4ms)


Started GET "/users/21/userDepartments" for 127.0.0.1 at 2017-03-24 11:14:06 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/userDepartments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (229.8ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (33.0ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (409.0ms)
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:14:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (138.1ms)
  Rendered layouts/_headcontent.html.erb (2049.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  Rendered layouts/_settingnav.html.erb (51.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2446ms (Views: 2266.9ms | ActiveRecord: 35.2ms)


Started GET "/users/21/user_department" for 127.0.0.1 at 2017-03-24 11:14:39 +0300
Processing by UsersController#user_department as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_department.html.erb within layouts/admin
  Rendered users/user_department.html.erb within layouts/admin (20.3ms)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 3.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/user_department.html.erb:3:in `_app_views_users_user_department_html_erb__3607901846497468444_47428119161240'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e2b41ca61b7634a4/variables" for 127.0.0.1 at 2017-03-24 11:14:39 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/user_department" for 127.0.0.1 at 2017-03-24 11:21:15 +0300
Processing by UsersController#user_department as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_department.html.erb within layouts/admin
  Rendered users/user_department.html.erb within layouts/admin (19.6ms)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 2.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/user_department.html.erb:3:in `_app_views_users_user_department_html_erb__3607901846497468444_70070681168060'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/fcc26e464477b258/variables" for 127.0.0.1 at 2017-03-24 11:21:16 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/user_department" for 127.0.0.1 at 2017-03-24 11:25:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [GET] "/users/21/user_department"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (217.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (16.9ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (24.6ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (421.8ms)
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:25:38 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (137.6ms)
  Rendered layouts/_headcontent.html.erb (2003.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (48.6ms)
  Rendered layouts/_topnavbar.html.erb (4.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2359ms (Views: 2224.0ms | ActiveRecord: 27.4ms)


Started GET "/users/21/UsersDepartment" for 127.0.0.1 at 2017-03-24 11:25:43 +0300
Processing by UsersController#UsersDepartment as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 406 Not Acceptable in 79ms (ActiveRecord: 2.3ms)



ActionController::UnknownFormat - UsersController#UsersDepartment is missing a template for this request format and variant.

request.formats: ["text/html"]
request.variant: []

NOTE! For XHR/Ajax or API requests, this action would normally respond with 204 No Content: an empty white screen. Since you're loading it in a web browser, we assume that you expected to actually render a template, not nothing, so we're showing an error to be extra-clear. If you expect 204 No Content, carry on. That's what you'll get from an XHR or API request. Give it a shot.:
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:56:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3973b63440fb8963/variables" for 127.0.0.1 at 2017-03-24 11:25:44 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/UsersDepartment" for 127.0.0.1 at 2017-03-24 11:26:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#UsersDepartment as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/UsersDepartment.html.erb within layouts/admin
  Rendered users/UsersDepartment.html.erb within layouts/admin (14.2ms)
Completed 500 Internal Server Error in 165ms (ActiveRecord: 14.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/UsersDepartment.html.erb:3:in `_app_views_users__sers_epartment_html_erb___3649024710240330429_70010854743380'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/401d6bcf5549af3c/variables" for 127.0.0.1 at 2017-03-24 11:26:20 +0300
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:28:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (9.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (145.7ms)
  Rendered layouts/_headcontent.html.erb (2007.6ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (32.1ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2411ms (Views: 2231.6ms | ActiveRecord: 31.2ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:28:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (97.1ms)
  Rendered layouts/_headcontent.html.erb (404.2ms)
  Rendered layouts/_layout_common_js.html.erb (6.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (44.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 640ms (Views: 571.5ms | ActiveRecord: 34.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:30:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (6.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (185.2ms)
  Rendered layouts/_headcontent.html.erb (2472.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  Rendered layouts/_settingnav.html.erb (44.7ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2916ms (Views: 2724.1ms | ActiveRecord: 43.5ms)


Started GET "/users/21/users_departments" for 127.0.0.1 at 2017-03-24 11:30:34 +0300
Processing by UsersController#users_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 406 Not Acceptable in 86ms (ActiveRecord: 2.6ms)



ActionController::UnknownFormat - UsersController#users_departments is missing a template for this request format and variant.

request.formats: ["text/html"]
request.variant: []

NOTE! For XHR/Ajax or API requests, this action would normally respond with 204 No Content: an empty white screen. Since you're loading it in a web browser, we assume that you expected to actually render a template, not nothing, so we're showing an error to be extra-clear. If you expect 204 No Content, carry on. That's what you'll get from an XHR or API request. Give it a shot.:
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:56:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ca6bb9b2a881e912/variables" for 127.0.0.1 at 2017-03-24 11:30:34 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/users_departments" for 127.0.0.1 at 2017-03-24 11:31:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#users_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/users_departments.html.erb within layouts/admin
  Rendered users/users_departments.html.erb within layouts/admin (16.4ms)
Completed 500 Internal Server Error in 174ms (ActiveRecord: 11.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/users_departments.html.erb:3:in `_app_views_users_users_departments_html_erb___3044070958784268542_69959784889500'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0455e80bf5bf0807/variables" for 127.0.0.1 at 2017-03-24 11:31:12 +0300
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:35:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (167.3ms)
  Rendered layouts/_headcontent.html.erb (2003.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (11.7ms)
  Rendered layouts/_settingnav.html.erb (51.8ms)
  Rendered layouts/_topnavbar.html.erb (8.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2414ms (Views: 2253.7ms | ActiveRecord: 16.5ms)


Started GET "/users/21/UsersDepartments" for 127.0.0.1 at 2017-03-24 11:36:05 +0300
Processing by UsersController#UsersDepartments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 406 Not Acceptable in 94ms (ActiveRecord: 3.9ms)



ActionController::UnknownFormat - UsersController#UsersDepartments is missing a template for this request format and variant.

request.formats: ["text/html"]
request.variant: []

NOTE! For XHR/Ajax or API requests, this action would normally respond with 204 No Content: an empty white screen. Since you're loading it in a web browser, we assume that you expected to actually render a template, not nothing, so we're showing an error to be extra-clear. If you expect 204 No Content, carry on. That's what you'll get from an XHR or API request. Give it a shot.:
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:56:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/82b8a996acc8f99a/variables" for 127.0.0.1 at 2017-03-24 11:36:05 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/UsersDepartments" for 127.0.0.1 at 2017-03-24 11:36:39 +0300
Processing by UsersController#UsersDepartments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/UsersDepartments.html.erb within layouts/admin
  Rendered users/UsersDepartments.html.erb within layouts/admin (21.3ms)
Completed 500 Internal Server Error in 47ms (ActiveRecord: 2.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/UsersDepartments.html.erb:3:in `_app_views_users__sers_epartments_html_erb___4091145488407506394_47278811953760'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e456006b0b5969db/variables" for 127.0.0.1 at 2017-03-24 11:36:39 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:40:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (146.9ms)
  Rendered layouts/_headcontent.html.erb (1922.1ms)
  Rendered layouts/_layout_common_js.html.erb (5.1ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_settingnav.html.erb (38.2ms)
  Rendered layouts/_topnavbar.html.erb (12.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2321ms (Views: 2154.5ms | ActiveRecord: 24.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:40:28 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (142.7ms)
Completed 500 Internal Server Error in 195ms (ActiveRecord: 29.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `each' for nil:NilClass:
  app/views/users/departments.html.erb:135:in `block in _app_views_users_departments_html_erb__3300693294338584760_69952904881160'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_tag_helper.rb:70:in `form_tag'
  app/views/users/departments.html.erb:130:in `_app_views_users_departments_html_erb__3300693294338584760_69952904881160'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9ee5e793867705a4/variables" for 127.0.0.1 at 2017-03-24 11:40:29 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:41:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (8.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (6.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (250.2ms)
  Rendered layouts/_headcontent.html.erb (1960.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.8ms)
  Rendered layouts/_settingnav.html.erb (86.5ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2550ms (Views: 2320.2ms | ActiveRecord: 55.0ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-24 11:42:09 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (33.7ms)
  Rendered departments/new.html.erb within layouts/admin (58.7ms)
  Rendered layouts/_headcontent.html.erb (418.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.7ms)
  Rendered layouts/_settingnav.html.erb (45.7ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 602ms (Views: 568.9ms | ActiveRecord: 2.1ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:44:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (9.1ms)
Completed 500 Internal Server Error in 215ms (ActiveRecord: 16.8ms)



SyntaxError - syntax error, unexpected keyword_end, expecting end-of-input
'.freeze;       end 
                   ^:
  app/views/users/departments.html.erb:147:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/aeaadf160ab84d5c/variables" for 127.0.0.1 at 2017-03-24 11:44:41 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-24 11:46:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (140.8ms)
  Rendered layouts/_headcontent.html.erb (2039.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (44.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2435ms (Views: 2268.5ms | ActiveRecord: 35.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:47:05 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (1.9ms)
Completed 500 Internal Server Error in 50ms (ActiveRecord: 12.2ms)



SyntaxError - syntax error, unexpected ','
...users/#{user.id}/departments"%, :class => "btn btn-success")...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:93: syntax error, unexpected keyword_do_block, expecting keyword_end
'.freeze;             @all_departments.each do |department| 
                                              ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:147: syntax error, unexpected keyword_end, expecting end-of-input
'.freeze;       end 
                   ^:
  app/views/users/departments.html.erb:84:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d859e3f2155e25a4/variables" for 127.0.0.1 at 2017-03-24 11:47:05 +0300
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:47:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (1.7ms)
Completed 500 Internal Server Error in 200ms (ActiveRecord: 26.8ms)



SyntaxError - syntax error, unexpected keyword_ensure, expecting end-of-input:
  app/views/users/departments.html.erb:153:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8dd02184d26e47ae/variables" for 127.0.0.1 at 2017-03-24 11:47:45 +0300
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:48:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (1.8ms)
Completed 500 Internal Server Error in 197ms (ActiveRecord: 7.8ms)



SyntaxError - syntax error, unexpected keyword_ensure, expecting end-of-input:
  app/views/users/departments.html.erb:153:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a5c80e8ce6b23f0b/variables" for 127.0.0.1 at 2017-03-24 11:48:20 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:49:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered users/departments.html.erb within layouts/admin (695.2ms)
Completed 500 Internal Server Error in 914ms (ActiveRecord: 45.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `user' for #<#<Class:0x007fcb309da258>:0x007fcb503e58a0>
Did you mean?  @user:
  app/views/users/departments.html.erb:84:in `_app_views_users_departments_html_erb___3094746544184266988_70255335364620'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0222acc90b68d634/variables" for 127.0.0.1 at 2017-03-24 11:49:56 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:51:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (12.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (258.5ms)
  Rendered layouts/_headcontent.html.erb (2525.2ms)
  Rendered layouts/_layout_common_js.html.erb (9.2ms)
  Rendered layouts/_logoheader.html.erb (17.4ms)
  Rendered layouts/_settingnav.html.erb (135.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3180ms (Views: 2940.7ms | ActiveRecord: 73.4ms)


Started GET "/users/@user.id/departments" for 127.0.0.1 at 2017-03-24 11:51:34 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/@user.id/departments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [310 times] (239.8ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (23.4ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.6ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (416.9ms)
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:52:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (9.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (272.7ms)
  Rendered layouts/_headcontent.html.erb (2341.2ms)
  Rendered layouts/_layout_common_js.html.erb (10.1ms)
  Rendered layouts/_logoheader.html.erb (18.1ms)
  Rendered layouts/_settingnav.html.erb (118.5ms)
  Rendered layouts/_topnavbar.html.erb (12.0ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 2978ms (Views: 2763.9ms | ActiveRecord: 52.6ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:52:33 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (10.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (12.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (17.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (104.2ms)
  Rendered layouts/_headcontent.html.erb (490.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (19.8ms)
  Rendered layouts/_settingnav.html.erb (53.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 728ms (Views: 648.1ms | ActiveRecord: 70.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 11:54:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (335.3ms)
  Rendered layouts/_headcontent.html.erb (3121.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  Rendered layouts/_settingnav.html.erb (133.8ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3883ms (Views: 3609.8ms | ActiveRecord: 69.2ms)


Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:55:01 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  Rendered users/user_departments.html.erb within layouts/admin (15.9ms)
Completed 500 Internal Server Error in 52ms (ActiveRecord: 5.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/user_departments.html.erb:3:in `_app_views_users_user_departments_html_erb__971733768273306870_69942234589400'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0c325cb4d8003d2b/variables" for 127.0.0.1 at 2017-03-24 11:55:02 +0300
  [1m[36mDepartment Load (3.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:57:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 166ms (ActiveRecord: 18.8ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:40:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6e55ea43aabff6b4/variables" for 127.0.0.1 at 2017-03-24 11:57:11 +0300
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:57:49 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 183ms (ActiveRecord: 22.1ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:40:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a731fa26fbaf461c/variables" for 127.0.0.1 at 2017-03-24 11:57:50 +0300
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 11:58:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 174ms (ActiveRecord: 15.5ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:40:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8573f43fd0545f96/variables" for 127.0.0.1 at 2017-03-24 11:58:23 +0300
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 12:00:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 150ms (ActiveRecord: 8.3ms)



NoMethodError - undefined method `id' for :user:Symbol:
  app/controllers/users_controller.rb:40:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9ad38d481a952ff5/variables" for 127.0.0.1 at 2017-03-24 12:00:55 +0300
Started GET "/users/21/user_departments" for 127.0.0.1 at 2017-03-24 12:01:12 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 21ms (ActiveRecord: 6.2ms)



NoMethodError - undefined method `id' for :user:Symbol:
  app/controllers/users_controller.rb:40:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/01dd6d2e89c30f51/variables" for 127.0.0.1 at 2017-03-24 12:01:13 +0300
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 14:40:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (8.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (11.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (251.8ms)
  Rendered layouts/_headcontent.html.erb (2090.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.2ms)
  Rendered layouts/_settingnav.html.erb (93.1ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2641ms (Views: 2429.1ms | ActiveRecord: 69.1ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:40:18 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 18ms (ActiveRecord: 1.4ms)



NoMethodError - undefined method `id' for :user:Symbol:
  app/controllers/users_controller.rb:40:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ec9ec7d07cc7049b/variables" for 127.0.0.1 at 2017-03-24 14:40:18 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:40:49 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1[0m  [["id", 21]]
  Rendered users/user_departments.html.erb within layouts/admin (67.4ms)
Completed 500 Internal Server Error in 246ms (ActiveRecord: 20.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `departments' for #<User::ActiveRecord_Relation:0x007fe62cacc208>:
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:124:in `method_missing'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:94:in `method_missing'
  app/views/users/user_departments.html.erb:42:in `block in _app_views_users_user_departments_html_erb___1216398985210456589_70313284444960'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:38:in `each'
  app/views/users/user_departments.html.erb:39:in `_app_views_users_user_departments_html_erb___1216398985210456589_70313284444960'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bce207e08cb4cd5c/variables" for 127.0.0.1 at 2017-03-24 14:40:50 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:43:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/user_departments.html.erb within layouts/admin (47.4ms)
  Rendered layouts/_headcontent.html.erb (1925.2ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (47.8ms)
  Rendered layouts/_topnavbar.html.erb (7.8ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 2240ms (Views: 2053.4ms | ActiveRecord: 29.5ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:43:38 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/user_departments.html.erb within layouts/admin (12.7ms)
  Rendered layouts/_headcontent.html.erb (411.7ms)
  Rendered layouts/_layout_common_js.html.erb (2.4ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_settingnav.html.erb (50.4ms)
  Rendered layouts/_topnavbar.html.erb (7.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 539ms (Views: 520.3ms | ActiveRecord: 4.2ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:43:44 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (7.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/user_departments.html.erb within layouts/admin (9.7ms)
  Rendered layouts/_headcontent.html.erb (510.0ms)
  Rendered layouts/_layout_common_js.html.erb (11.9ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (62.5ms)
  Rendered layouts/_topnavbar.html.erb (7.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 654ms (Views: 633.0ms | ActiveRecord: 11.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 14:46:57 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (11.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (7.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (298.6ms)
  Rendered layouts/_headcontent.html.erb (389.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.9ms)
  Rendered layouts/_settingnav.html.erb (72.8ms)
  Rendered layouts/_topnavbar.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 980ms (Views: 771.4ms | ActiveRecord: 44.4ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 14:47:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (259.2ms)
  Rendered layouts/_headcontent.html.erb (2133.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (8.5ms)
  Rendered layouts/_settingnav.html.erb (107.6ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2735ms (Views: 2505.5ms | ActiveRecord: 57.9ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:47:24 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 201ms (ActiveRecord: 6.9ms)



NoMethodError - undefined method `put' for #<UsersController:0x007f03ab5f7160>
Did you mean?  puts
               putc:
  app/controllers/users_controller.rb:41:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/72dd0cb6fbde9b8f/variables" for 127.0.0.1 at 2017-03-24 14:47:25 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:47:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/user_departments.html.erb within layouts/admin (46.6ms)
  Rendered layouts/_headcontent.html.erb (2155.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  Rendered layouts/_settingnav.html.erb (51.0ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2511ms (Views: 2308.7ms | ActiveRecord: 30.3ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-24 14:49:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (286.4ms)
  Rendered layouts/_headcontent.html.erb (2057.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  Rendered layouts/_settingnav.html.erb (81.0ms)
  Rendered layouts/_topnavbar.html.erb (14.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2660ms (Views: 2422.1ms | ActiveRecord: 65.9ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:49:32 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/user_departments.html.erb within layouts/admin (9.9ms)
  Rendered layouts/_headcontent.html.erb (471.4ms)
  Rendered layouts/_layout_common_js.html.erb (12.2ms)
  Rendered layouts/_logoheader.html.erb (13.7ms)
  Rendered layouts/_settingnav.html.erb (44.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 625ms (Views: 586.0ms | ActiveRecord: 11.1ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:50:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (159.8ms)
  Rendered layouts/_headcontent.html.erb (2192.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (67.0ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2658ms (Views: 2455.9ms | ActiveRecord: 47.5ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:54:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (10.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (145.3ms)
  Rendered layouts/_headcontent.html.erb (2117.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_settingnav.html.erb (49.6ms)
  Rendered layouts/_topnavbar.html.erb (9.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2581ms (Views: 2350.6ms | ActiveRecord: 34.6ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 14:54:27 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"51KENWPFywLVct7ZasELJ1h/zXJZ0kJdOPEJGwyZBugebTXO/BvDxao4AR6VxTH9Tc3bH5/lgRvsk7o20C5zJA==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (9.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 35ms (ActiveRecord: 14.3ms)



ActionController::ParameterMissing - param is missing or the value is empty: departments:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:52:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f16e2b40cf796119/variables" for 127.0.0.1 at 2017-03-24 14:54:27 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 14:55:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"51KENWPFywLVct7ZasELJ1h/zXJZ0kJdOPEJGwyZBugebTXO/BvDxao4AR6VxTH9Tc3bH5/lgRvsk7o20C5zJA==", "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 400 Bad Request in 137ms (ActiveRecord: 22.1ms)



ActionController::ParameterMissing - param is missing or the value is empty: departments:
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:309:in `require'
  app/controllers/users_controller.rb:52:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e7b1f497390a3959/variables" for 127.0.0.1 at 2017-03-24 14:55:14 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 14:55:22 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (216.2ms)
  Rendered layouts/_headcontent.html.erb (1967.4ms)
  Rendered layouts/_layout_common_js.html.erb (15.0ms)
  Rendered layouts/_logoheader.html.erb (19.4ms)
  Rendered layouts/_settingnav.html.erb (148.4ms)
  Rendered layouts/_topnavbar.html.erb (3.1ms)
  Rendered layouts/_footer.html.erb (5.4ms)
Completed 200 OK in 2468ms (Views: 2382.4ms | ActiveRecord: 22.5ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 14:55:31 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y/BIeGW02eZdo3Tkqiql7cJQ3GkAUs3hSc+ae9Mc0qIyz/mD+mrRISLpqyNVLp831+LKBMZlDqedrSlWD6unbg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (9.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 11:55:31.474521', "updated_at" = '2017-03-24 11:55:31.474589' WHERE "users_departments"."id" = $1[0m  [["id", 47]]
  [1m[35m (65.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (7.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 11:55:31.556192', "updated_at" = '2017-03-24 11:55:31.556251' WHERE "users_departments"."id" = $1[0m  [["id", 48]]
  [1m[35m (26.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 11:55:31.586070', "updated_at" = '2017-03-24 11:55:31.586116' WHERE "users_departments"."id" = $1[0m  [["id", 49]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (34.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 11:55:31 UTC], ["updated_at", 2017-03-24 11:55:31 UTC]]
  [1m[35m (26.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 11:55:31 UTC], ["updated_at", 2017-03-24 11:55:31 UTC]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to 
Completed 500 Internal Server Error in 282ms (ActiveRecord: 216.7ms)



ActionController::ActionControllerError - Cannot redirect to nil!:
  actionpack (5.0.2) lib/action_controller/metal/redirecting.rb:62:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/flash.rb:57:in `redirect_to'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:64:in `block in redirect_to'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:63:in `redirect_to'
  turbolinks (5.0.1) lib/turbolinks/redirection.rb:12:in `redirect_to'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bf41f33591ec2802/variables" for 127.0.0.1 at 2017-03-24 14:55:31 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 14:57:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y/BIeGW02eZdo3Tkqiql7cJQ3GkAUs3hSc+ae9Mc0qIyz/mD+mrRISLpqyNVLp831+LKBMZlDqedrSlWD6unbg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (6.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 11:57:53.005905', "updated_at" = '2017-03-24 11:57:53.005992' WHERE "users_departments"."id" = $1[0m  [["id", 50]]
  [1m[35m (25.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 11:57:53.038258', "updated_at" = '2017-03-24 11:57:53.038297' WHERE "users_departments"."id" = $1[0m  [["id", 51]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 11:57:53 UTC], ["updated_at", 2017-03-24 11:57:53 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 11:57:53 UTC], ["updated_at", 2017-03-24 11:57:53 UTC]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 258ms (ActiveRecord: 80.0ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:42:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/32e1c0d0e6457b96/variables" for 127.0.0.1 at 2017-03-24 14:57:53 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:00:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y/BIeGW02eZdo3Tkqiql7cJQ3GkAUs3hSc+ae9Mc0qIyz/mD+mrRISLpqyNVLp831+LKBMZlDqedrSlWD6unbg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:00:19.972919', "updated_at" = '2017-03-24 12:00:19.972982' WHERE "users_departments"."id" = $1[0m  [["id", 52]]
  [1m[35m (108.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:00:20.098713', "updated_at" = '2017-03-24 12:00:20.098753' WHERE "users_departments"."id" = $1[0m  [["id", 53]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:00:20 UTC], ["updated_at", 2017-03-24 12:00:20 UTC]]
  [1m[35m (40.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:00:20 UTC], ["updated_at", 2017-03-24 12:00:20 UTC]]
  [1m[35m (47.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 413ms (ActiveRecord: 245.7ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:39:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/40cd767eb5b7ecf9/variables" for 127.0.0.1 at 2017-03-24 15:00:20 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:03:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y/BIeGW02eZdo3Tkqiql7cJQ3GkAUs3hSc+ae9Mc0qIyz/mD+mrRISLpqyNVLp831+LKBMZlDqedrSlWD6unbg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:03:52.971162', "updated_at" = '2017-03-24 12:03:52.971243' WHERE "users_departments"."id" = $1[0m  [["id", 54]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.0ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:03:52.992629', "updated_at" = '2017-03-24 12:03:52.992680' WHERE "users_departments"."id" = $1[0m  [["id", 55]]
  [1m[35m (34.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:03:53 UTC], ["updated_at", 2017-03-24 12:03:53 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:03:53 UTC], ["updated_at", 2017-03-24 12:03:53 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 293ms (ActiveRecord: 79.1ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:39:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a0cfd937211b4480/variables" for 127.0.0.1 at 2017-03-24 15:03:53 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 15:03:59 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (156.0ms)
  Rendered layouts/_headcontent.html.erb (1964.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  Rendered layouts/_settingnav.html.erb (44.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2295ms (Views: 2192.0ms | ActiveRecord: 32.4ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:04:08 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:04:08.143251', "updated_at" = '2017-03-24 12:04:08.143288' WHERE "users_departments"."id" = $1[0m  [["id", 56]]
  [1m[35m (22.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:04:08.175184', "updated_at" = '2017-03-24 12:04:08.175226' WHERE "users_departments"."id" = $1[0m  [["id", 57]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:04:08 UTC], ["updated_at", 2017-03-24 12:04:08 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:04:08 UTC], ["updated_at", 2017-03-24 12:04:08 UTC]]
  [1m[35m (26.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 124ms (ActiveRecord: 70.9ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:39:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d1d9463443ac7f89/variables" for 127.0.0.1 at 2017-03-24 15:04:08 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:06:38 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:06:38.872265', "updated_at" = '2017-03-24 12:06:38.872347' WHERE "users_departments"."id" = $1[0m  [["id", 58]]
  [1m[35m (44.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:06:38.926612', "updated_at" = '2017-03-24 12:06:38.926649' WHERE "users_departments"."id" = $1[0m  [["id", 59]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:06:38 UTC], ["updated_at", 2017-03-24 12:06:38 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:06:38 UTC], ["updated_at", 2017-03-24 12:06:38 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 320ms (ActiveRecord: 90.9ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:39:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a3771df3b42afb38/variables" for 127.0.0.1 at 2017-03-24 15:06:39 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:10:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (8.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:10:56.831983', "updated_at" = '2017-03-24 12:10:56.832064' WHERE "users_departments"."id" = $1[0m  [["id", 60]]
  [1m[35m (50.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:10:56.890799', "updated_at" = '2017-03-24 12:10:56.890835' WHERE "users_departments"."id" = $1[0m  [["id", 61]]
  [1m[35m (21.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:10:56 UTC], ["updated_at", 2017-03-24 12:10:56 UTC]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (7.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:10:56 UTC], ["updated_at", 2017-03-24 12:10:56 UTC]]
  [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 319ms (ActiveRecord: 156.3ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:42:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/011135bc4fd42d82/variables" for 127.0.0.1 at 2017-03-24 15:10:57 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:12:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (7.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:12:29.285943', "updated_at" = '2017-03-24 12:12:29.286009' WHERE "users_departments"."id" = $1[0m  [["id", 62]]
  [1m[35m (35.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:12:29.329264', "updated_at" = '2017-03-24 12:12:29.329301' WHERE "users_departments"."id" = $1[0m  [["id", 63]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:12:29 UTC], ["updated_at", 2017-03-24 12:12:29 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:12:29 UTC], ["updated_at", 2017-03-24 12:12:29 UTC]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 269ms (ActiveRecord: 88.2ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:42:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e96e84923c5b42ee/variables" for 127.0.0.1 at 2017-03-24 15:12:29 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:14:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:14:35.341610', "updated_at" = '2017-03-24 12:14:35.341671' WHERE "users_departments"."id" = $1[0m  [["id", 64]]
  [1m[35m (14.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:14:35.361168', "updated_at" = '2017-03-24 12:14:35.361203' WHERE "users_departments"."id" = $1[0m  [["id", 65]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:14:35 UTC], ["updated_at", 2017-03-24 12:14:35 UTC]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:14:35 UTC], ["updated_at", 2017-03-24 12:14:35 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 248ms (ActiveRecord: 63.5ms)



ActiveRecord::RecordNotFound - Couldn't find User with 'id'=0 [WHERE "users"."deleted_at" IS NULL]:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:353:in `raise_record_not_found_exception!'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:479:in `find_one'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:458:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:42:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6ee3f0018e7ee99d/variables" for 127.0.0.1 at 2017-03-24 15:14:35 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:16:05 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:16:06.533110', "updated_at" = '2017-03-24 12:16:06.533176' WHERE "users_departments"."id" = $1[0m  [["id", 66]]
  [1m[35m (41.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:16:06.584658', "updated_at" = '2017-03-24 12:16:06.584695' WHERE "users_departments"."id" = $1[0m  [["id", 67]]
  [1m[35m (48.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:16:06 UTC], ["updated_at", 2017-03-24 12:16:06 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:16:06 UTC], ["updated_at", 2017-03-24 12:16:06 UTC]]
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 382ms (ActiveRecord: 148.0ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:44:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/616c7821107ae39c/variables" for 127.0.0.1 at 2017-03-24 15:16:06 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:18:31 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:18:32.286353', "updated_at" = '2017-03-24 12:18:32.286412' WHERE "users_departments"."id" = $1[0m  [["id", 68]]
  [1m[35m (105.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:18:32.399596', "updated_at" = '2017-03-24 12:18:32.399686' WHERE "users_departments"."id" = $1[0m  [["id", 69]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (13.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:18:32 UTC], ["updated_at", 2017-03-24 12:18:32 UTC]]
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:18:32 UTC], ["updated_at", 2017-03-24 12:18:32 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 356ms (ActiveRecord: 173.4ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:39:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b3af103e64b75051/variables" for 127.0.0.1 at 2017-03-24 15:18:32 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:23:38 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.0ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:23:39.321308', "updated_at" = '2017-03-24 12:23:39.321372' WHERE "users_departments"."id" = $1[0m  [["id", 70]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:23:39.330526', "updated_at" = '2017-03-24 12:23:39.330567' WHERE "users_departments"."id" = $1[0m  [["id", 71]]
  [1m[35m (34.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:23:39 UTC], ["updated_at", 2017-03-24 12:23:39 UTC]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:23:39 UTC], ["updated_at", 2017-03-24 12:23:39 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 246ms (ActiveRecord: 83.2ms)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/users_controller.rb:39:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/cdafb4ab8866fe08/variables" for 127.0.0.1 at 2017-03-24 15:23:39 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:25:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:25:19.769555', "updated_at" = '2017-03-24 12:25:19.769631' WHERE "users_departments"."id" = $1[0m  [["id", 72]]
  [1m[35m (14.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:25:19.791012', "updated_at" = '2017-03-24 12:25:19.791052' WHERE "users_departments"."id" = $1[0m  [["id", 73]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:25:19 UTC], ["updated_at", 2017-03-24 12:25:19 UTC]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (8.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:25:19 UTC], ["updated_at", 2017-03-24 12:25:19 UTC]]
  [1m[35m (18.4ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 292ms (ActiveRecord: 105.7ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:42:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/0f4704faf04d642d/variables" for 127.0.0.1 at 2017-03-24 15:25:20 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:27:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:27:17.284027', "updated_at" = '2017-03-24 12:27:17.284186' WHERE "users_departments"."id" = $1[0m  [["id", 74]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:27:17.297001', "updated_at" = '2017-03-24 12:27:17.297045' WHERE "users_departments"."id" = $1[0m  [["id", 75]]
  [1m[35m (34.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:27:17 UTC], ["updated_at", 2017-03-24 12:27:17 UTC]]
  [1m[35m (38.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:27:17 UTC], ["updated_at", 2017-03-24 12:27:17 UTC]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 316ms (ActiveRecord: 128.7ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:42:in `user_departments'
  app/controllers/users_controller.rb:65:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e5276d6b5198767b/variables" for 127.0.0.1 at 2017-03-24 15:27:17 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:35:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"w5SnoNb1I/6G+LofofysVpGjFwYWjT3qZNokxMqz0dk6qxZbSSsrOfmyZdhe+JaMhBEBa9C6/qywuJfpFgSkFQ==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:35:07.653460', "updated_at" = '2017-03-24 12:35:07.653558' WHERE "users_departments"."id" = $1[0m  [["id", 76]]
  [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:35:07.701327', "updated_at" = '2017-03-24 12:35:07.701369' WHERE "users_departments"."id" = $1[0m  [["id", 77]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:35:07 UTC], ["updated_at", 2017-03-24 12:35:07 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:35:07 UTC], ["updated_at", 2017-03-24 12:35:07 UTC]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 669ms (ActiveRecord: 90.4ms)



NameError - undefined local variable or method `user_id' for #<UsersController:0x007f20ac5cd9f0>
Did you mean?  user_session:
  app/controllers/users_controller.rb:41:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d5a2a21144e01399/variables" for 127.0.0.1 at 2017-03-24 15:35:08 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 15:35:18 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 785ms (ActiveRecord: 4.9ms)



NameError - undefined local variable or method `user_id' for #<UsersController:0x0055998ea195f0>
Did you mean?  user_session:
  app/controllers/users_controller.rb:41:in `user_departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/23716a47f66a8187/variables" for 127.0.0.1 at 2017-03-24 15:35:19 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 15:41:06 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (10.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (7.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (176.4ms)
  Rendered layouts/_headcontent.html.erb (2423.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (40.4ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2853ms (Views: 2664.8ms | ActiveRecord: 41.6ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:41:22 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (9.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:41:22.443064', "updated_at" = '2017-03-24 12:41:22.443128' WHERE "users_departments"."id" = $1[0m  [["id", 78]]
  [1m[35m (39.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:41:22.492501', "updated_at" = '2017-03-24 12:41:22.492552' WHERE "users_departments"."id" = $1[0m  [["id", 79]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:41:22 UTC], ["updated_at", 2017-03-24 12:41:22 UTC]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:41:22 UTC], ["updated_at", 2017-03-24 12:41:22 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 173ms (ActiveRecord: 99.4ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:44:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1468cc4bdf82458a/variables" for 127.0.0.1 at 2017-03-24 15:41:22 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:43:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:43:13.351269', "updated_at" = '2017-03-24 12:43:13.351348' WHERE "users_departments"."id" = $1[0m  [["id", 80]]
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:43:13.381722', "updated_at" = '2017-03-24 12:43:13.381758' WHERE "users_departments"."id" = $1[0m  [["id", 81]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:43:13 UTC], ["updated_at", 2017-03-24 12:43:13 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:43:13 UTC], ["updated_at", 2017-03-24 12:43:13 UTC]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 244ms (ActiveRecord: 71.7ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:44:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/6f4b907e604203b5/variables" for 127.0.0.1 at 2017-03-24 15:43:13 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:47:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:47:08.095997', "updated_at" = '2017-03-24 12:47:08.096081' WHERE "users_departments"."id" = $1[0m  [["id", 82]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:47:08.108445', "updated_at" = '2017-03-24 12:47:08.108481' WHERE "users_departments"."id" = $1[0m  [["id", 83]]
  [1m[35m (27.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:47:08 UTC], ["updated_at", 2017-03-24 12:47:08 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:47:08 UTC], ["updated_at", 2017-03-24 12:47:08 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 261ms (ActiveRecord: 68.2ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:44:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/e8948c951543f153/variables" for 127.0.0.1 at 2017-03-24 15:47:08 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:49:25 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:49:26.323469', "updated_at" = '2017-03-24 12:49:26.327731' WHERE "users_departments"."id" = $1[0m  [["id", 84]]
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:49:26.342877', "updated_at" = '2017-03-24 12:49:26.342913' WHERE "users_departments"."id" = $1[0m  [["id", 85]]
  [1m[35m (29.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (8.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:49:26 UTC], ["updated_at", 2017-03-24 12:49:26 UTC]]
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:49:26 UTC], ["updated_at", 2017-03-24 12:49:26 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 298ms (ActiveRecord: 92.8ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:44:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/412660be4f88fc07/variables" for 127.0.0.1 at 2017-03-24 15:49:26 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:55:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (8.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:55:21.077297', "updated_at" = '2017-03-24 12:55:21.077384' WHERE "users_departments"."id" = $1[0m  [["id", 86]]
  [1m[35m (37.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:55:21.119230', "updated_at" = '2017-03-24 12:55:21.119271' WHERE "users_departments"."id" = $1[0m  [["id", 87]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:55:21 UTC], ["updated_at", 2017-03-24 12:55:21 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:55:21 UTC], ["updated_at", 2017-03-24 12:55:21 UTC]]
  [1m[35m (39.8ms)[0m  [1m[35mCOMMIT[0m
Completed 404 Not Found in 342ms (ActiveRecord: 134.5ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:44:in `user_departments'
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c8c482b54f3b5383/variables" for 127.0.0.1 at 2017-03-24 15:55:21 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:55:53 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:55:54.181654', "updated_at" = '2017-03-24 12:55:54.181733' WHERE "users_departments"."id" = $1[0m  [["id", 88]]
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:55:54.213326', "updated_at" = '2017-03-24 12:55:54.213360' WHERE "users_departments"."id" = $1[0m  [["id", 89]]
  [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:55:54 UTC], ["updated_at", 2017-03-24 12:55:54 UTC]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:55:54 UTC], ["updated_at", 2017-03-24 12:55:54 UTC]]
  [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 727ms (ActiveRecord: 126.1ms)



NameError - undefined local variable or method `user_departments_url' for #<UsersController:0x00556ab5f33f48>
Did you mean?  user_departments:
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/74a1ec6579bd5474/variables" for 127.0.0.1 at 2017-03-24 15:55:55 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 15:59:05 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (11.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:59:05.879487', "updated_at" = '2017-03-24 12:59:05.879554' WHERE "users_departments"."id" = $1[0m  [["id", 90]]
  [1m[35m (38.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 12:59:05.924044', "updated_at" = '2017-03-24 12:59:05.924079' WHERE "users_departments"."id" = $1[0m  [["id", 91]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:59:05 UTC], ["updated_at", 2017-03-24 12:59:05 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 12:59:05 UTC], ["updated_at", 2017-03-24 12:59:05 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 570ms (ActiveRecord: 111.9ms)



NoMethodError - undefined method `user_departments_url' for #<UsersController:0x007f83485d4558>
Did you mean?  user_departments:
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bbcbba911c1e31bb/variables" for 127.0.0.1 at 2017-03-24 15:59:06 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:00:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (8.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:00:15.998747', "updated_at" = '2017-03-24 13:00:15.998819' WHERE "users_departments"."id" = $1[0m  [["id", 92]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:00:16.008467', "updated_at" = '2017-03-24 13:00:16.008504' WHERE "users_departments"."id" = $1[0m  [["id", 93]]
  [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:00:16 UTC], ["updated_at", 2017-03-24 13:00:16 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:00:16 UTC], ["updated_at", 2017-03-24 13:00:16 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 459ms (ActiveRecord: 72.2ms)



NoMethodError - undefined method `user_departments_url' for #<UsersController:0x007fa5345d2150>
Did you mean?  user_departments:
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/21084d0f3af26abd/variables" for 127.0.0.1 at 2017-03-24 16:00:16 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:02:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (16.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:02:42.526686', "updated_at" = '2017-03-24 13:02:42.526757' WHERE "users_departments"."id" = $1[0m  [["id", 94]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:02:42.533782', "updated_at" = '2017-03-24 13:02:42.533830' WHERE "users_departments"."id" = $1[0m  [["id", 95]]
  [1m[35m (100.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:02:42 UTC], ["updated_at", 2017-03-24 13:02:42 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:02:42 UTC], ["updated_at", 2017-03-24 13:02:42 UTC]]
  [1m[35m (99.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 656ms (ActiveRecord: 266.2ms)



NoMethodError - undefined method `user_departments_url' for #<UsersController:0x007f253c5d4680>
Did you mean?  user_departments:
  app/controllers/users_controller.rb:67:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7dbe1ee57dc83919/variables" for 127.0.0.1 at 2017-03-24 16:02:43 +0300
Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:05:51 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BAGgQPmFsHcEJYW50ri5cqMFYo1ARKMDh0whnD4uFOf9PhG7Zlu4sHtvWn4tvIOotrd04IZzYEVTLpKx4plhKw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:05:52.448382', "updated_at" = '2017-03-24 13:05:52.448453' WHERE "users_departments"."id" = $1[0m  [["id", 96]]
  [1m[35m (35.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:05:52.497800', "updated_at" = '2017-03-24 13:05:52.497836' WHERE "users_departments"."id" = $1[0m  [["id", 97]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:05:52 UTC], ["updated_at", 2017-03-24 13:05:52 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:05:52 UTC], ["updated_at", 2017-03-24 13:05:52 UTC]]
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21
Completed 302 Found in 296ms (ActiveRecord: 115.6ms)


Started GET "/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21" for 127.0.0.1 at 2017-03-24 16:05:52 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (128.1ms)
  Rendered layouts/_headcontent.html.erb (2060.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.0ms)
  Rendered layouts/_settingnav.html.erb (67.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2369ms (Views: 2285.4ms | ActiveRecord: 23.6ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:06:01 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"P8I8eGFqDPpmvMbr4liSaRt9wB1zjWbZwVY3s2yxurPG/Y2D/rQEPRn2GSwdXKizDs/WcLW6pZ8VNISesAbPfw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:06:02.039979', "updated_at" = '2017-03-24 13:06:02.040037' WHERE "users_departments"."id" = $1[0m  [["id", 98]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:06:02.044857', "updated_at" = '2017-03-24 13:06:02.044964' WHERE "users_departments"."id" = $1[0m  [["id", 99]]
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:06:02 UTC], ["updated_at", 2017-03-24 13:06:02 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:06:02 UTC], ["updated_at", 2017-03-24 13:06:02 UTC]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21
Completed 302 Found in 107ms (ActiveRecord: 44.3ms)


Started GET "/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21" for 127.0.0.1 at 2017-03-24 16:06:02 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (51.3ms)
  Rendered layouts/_headcontent.html.erb (448.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.0ms)
  Rendered layouts/_settingnav.html.erb (58.9ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 629ms (Views: 599.8ms | ActiveRecord: 13.0ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:06:10 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V+3Z5x1ruvldPybh5gjOXnJhbyodCqrwq7aWheDxCGCu0mgcgrWyPiJ1+SYZDPSEZ9N5R9s9abZ/1CWoPEZ9rA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.9ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:06:10.959369', "updated_at" = '2017-03-24 13:06:10.959413' WHERE "users_departments"."id" = $1[0m  [["id", 100]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:06:10.979781', "updated_at" = '2017-03-24 13:06:10.979829' WHERE "users_departments"."id" = $1[0m  [["id", 101]]
  [1m[35m (73.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:06:11 UTC], ["updated_at", 2017-03-24 13:06:11 UTC]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21
Completed 302 Found in 153ms (ActiveRecord: 99.1ms)


Started GET "/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21" for 127.0.0.1 at 2017-03-24 16:06:11 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (43.5ms)
  Rendered layouts/_headcontent.html.erb (382.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_settingnav.html.erb (47.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 527ms (Views: 499.3ms | ActiveRecord: 16.1ms)


Started GET "/en/users/21/user_departments?success=Departments+successfully+updated.&user_id=21" for 127.0.0.1 at 2017-03-24 16:07:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (9.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (177.5ms)
  Rendered layouts/_headcontent.html.erb (2104.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (14.4ms)
  Rendered layouts/_settingnav.html.erb (66.2ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2566ms (Views: 2373.8ms | ActiveRecord: 51.3ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:07:30 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c0gslnjZHK+vclXzTNG2PEyvICsgB5igTsDfVmLJ12GKd51t5wcUaNA4ijSz1YzmWR02RuYwW+aaomx7vn6irQ==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (10.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (9.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:07:30.758785', "updated_at" = '2017-03-24 13:07:30.758855' WHERE "users_departments"."id" = $1[0m  [["id", 102]]
  [1m[35m (42.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (16.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:07:30 UTC], ["updated_at", 2017-03-24 13:07:30 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/departments?success=Departments+successfully+updated.&user_id=21
Completed 302 Found in 178ms (ActiveRecord: 96.7ms)


Started GET "/en/users/21/departments?success=Departments+successfully+updated.&user_id=21" for 127.0.0.1 at 2017-03-24 16:07:30 +0300
Processing by UsersController#departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (8.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (170.3ms)
  Rendered layouts/_headcontent.html.erb (455.0ms)
  Rendered layouts/_layout_common_js.html.erb (5.3ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (43.7ms)
  Rendered layouts/_topnavbar.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 779ms (Views: 689.2ms | ActiveRecord: 47.2ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-24 16:07:38 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (42.1ms)
  Rendered layouts/_headcontent.html.erb (411.0ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (14.5ms)
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 569ms (Views: 527.1ms | ActiveRecord: 19.9ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-24 16:07:43 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1R4mEuiwMrm4Pxzy9oFBfeSaKEu5/qTZRk4r/Ujcb9MsIZfpd246fsd1wzUJhXun8Sg+Jn/JZ5+SLJjQlGsaHw==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (4.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:07:43.997452', "updated_at" = '2017-03-24 13:07:43.997491' WHERE "users_departments"."id" = $1[0m  [["id", 103]]
  [1m[35m (50.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:07:44 UTC], ["updated_at", 2017-03-24 13:07:44 UTC]]
  [1m[35m (51.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/departments?success=Departments+successfully+updated.&user_id=21
Completed 302 Found in 153ms (ActiveRecord: 117.4ms)


Started GET "/en/users/21/departments?success=Departments+successfully+updated.&user_id=21" for 127.0.0.1 at 2017-03-24 16:07:44 +0300
Processing by UsersController#departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (13.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (106.9ms)
  Rendered layouts/_headcontent.html.erb (532.1ms)
  Rendered layouts/_layout_common_js.html.erb (7.8ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_settingnav.html.erb (67.3ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 792ms (Views: 743.7ms | ActiveRecord: 28.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-24 16:07:58 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (69.5ms)
  Rendered layouts/_headcontent.html.erb (440.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (16.2ms)
  Rendered layouts/_settingnav.html.erb (48.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 634ms (Views: 595.6ms | ActiveRecord: 12.4ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-24 16:08:02 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (7.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (9.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (112.8ms)
  Rendered layouts/_headcontent.html.erb (450.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (16.3ms)
  Rendered layouts/_settingnav.html.erb (64.3ms)
  Rendered layouts/_topnavbar.html.erb (8.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 697ms (Views: 639.5ms | ActiveRecord: 38.0ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-24 16:08:08 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (52.3ms)
  Rendered layouts/_headcontent.html.erb (442.1ms)
  Rendered layouts/_layout_common_js.html.erb (4.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_settingnav.html.erb (46.0ms)
  Rendered layouts/_topnavbar.html.erb (7.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 619ms (Views: 592.2ms | ActiveRecord: 8.0ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 16:08:13 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"84oaxqk4sZMh2SyZ2qcrh1vh7XYXZcAlJvStuXZREkwKtas9Nua5VF6T814loxFdTlP7G9FSA2Pylh6UquZngA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:08:13 UTC], ["updated_at", 2017-03-24 13:08:13 UTC]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments?success=Departments+successfully+updated.&user_id=26
Completed 302 Found in 62ms (ActiveRecord: 12.8ms)


Started GET "/en/users/26/departments?success=Departments+successfully+updated.&user_id=26" for 127.0.0.1 at 2017-03-24 16:08:13 +0300
Processing by UsersController#departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (7.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (6.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (89.9ms)
  Rendered layouts/_headcontent.html.erb (377.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (40.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.9ms)
Completed 200 OK in 586ms (Views: 525.8ms | ActiveRecord: 33.8ms)


Started GET "/en/users/26/departments?success=Departments+successfully+updated.&user_id=26" for 127.0.0.1 at 2017-03-24 16:11:06 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"success"=>"Departments successfully updated.", "user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (11.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (344.1ms)
  Rendered layouts/_headcontent.html.erb (2145.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.9ms)
  Rendered layouts/_settingnav.html.erb (57.9ms)
  Rendered layouts/_topnavbar.html.erb (6.9ms)
  Rendered layouts/_footer.html.erb (2.7ms)
Completed 200 OK in 2854ms (Views: 2537.7ms | ActiveRecord: 72.2ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 16:11:17 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"84oaxqk4sZMh2SyZ2qcrh1vh7XYXZcAlJvStuXZREkwKtas9Nua5VF6T814loxFdTlP7G9FSA2Pylh6UquZngA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (7.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:11:17.486433', "updated_at" = '2017-03-24 13:11:17.486496' WHERE "users_departments"."id" = $1[0m  [["id", 105]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:11:17 UTC], ["updated_at", 2017-03-24 13:11:17 UTC]]
  [1m[35m (56.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 147ms (ActiveRecord: 91.4ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:11:17 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (95.6ms)
  Rendered layouts/_headcontent.html.erb (450.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_settingnav.html.erb (42.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (1.9ms)
Completed 200 OK in 653ms (Views: 592.5ms | ActiveRecord: 31.2ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:14:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (270.6ms)
  Rendered layouts/_headcontent.html.erb (2108.1ms)
  Rendered layouts/_layout_common_js.html.erb (2.4ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_settingnav.html.erb (57.6ms)
  Rendered layouts/_topnavbar.html.erb (15.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2674ms (Views: 2445.2ms | ActiveRecord: 61.0ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:15:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (273.6ms)
  Rendered layouts/_headcontent.html.erb (2092.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.6ms)
  Rendered layouts/_settingnav.html.erb (60.6ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2663ms (Views: 2436.8ms | ActiveRecord: 53.3ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-24 16:15:48 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (61.7ms)
  Rendered layouts/_headcontent.html.erb (434.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  Rendered layouts/_settingnav.html.erb (42.5ms)
  Rendered layouts/_topnavbar.html.erb (11.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 614ms (Views: 577.7ms | ActiveRecord: 18.5ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 16:15:59 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rkFFwKjhI2+rSQhncjiEbAeeTNI+N/IosacU5sqqp2dXfvQ7Nz8rqNQD16CNPL62Eixav/gAMW5lxafLFh3Sqw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:15:59.972334', "updated_at" = '2017-03-24 13:15:59.972432' WHERE "users_departments"."id" = $1[0m  [["id", 106]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:15:59 UTC], ["updated_at", 2017-03-24 13:15:59 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:16:00 UTC], ["updated_at", 2017-03-24 13:16:00 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 112ms (ActiveRecord: 31.1ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:16:00 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (13.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (99.6ms)
  Rendered layouts/_headcontent.html.erb (379.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (44.5ms)
  Rendered layouts/_topnavbar.html.erb (9.9ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 581ms (Views: 525.8ms | ActiveRecord: 41.8ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:18:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (7.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (9.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (273.5ms)
  Rendered layouts/_headcontent.html.erb (2050.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  Rendered layouts/_settingnav.html.erb (53.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2647ms (Views: 2397.5ms | ActiveRecord: 60.6ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:19:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (7.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (335.7ms)
  Rendered layouts/_headcontent.html.erb (2212.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.8ms)
  Rendered layouts/_settingnav.html.erb (58.9ms)
  Rendered layouts/_topnavbar.html.erb (5.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2869ms (Views: 2621.0ms | ActiveRecord: 74.9ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:20:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (8.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (9.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (262.6ms)
  Rendered layouts/_headcontent.html.erb (2036.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (8.3ms)
  Rendered layouts/_settingnav.html.erb (47.8ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2587ms (Views: 2365.8ms | ActiveRecord: 62.1ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:22:50 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (16.6ms)
Completed 500 Internal Server Error in 252ms (ActiveRecord: 21.0ms)



SyntaxError - syntax error, unexpected tIDENTIFIER, expecting ')'
...tn-success btn-sm stype="marign-left:8x");@output_buffer.saf...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:82: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
...cess btn-sm stype="marign-left:8x");@output_buffer.safe_appe...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:85: syntax error, unexpected tIDENTIFIER, expecting ')'
    <div class="ibox-content">
                    ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:85: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
    <div class="ibox-content">
                             ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:90: syntax error, unexpected tIDENTIFIER, expecting ')'
        <table class="table table-bordered">
                           ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:90: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
        <table class="table table-bordered">
                                           ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:95: syntax error, unexpected tIDENTIFIER, expecting ')'
...nd=( check_box_tag "departments[#{department.id}]", 1 , @use...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:97: unknown regexp options - td
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:98: syntax error, unexpected '<'
              </tr>
               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:100: unknown regexp options - tbdy
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:101: syntax error, unexpected '<'
        </table>
         ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:102: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:103: syntax error, unexpected '<'
  </div>
   ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:104: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:107: syntax error, unexpected '<'
<div class="wrapper wrapper-content">
 ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:108: syntax error, unexpected '<'
  <div class="ibox float-e-margins">
   ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:110: syntax error, unexpected '<'
   <div class="ibox-title">
    ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:111: syntax error, unexpected '<'
          <h5>Permission</h5>
           ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:112: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:113: syntax error, unexpected '<'
    <div class="ibox-content">
     ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:117: syntax error, unexpected '<'
  <div class="col-sm-12">
   ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:118: syntax error, unexpected '<'
    <div class="title-action">
     ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:119: syntax error, unexpected tCONSTANT, expecting ')'
...ut_buffer.append=( link_to 'New permission', roles_path, :cl...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:120: syntax error, unexpected '<', expecting ')'
    </div>
     ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:123: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:124: syntax error, unexpected '<'
  </div>
   ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:136: unknown regexp options - td
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:138: syntax error, unexpected '<'
              </tr>
               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:140: unknown regexp options - tbdy
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:141: syntax error, unexpected '<'
        </table>
         ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:148: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:149: syntax error, unexpected '<'
  </div>
   ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:150: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:150: unterminated string meets end of file
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:150: syntax error, unexpected end-of-input, expecting ')':
  app/views/users/departments.html.erb:82:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3726a258d17e1fc5/variables" for 127.0.0.1 at 2017-03-24 16:22:51 +0300
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (7.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:23:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  Rendered users/departments.html.erb within layouts/admin (1.8ms)
Completed 500 Internal Server Error in 196ms (ActiveRecord: 13.6ms)



SyntaxError - syntax error, unexpected tIDENTIFIER, expecting ')'
...tn-success btn-sm stype="marign-left:8x"");@output_buffer.sa...
...                               ^
/home/dawit/cats/cats-web/app/views/users/departments.html.erb:82: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
...cess btn-sm stype="marign-left:8x"");@output_buffer.safe_app...
...                               ^:
  app/views/users/departments.html.erb:82:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/cd7d626170906c6a/variables" for 127.0.0.1 at 2017-03-24 16:23:16 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:24:41 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (245.3ms)
  Rendered layouts/_headcontent.html.erb (2100.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (6.2ms)
  Rendered layouts/_settingnav.html.erb (54.9ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2471ms (Views: 2420.5ms | ActiveRecord: 31.0ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:26:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (13.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (14.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (297.7ms)
  Rendered layouts/_headcontent.html.erb (2642.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (16.5ms)
  Rendered layouts/_settingnav.html.erb (110.9ms)
  Rendered layouts/_topnavbar.html.erb (5.0ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3299ms (Views: 3049.0ms | ActiveRecord: 81.6ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:26:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (12.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (6.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (262.6ms)
  Rendered layouts/_headcontent.html.erb (2103.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.0ms)
  Rendered layouts/_settingnav.html.erb (58.5ms)
  Rendered layouts/_topnavbar.html.erb (11.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2684ms (Views: 2417.7ms | ActiveRecord: 77.2ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:28:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (9.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (8.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (7.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (323.6ms)
  Rendered layouts/_headcontent.html.erb (2179.2ms)
  Rendered layouts/_layout_common_js.html.erb (6.6ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  Rendered layouts/_settingnav.html.erb (45.3ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2787ms (Views: 2557.4ms | ActiveRecord: 75.7ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:29:05 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (3.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (7.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (279.9ms)
  Rendered layouts/_headcontent.html.erb (2125.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (56.4ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2709ms (Views: 2449.6ms | ActiveRecord: 70.5ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:29:51 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (8.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (10.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (273.4ms)
  Rendered layouts/_headcontent.html.erb (2156.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.2ms)
  Rendered layouts/_settingnav.html.erb (62.0ms)
  Rendered layouts/_topnavbar.html.erb (5.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2735ms (Views: 2484.6ms | ActiveRecord: 72.7ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-24 16:30:29 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (51.8ms)
  Rendered layouts/_headcontent.html.erb (466.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.0ms)
  Rendered layouts/_settingnav.html.erb (51.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 636ms (Views: 591.8ms | ActiveRecord: 23.5ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 16:30:33 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pLU5DdNo0k4bJzMGqGTgu3JqScJEnXtXy2VC+zCxNdpdioj2TLbaiWRt7MFXYNphZ9hfr4KquBEfB/HW7AZAFg==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (5.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (6.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (7.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:30:33.212925', "updated_at" = '2017-03-24 13:30:33.212994' WHERE "users_departments"."id" = $1[0m  [["id", 107]]
  [1m[35m (28.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 13:30:33.253043', "updated_at" = '2017-03-24 13:30:33.253084' WHERE "users_departments"."id" = $1[0m  [["id", 108]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:30:33 UTC], ["updated_at", 2017-03-24 13:30:33 UTC]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:30:33 UTC], ["updated_at", 2017-03-24 13:30:33 UTC]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 13:30:33 UTC], ["updated_at", 2017-03-24 13:30:33 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 155ms (ActiveRecord: 90.1ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 16:30:33 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (9.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (98.0ms)
  Rendered layouts/_headcontent.html.erb (391.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_settingnav.html.erb (37.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 617ms (Views: 549.2ms | ActiveRecord: 30.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-24 16:30:50 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (11.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (47.3ms)
  Rendered layouts/_headcontent.html.erb (438.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.2ms)
  Rendered layouts/_settingnav.html.erb (44.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 604ms (Views: 572.7ms | ActiveRecord: 22.7ms)


Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-24 16:30:54 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (6.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (69.7ms)
  Rendered layouts/_headcontent.html.erb (428.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (55.0ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 624ms (Views: 575.8ms | ActiveRecord: 27.6ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-24 16:31:00 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (8.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (8.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (96.8ms)
  Rendered layouts/_headcontent.html.erb (411.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.9ms)
  Rendered layouts/_settingnav.html.erb (55.9ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 625ms (Views: 570.8ms | ActiveRecord: 30.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-24 16:33:45 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (42.9ms)
  Rendered layouts/_headcontent.html.erb (432.5ms)
  Rendered layouts/_layout_common_js.html.erb (4.2ms)
  Rendered layouts/_logoheader.html.erb (15.7ms)
  Rendered layouts/_settingnav.html.erb (66.6ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 601ms (Views: 567.4ms | ActiveRecord: 14.7ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-24 22:47:31 +0300
  [1m[36mActiveRecord::SchemaMigration Load (34.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (67.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 500 Internal Server Error in 469ms (ActiveRecord: 257.7ms)



NoMethodError - undefined method `user_departments' for #<User:0x007fe2444765e8>
Did you mean?  users_departments
               users_departments=
               users_department_ids:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:45:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/09a9fbc8cffa78f7/variables" for 127.0.0.1 at 2017-03-24 22:47:33 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-24 22:48:25 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (10.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (25.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 295ms (ActiveRecord: 21.6ms)



NoMethodError - undefined method `plunk' for #<UsersDepartment::ActiveRecord_Associations_CollectionProxy:0x007f2b6433bd78>
Did you mean?  pluck:
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:124:in `method_missing'
  activerecord (5.0.2) lib/active_record/relation/delegation.rb:94:in `method_missing'
  app/controllers/users_controller.rb:45:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/398212a9c162a971/variables" for 127.0.0.1 at 2017-03-24 22:48:26 +0300
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-24 22:49:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (9.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (29.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND ("departments"."id" NOT IN (1, 2, 4))[0m
  [1m[36mRole Load (66.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (306.6ms)
  Rendered layouts/_headcontent.html.erb (2837.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (148.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (2.5ms)
Completed 200 OK in 3652ms (Views: 3272.6ms | ActiveRecord: 153.4ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-24 22:49:33 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (73.1ms)
  Rendered layouts/_headcontent.html.erb (394.0ms)
  Rendered layouts/_layout_common_js.html.erb (4.8ms)
  Rendered layouts/_logoheader.html.erb (15.1ms)
  Rendered layouts/_settingnav.html.erb (37.0ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 567ms (Views: 523.5ms | ActiveRecord: 25.3ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 22:49:37 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"B5pxZZyPh1MBhNS3iVSq2iOJwF3pvVezrIGQjz7+St3+pcCeA1GPlH7OC3B2UJAANjvWMC+KlPV44yOi4kk/EQ==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:49:38.076316', "updated_at" = '2017-03-24 19:49:38.076375' WHERE "users_departments"."id" = $1[0m  [["id", 109]]
  [1m[35m (21.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:49:38.102878', "updated_at" = '2017-03-24 19:49:38.102912' WHERE "users_departments"."id" = $1[0m  [["id", 110]]
  [1m[35m (33.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:49:38.140244', "updated_at" = '2017-03-24 19:49:38.140279' WHERE "users_departments"."id" = $1[0m  [["id", 111]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (27.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 19:49:38 UTC], ["updated_at", 2017-03-24 19:49:38 UTC]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 19:49:38 UTC], ["updated_at", 2017-03-24 19:49:38 UTC]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 19:49:38 UTC], ["updated_at", 2017-03-24 19:49:38 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 187ms (ActiveRecord: 120.6ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 22:49:38 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (11.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND ("departments"."id" NOT IN (1, 2, 4))[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (38.8ms)
  Rendered layouts/_headcontent.html.erb (335.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  Rendered layouts/_settingnav.html.erb (31.7ms)
  Rendered layouts/_topnavbar.html.erb (2.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 478ms (Views: 433.2ms | ActiveRecord: 28.3ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 22:51:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (8.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4)[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (197.2ms)
  Rendered layouts/_headcontent.html.erb (1876.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_settingnav.html.erb (30.0ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2397ms (Views: 2141.6ms | ActiveRecord: 63.1ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-24 22:51:15 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (36.8ms)
  Rendered layouts/_headcontent.html.erb (396.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  Rendered layouts/_settingnav.html.erb (35.3ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 519ms (Views: 495.2ms | ActiveRecord: 14.6ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 22:51:20 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mVuntBzh2HGLu42Cl8cNh8e/Lpdyaoeg5omHcuOExBpgZBZPgz/QtvTxUkVowzdd0g04+rRdROYy6zRfPzOx1g==", "departments"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:51:20.639554', "updated_at" = '2017-03-24 19:51:20.639619' WHERE "users_departments"."id" = $1[0m  [["id", 112]]
  [1m[35m (49.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:51:20.694179', "updated_at" = '2017-03-24 19:51:20.694215' WHERE "users_departments"."id" = $1[0m  [["id", 113]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:51:20.698190', "updated_at" = '2017-03-24 19:51:20.698266' WHERE "users_departments"."id" = $1[0m  [["id", 114]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 19:51:20 UTC], ["updated_at", 2017-03-24 19:51:20 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 119ms (ActiveRecord: 77.9ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 22:51:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 2[0m
  [1m[36mDepartment Exists (6.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (52.6ms)
  Rendered layouts/_headcontent.html.erb (335.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (34.6ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 481ms (Views: 428.6ms | ActiveRecord: 29.3ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-24 22:51:27 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (34.4ms)
  Rendered layouts/_headcontent.html.erb (460.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.5ms)
  Rendered layouts/_settingnav.html.erb (35.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 575ms (Views: 550.5ms | ActiveRecord: 10.3ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-24 22:51:32 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fnPw0DnMjt0dF0pK9PVkrd+lMgJi08Jt0O0wl7NMqAmHTEErphKGGmJdlY0L8V53yhckb6TkASsEj4O6b/vdxQ==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (8.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-24 19:51:32.703374', "updated_at" = '2017-03-24 19:51:32.703408' WHERE "users_departments"."id" = $1[0m  [["id", 115]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-24 19:51:32 UTC], ["updated_at", 2017-03-24 19:51:32 UTC]]
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 59ms (ActiveRecord: 35.0ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-24 22:51:32 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (6.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (65.9ms)
  Rendered layouts/_headcontent.html.erb (359.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_settingnav.html.erb (36.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 524ms (Views: 479.5ms | ActiveRecord: 23.8ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-25 12:38:57 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (46.0ms)
  Rendered layouts/_headcontent.html.erb (418.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_settingnav.html.erb (43.7ms)
  Rendered layouts/_topnavbar.html.erb (8.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 565ms (Views: 531.6ms | ActiveRecord: 16.2ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-25 12:39:01 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"aONh8gEONG6Mk5I4ZQKfl9BaNhiqGnG7Wc7160oZdtKR3NAJntA8qfPZTf+aBqVNxeggdWwtsv2NrEbGlq4DHg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.7ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-25 09:39:01.979942', "updated_at" = '2017-03-25 09:39:01.979972' WHERE "users_departments"."id" = $1[0m  [["id", 116]]
  [1m[35m (238.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 09:39:02 UTC], ["updated_at", 2017-03-25 09:39:02 UTC]]
  [1m[35m (316.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 09:39:02 UTC], ["updated_at", 2017-03-25 09:39:02 UTC]]
  [1m[35m (17.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 606ms (ActiveRecord: 579.7ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-25 12:39:02 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (63.5ms)
  Rendered layouts/_headcontent.html.erb (425.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_settingnav.html.erb (43.1ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 591ms (Views: 541.9ms | ActiveRecord: 31.2ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePermissions (20170325094736)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (401.3ms)[0m  [1m[35mCREATE TABLE "permissions" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170325094736"]]
  [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (49.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePermissions (20170325094952)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "permissions" ("id" serial primary key, "name" character varying, "description" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
Started GET "/" for 127.0.0.1 at 2017-03-25 14:29:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (11.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.5ms)
  Rendered layouts/_navigation.html.erb (30.8ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.3ms)
Completed 200 OK in 4129ms (Views: 4019.1ms | ActiveRecord: 8.2ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-25 14:29:41 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.7ms)
  Rendered layouts/_headcontent.html.erb (449.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (13.7ms)
  Rendered layouts/_settingnav.html.erb (49.5ms)
  Rendered layouts/_topnavbar.html.erb (6.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 547ms (Views: 539.2ms | ActiveRecord: 0.5ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-25 14:29:46 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (34.2ms)
  Rendered layouts/_headcontent.html.erb (576.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (11.4ms)
  Rendered layouts/_settingnav.html.erb (49.1ms)
  Rendered layouts/_topnavbar.html.erb (7.8ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 749ms (Views: 680.4ms | ActiveRecord: 12.3ms)


Started GET "/departments/new?locale=en" for 127.0.0.1 at 2017-03-25 14:29:50 +0300
Processing by DepartmentsController#new as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/new.html.erb within layouts/admin
  Rendered departments/_form.html.erb (39.9ms)
  Rendered departments/new.html.erb within layouts/admin (63.2ms)
  Rendered layouts/_headcontent.html.erb (447.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_settingnav.html.erb (19.1ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 592ms (Views: 557.8ms | ActiveRecord: 1.4ms)


Started POST "/departments?locale=en" for 127.0.0.1 at 2017-03-25 14:29:55 +0300
Processing by DepartmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lhoU7XNGZcJIMO9ZH3uyJgBYXwU+XFx145itx/uWV8JvJaUW7JhtBTd6MJ7gf4j8FepJaPhrnzM3+h7qJyEiDg==", "department"=>{"name"=>"bb", "description"=>""}, "commit"=>"Create Department", "locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL LIMIT $2[0m  [["name", "bb"], ["LIMIT", 1]]
  [1m[35mSQL (128.8ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bb"], ["description", ""], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 11:29:55 UTC], ["updated_at", 2017-03-25 11:29:55 UTC]]
  [1m[35m (175.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 356ms (ActiveRecord: 315.0ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-25 14:29:55 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (9.7ms)
  Rendered layouts/_headcontent.html.erb (431.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  Rendered layouts/_settingnav.html.erb (23.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 506ms (Views: 487.6ms | ActiveRecord: 9.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 14:29:59 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (161.9ms)
  Rendered layouts/_headcontent.html.erb (438.4ms)
  Rendered layouts/_layout_common_js.html.erb (5.3ms)
  Rendered layouts/_logoheader.html.erb (3.7ms)
  Rendered layouts/_settingnav.html.erb (39.5ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 693ms (Views: 669.1ms | ActiveRecord: 16.4ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 14:30:03 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (114.4ms)
  Rendered layouts/_headcontent.html.erb (398.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.8ms)
  Rendered layouts/_settingnav.html.erb (67.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 651ms (Views: 590.7ms | ActiveRecord: 27.6ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-25 14:30:09 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (36.5ms)
  Rendered layouts/_headcontent.html.erb (412.6ms)
  Rendered layouts/_layout_common_js.html.erb (5.9ms)
  Rendered layouts/_logoheader.html.erb (6.8ms)
  Rendered layouts/_settingnav.html.erb (36.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (1.8ms)
Completed 200 OK in 535ms (Views: 507.7ms | ActiveRecord: 20.1ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-25 14:30:14 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"f7LGsX7SN43PWnkWS6Wtvw38jPdkcvc/pDgNQIYpc1uGjXdK4Qw/SrAQptG0oZdlGE6amqJFNHlwWr5tWp4Glw==", "departments"=>{"1"=>"1", "2"=>"1", "6"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-25 11:30:14.146276', "updated_at" = '2017-03-25 11:30:14.146343' WHERE "users_departments"."id" = $1[0m  [["id", 117]]
  [1m[35m (61.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-25 11:30:14.212990', "updated_at" = '2017-03-25 11:30:14.213026' WHERE "users_departments"."id" = $1[0m  [["id", 118]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 11:30:14 UTC], ["updated_at", 2017-03-25 11:30:14 UTC]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 11:30:14 UTC], ["updated_at", 2017-03-25 11:30:14 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 6], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 11:30:14 UTC], ["updated_at", 2017-03-25 11:30:14 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/departments
Completed 302 Found in 152ms (ActiveRecord: 95.9ms)


Started GET "/en/users/26/departments" for 127.0.0.1 at 2017-03-25 14:30:14 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 6)[0m
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 6], ["LIMIT", 1]]
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (66.8ms)
  Rendered layouts/_headcontent.html.erb (414.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  Rendered layouts/_settingnav.html.erb (28.7ms)
  Rendered layouts/_topnavbar.html.erb (3.3ms)
  Rendered layouts/_footer.html.erb (4.2ms)
Completed 200 OK in 567ms (Views: 525.0ms | ActiveRecord: 23.3ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 14:30:18 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (6.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (57.3ms)
  Rendered layouts/_headcontent.html.erb (496.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  Rendered layouts/_settingnav.html.erb (28.4ms)
  Rendered layouts/_topnavbar.html.erb (4.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 630ms (Views: 596.6ms | ActiveRecord: 25.6ms)


  [1m[35m (1.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePermissions (20170325094952)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "permissions"[0m
  [1m[35mSQL (2.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170325094952"]]
  [1m[35m (35.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePermissions (20170325094952)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (42.1ms)[0m  [1m[35mCREATE TABLE "permissions" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170325094952"]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (135.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (49.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (11.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (11.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (19.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePermissions (20170325094952)
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "permissions"[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170325094952"]]
  [1m[35m (51.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "users_departments"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170322184115"]]
  [1m[35m (62.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDepartments (20170322133007)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE "departments"[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (83.4ms)[0m  [1m[35mCREATE TABLE "users_departments" ("id" serial primary key, "user_id" integer, "department_id" integer, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_cbafd1e5ff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b917af0f43"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_user_id" ON "users_departments"  ("user_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_department_id" ON "users_departments"  ("department_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322184115"]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePermissions (20170325094952)
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (71.2ms)[0m  [1m[35mCREATE TABLE "permissions" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170325094952"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUserTypes (20170325120145)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "user_types" ("id" serial primary key, "name" character varying, "description" character varying, "created_by" integer, "modified_by" integer, "deleted" boolean DEFAULT 'f', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170325120145"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "seasons" WHERE "seasons"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "uom_categories" WHERE "uom_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_of_measures" WHERE "unit_of_measures"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodity_categories" WHERE "commodity_categories"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "commodities" WHERE "commodities"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "mode_of_transports" WHERE "mode_of_transports"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_sources" WHERE "fund_sources"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "fund_types" WHERE "fund_types"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "currencies" WHERE "currencies"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "programs" WHERE "programs"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "accounts" WHERE "accounts"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "journals" WHERE "journals"."deleted_at" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_types" WHERE "user_types"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "user_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "admin"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (37.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "user_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "federal"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "user_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "hub"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "user_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "region"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (14.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (13.7ms)[0m  [1m[32mINSERT INTO "ownership_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "private"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "ownership_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "plc"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "ownership_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "share company"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "ownership_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "government"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "ownership_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "ngo"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.2ms)[0m  [1m[32mINSERT INTO "ownership_types" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "other"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "HRD"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Gift Certificate"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Receipts"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Project"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Ration"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Dispatch"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Need Assessment"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Commodity"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Warehouses"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "PSNP Annual Plan"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Delivery"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Transfers"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (28.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Donor"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (48.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Organizations"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (35.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Unit of Measurements"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Operation"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Currencies"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "FDP"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "locations"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "permissions" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Programs"], ["description", ""], ["created_at", 2017-03-25 12:02:22 UTC], ["updated_at", 2017-03-25 12:02:22 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUserPermissions (20170325120808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (42.0ms)[0m  [1m[35mCREATE TABLE "user_permissions" ("id" serial primary key, "user_id" integer, "permission_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_b29e483ce4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_e2cb0687d2"
FOREIGN KEY ("permission_id")
  REFERENCES "permissions" ("id")
)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_permissions_on_user_id" ON "user_permissions"  ("user_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_permissions_on_permission_id" ON "user_permissions"  ("permission_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170325120808"]]
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:28:01 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 228ms (ActiveRecord: 24.2ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:53:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9c8499f8130a0728/variables" for 127.0.0.1 at 2017-03-25 15:28:02 +0300
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:32:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (7.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 200ms (ActiveRecord: 28.8ms)



SyntaxError - syntax error, unexpected ':', expecting keyword_end
    has_many: users_permissions
             ^:
  app/models/permission.rb:2:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/dependencies.rb:543:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:53:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/da3f5dcce23046e3/variables" for 127.0.0.1 at 2017-03-25 15:32:13 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:33:39 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 257ms (ActiveRecord: 27.0ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:53:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/35665a0bf69864e5/variables" for 127.0.0.1 at 2017-03-25 15:33:40 +0300
  [1m[36mDepartment Load (4.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:36:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 248ms (ActiveRecord: 33.5ms)



NoMethodError - undefined method `user_permissions' for #<User:0x007f52cc445040>
Did you mean?  users_permissions
               users_permissions=
               users_permission_ids:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/controllers/users_controller.rb:53:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9670409a4b65b446/variables" for 127.0.0.1 at 2017-03-25 15:36:29 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:37:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 236ms (ActiveRecord: 24.0ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:53:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/057d822484f6dfa7/variables" for 127.0.0.1 at 2017-03-25 15:37:07 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
Started GET "/users/" for 127.0.0.1 at 2017-03-25 15:42:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (140.6ms)
  Rendered layouts/_headcontent.html.erb (2014.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.7ms)
  Rendered layouts/_settingnav.html.erb (75.0ms)
  Rendered layouts/_topnavbar.html.erb (4.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2400ms (Views: 2259.5ms | ActiveRecord: 22.2ms)


Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:42:20 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 90ms (ActiveRecord: 12.7ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b4f5c5acd7082b8e/variables" for 127.0.0.1 at 2017-03-25 15:42:21 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "users_departments"[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170322184115"]]
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersDepartments (20170322184115)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (69.8ms)[0m  [1m[35mCREATE TABLE "users_departments" ("id" serial primary key, "user_id" integer, "department_id" integer, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_cbafd1e5ff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b917af0f43"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_user_id" ON "users_departments"  ("user_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_departments_on_department_id" ON "users_departments"  ("department_id")[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170322184115"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (4.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUserPermissions (20170325120808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE "user_permissions"[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170325120808"]]
  [1m[35m (55.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUserPermissions (20170325120808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (41.9ms)[0m  [1m[35mCREATE TABLE "users_permissions" ("id" serial primary key, "user_id" integer, "permission_id" integer, "created_by" integer, "modified_by" integer, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_3d8a7b9295"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_441e8da8fa"
FOREIGN KEY ("permission_id")
  REFERENCES "permissions" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_permissions_on_user_id" ON "users_permissions"  ("user_id")[0m
  [1m[35m (123.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_permissions_on_permission_id" ON "users_permissions"  ("permission_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170325120808"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:54:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (9.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 213ms (ActiveRecord: 35.1ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7c89952571da34f0/variables" for 127.0.0.1 at 2017-03-25 15:54:08 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:54:14 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 39ms (ActiveRecord: 6.0ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a8bea84968436ba5/variables" for 127.0.0.1 at 2017-03-25 15:54:14 +0300
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
Started GET "/users/26/departments" for 127.0.0.1 at 2017-03-25 15:54:16 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
Completed 500 Internal Server Error in 33ms (ActiveRecord: 5.1ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c792252cced118f8/variables" for 127.0.0.1 at 2017-03-25 15:54:16 +0300
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
Started GET "/users/" for 127.0.0.1 at 2017-03-25 15:54:20 +0300
Processing by UsersController#index as HTML
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (117.9ms)
  Rendered layouts/_headcontent.html.erb (1937.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (9.9ms)
  Rendered layouts/_settingnav.html.erb (73.4ms)
  Rendered layouts/_topnavbar.html.erb (4.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2211ms (Views: 2171.4ms | ActiveRecord: 17.9ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 15:54:27 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
Completed 500 Internal Server Error in 50ms (ActiveRecord: 3.6ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/78bb3a4143688840/variables" for 127.0.0.1 at 2017-03-25 15:54:27 +0300
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 15:56:53 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/departments.html.erb within layouts/admin (34.0ms)
Completed 500 Internal Server Error in 245ms (ActiveRecord: 22.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ActionController::UrlGenerationError - No route matches {:action=>"user_permissions", :controller=>"users", :id=>"21", :locale=>:en, :user_id=>21}:
  actionpack (5.0.2) lib/action_dispatch/journey/formatter.rb:51:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:629:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:660:in `generate'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:707:in `url_for'
  actionpack (5.0.2) lib/action_dispatch/routing/url_for.rb:172:in `url_for'
  actionview (5.0.2) lib/action_view/routing_url_for.rb:90:in `url_for'
  actionview (5.0.2) lib/action_view/helpers/url_helper.rb:196:in `link_to'
  app/views/users/departments.html.erb:116:in `_app_views_users_departments_html_erb__1676502401332143977_70227548815020'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1c4135ea0616abe3/variables" for 127.0.0.1 at 2017-03-25 15:56:54 +0300
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 16:02:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
Completed 500 Internal Server Error in 259ms (ActiveRecord: 20.9ms)



NameError - uninitialized constant User::UsersPermission:
  activerecord (5.0.2) lib/active_record/inheritance.rb:152:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/associations/association.rb:118:in `klass'
  activerecord (5.0.2) lib/active_record/associations/collection_association.rb:47:in `reader'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/54f187f981f2c7f4/variables" for 127.0.0.1 at 2017-03-25 16:02:01 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 16:06:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
Completed 500 Internal Server Error in 186ms (ActiveRecord: 17.4ms)



LoadError - Unable to autoload constant UsersPermission, expected /home/dawit/cats/cats-web/app/models/users_permission.rb to define it:
  activesupport (5.0.2) lib/active_support/dependencies.rb:512:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/dependencies.rb:543:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:270:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:311:in `safe_constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:589:in `safe_get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:620:in `safe_constantize'
  activerecord (5.0.2) lib/active_record/inheritance.rb:148:in `block in compute_type'
  activerecord (5.0.2) lib/active_record/inheritance.rb:147:in `compute_type'
  activerecord (5.0.2) lib/active_record/reflection.rb:354:in `compute_class'
  activerecord (5.0.2) lib/active_record/reflection.rb:350:in `klass'
  activerecord (5.0.2) lib/active_record/reflection.rb:561:in `automatic_inverse_of'
  activerecord (5.0.2) lib/active_record/reflection.rb:550:in `block in inverse_name'
  activerecord (5.0.2) lib/active_record/reflection.rb:546:in `inverse_name'
  activerecord (5.0.2) lib/active_record/reflection.rb:465:in `has_inverse?'
  activerecord (5.0.2) lib/active_record/reflection.rb:201:in `check_validity_of_inverse!'
  activerecord (5.0.2) lib/active_record/reflection.rb:410:in `check_validity!'
  activerecord (5.0.2) lib/active_record/associations/association.rb:25:in `initialize'
  activerecord (5.0.2) lib/active_record/associations.rb:240:in `association'
  activerecord (5.0.2) lib/active_record/associations/builder/association.rb:111:in `users_permissions'
  app/controllers/users_controller.rb:52:in `departments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/aa4fc17c13f431c5/variables" for 127.0.0.1 at 2017-03-25 16:06:42 +0300
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 16:08:46 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/departments.html.erb within layouts/admin (34.5ms)
  Rendered layouts/_headcontent.html.erb (2209.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  Rendered layouts/_settingnav.html.erb (74.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2581ms (Views: 2367.4ms | ActiveRecord: 37.5ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 16:09:04 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (105.3ms)
  Rendered layouts/_headcontent.html.erb (466.0ms)
  Rendered layouts/_layout_common_js.html.erb (4.1ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_settingnav.html.erb (38.9ms)
  Rendered layouts/_topnavbar.html.erb (3.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 666ms (Views: 629.0ms | ActiveRecord: 26.2ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-25 16:09:09 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"YLxjZ2VUts0zKJz/7nD5CXE3Fm18eVFpFdZFpOaWMGqZg9Kc+oq+CkxiQzgRdMPTZIUAALpOki/BtPaJOiFFpg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (9.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:09:09 UTC], ["updated_at", 2017-03-25 13:09:09 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:09:09 UTC], ["updated_at", 2017-03-25 13:09:09 UTC]]
  [1m[35m (68.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/departments
Completed 302 Found in 135ms (ActiveRecord: 92.1ms)


Started GET "/en/users/21/departments" for 127.0.0.1 at 2017-03-25 16:09:09 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/departments.html.erb within layouts/admin (27.2ms)
  Rendered layouts/_headcontent.html.erb (557.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  Rendered layouts/_settingnav.html.erb (25.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.6ms)
Completed 200 OK in 687ms (Views: 642.8ms | ActiveRecord: 15.2ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 16:09:14 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (265.8ms)
  Rendered layouts/_headcontent.html.erb (453.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.3ms)
  Rendered layouts/_settingnav.html.erb (33.5ms)
  Rendered layouts/_topnavbar.html.erb (5.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 809ms (Views: 730.5ms | ActiveRecord: 66.5ms)


Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:09:25 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Si0InmphNmA5EY4Ypw4gygAQsVRZaNJSeet2A1A011+zErll9b8+p0ZbUd9YChoQFaKnOZ9fERSticUujIOikw==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 22ms (ActiveRecord: 4.2ms)



NameError - uninitialized constant UsersController::UserPermission:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:74:in `updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2d1de250360581ae/variables" for 127.0.0.1 at 2017-03-25 16:09:25 +0300
Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:10:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Si0InmphNmA5EY4Ypw4gygAQsVRZaNJSeet2A1A011+zErll9b8+p0ZbUd9YChoQFaKnOZ9fERSticUujIOikw==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 125ms (ActiveRecord: 18.7ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:74:in `updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8b64b9aae2d9f7ed/variables" for 127.0.0.1 at 2017-03-25 16:10:11 +0300
Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:14:06 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Si0InmphNmA5EY4Ypw4gygAQsVRZaNJSeet2A1A011+zErll9b8+p0ZbUd9YChoQFaKnOZ9fERSticUujIOikw==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 404 Not Found in 119ms (ActiveRecord: 9.5ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:73:in `updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3cecbe3eb303cc2b/variables" for 127.0.0.1 at 2017-03-25 16:14:07 +0300
Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:14:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Si0InmphNmA5EY4Ypw4gygAQsVRZaNJSeet2A1A011+zErll9b8+p0ZbUd9YChoQFaKnOZ9fERSticUujIOikw==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 500 Internal Server Error in 125ms (ActiveRecord: 11.9ms)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/users_controller.rb:73:in `updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/37e05a2275d0d619/variables" for 127.0.0.1 at 2017-03-25 16:14:48 +0300
Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:19:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)

ActionController::RoutingError - undefined local variable or method `updatePermissions' for UsersController:Class:
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:46:in `rescue in controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dd5ebd860ca9750f/variables" for 127.0.0.1 at 2017-03-25 16:19:28 +0300
Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:22:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Si0InmphNmA5EY4Ypw4gygAQsVRZaNJSeet2A1A011+zErll9b8+p0ZbUd9YChoQFaKnOZ9fERSticUujIOikw==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (3.7ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
Completed 500 Internal Server Error in 477ms (ActiveRecord: 14.5ms)



NameError - undefined local variable or method `permission' for #<UsersController:0x007fcab07816f8>
Did you mean?  permissions
               _permission:
  app/controllers/users_controller.rb:79:in `block in updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:204:in `block in each_pair'
  actionpack (5.0.2) lib/action_controller/metal/strong_parameters.rb:203:in `each_pair'
  app/controllers/users_controller.rb:77:in `updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c8687b2fbf872409/variables" for 127.0.0.1 at 2017-03-25 16:22:23 +0300
Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:23:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Si0InmphNmA5EY4Ypw4gygAQsVRZaNJSeet2A1A011+zErll9b8+p0ZbUd9YChoQFaKnOZ9fERSticUujIOikw==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (2.9ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:23:26 UTC], ["updated_at", 2017-03-25 13:23:26 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:23:26 UTC], ["updated_at", 2017-03-25 13:23:26 UTC]]
  [1m[35m (19.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/departments
Completed 302 Found in 232ms (ActiveRecord: 48.5ms)


Started GET "/en/users/21/departments" for 127.0.0.1 at 2017-03-25 16:23:26 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (3.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (164.0ms)
  Rendered layouts/_headcontent.html.erb (2085.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.3ms)
  Rendered layouts/_settingnav.html.erb (47.3ms)
  Rendered layouts/_topnavbar.html.erb (15.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2470ms (Views: 2319.3ms | ActiveRecord: 33.8ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 16:23:39 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (1.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (174.1ms)
  Rendered layouts/_headcontent.html.erb (442.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (3.1ms)
  Rendered layouts/_settingnav.html.erb (32.5ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 693ms (Views: 622.6ms | ActiveRecord: 49.9ms)


Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 16:23:49 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Z2O0o88p2Fh42dT+Hb64YU5/3yNHxzf8slg8hbLUWz2eXAVYUPfQnweTCzniuoK7W83JToHw9LpmOo+obmMu8Q==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (2.1ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 13:23:49.507751', "updated_at" = '2017-03-25 13:23:49.507814' WHERE "users_permissions"."id" = $1[0m  [["id", 1]]
  [1m[35m (243.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 13:23:49.758473', "updated_at" = '2017-03-25 13:23:49.758522' WHERE "users_permissions"."id" = $1[0m  [["id", 2]]
  [1m[35m (249.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:23:50 UTC], ["updated_at", 2017-03-25 13:23:50 UTC]]
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:23:50 UTC], ["updated_at", 2017-03-25 13:23:50 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 3], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 13:23:50 UTC], ["updated_at", 2017-03-25 13:23:50 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/departments
Completed 302 Found in 584ms (ActiveRecord: 530.8ms)


Started GET "/en/users/21/departments" for 127.0.0.1 at 2017-03-25 16:23:50 +0300
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (6.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (2.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (62.7ms)
  Rendered layouts/_headcontent.html.erb (536.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (15.5ms)
  Rendered layouts/_settingnav.html.erb (52.9ms)
  Rendered layouts/_topnavbar.html.erb (2.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 734ms (Views: 682.5ms | ActiveRecord: 21.9ms)


Started GET "/en/users/21/departments" for 127.0.0.1 at 2017-03-25 16:28:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#departments as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (6.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (1.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (229.3ms)
  Rendered layouts/_headcontent.html.erb (2031.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.9ms)
  Rendered layouts/_settingnav.html.erb (44.3ms)
  Rendered layouts/_topnavbar.html.erb (8.7ms)
  Rendered layouts/_footer.html.erb (2.3ms)
Completed 200 OK in 2687ms (Views: 2333.3ms | ActiveRecord: 76.0ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 16:28:16 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (9.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/user_departments.html.erb within layouts/admin (545.0ms)
Completed 500 Internal Server Error in 577ms (ActiveRecord: 18.3ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NameError - undefined local variable or method `user' for #<#<Class:0x007f8b1c26b3b8>:0x007f8b02a25820>
Did you mean?  @user:
  app/views/users/user_departments.html.erb:15:in `_app_views_users_user_departments_html_erb__692753014399669411_70117510689140'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c27bc95791ee04cb/variables" for 127.0.0.1 at 2017-03-25 16:28:17 +0300
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 16:28:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (150.1ms)
  Rendered layouts/_headcontent.html.erb (2105.2ms)
  Rendered layouts/_layout_common_js.html.erb (6.6ms)
  Rendered layouts/_logoheader.html.erb (15.8ms)
  Rendered layouts/_settingnav.html.erb (41.3ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2507ms (Views: 2335.5ms | ActiveRecord: 29.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 16:29:06 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (3.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (122.7ms)
  Rendered layouts/_headcontent.html.erb (420.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.0ms)
  Rendered layouts/_settingnav.html.erb (31.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (4.6ms)
Completed 200 OK in 689ms (Views: 589.0ms | ActiveRecord: 43.8ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 16:29:11 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (46.8ms)
  Rendered layouts/_headcontent.html.erb (395.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.9ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  Rendered layouts/_settingnav.html.erb (27.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 563ms (Views: 534.4ms | ActiveRecord: 14.5ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 16:29:15 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (6.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (7.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (5.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (69.6ms)
  Rendered layouts/_headcontent.html.erb (436.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  Rendered layouts/_settingnav.html.erb (38.6ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 617ms (Views: 548.2ms | ActiveRecord: 37.2ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 16:29:21 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (4.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (8.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (10.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (188.5ms)
  Rendered layouts/_headcontent.html.erb (432.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.5ms)
  Rendered layouts/_settingnav.html.erb (28.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 696ms (Views: 613.5ms | ActiveRecord: 67.7ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 16:29:25 +0300
Processing by UsersController#departments as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/departments.html.erb within layouts/admin
  [1m[36mDepartment Load (5.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (1.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/departments.html.erb within layouts/admin (67.5ms)
  Rendered layouts/_headcontent.html.erb (455.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (15.3ms)
  Rendered layouts/_settingnav.html.erb (33.2ms)
  Rendered layouts/_topnavbar.html.erb (5.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 628ms (Views: 565.9ms | ActiveRecord: 35.1ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 19:07:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (3.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (261.6ms)
  Rendered layouts/_headcontent.html.erb (2101.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  Rendered layouts/_settingnav.html.erb (44.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2616ms (Views: 2403.5ms | ActiveRecord: 90.8ms)


Started GET "/en/users/" for 127.0.0.1 at 2017-03-25 19:07:33 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (8.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (104.9ms)
  Rendered layouts/_headcontent.html.erb (450.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (36.3ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 650ms (Views: 610.1ms | ActiveRecord: 27.0ms)


Started GET "/users/21/departments" for 127.0.0.1 at 2017-03-25 19:07:38 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/21/departments"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [312 times] (242.6ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (26.1ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (417.3ms)
Started GET "/en/users/" for 127.0.0.1 at 2017-03-25 19:08:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (132.3ms)
  Rendered layouts/_headcontent.html.erb (2046.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  Rendered layouts/_settingnav.html.erb (43.7ms)
  Rendered layouts/_topnavbar.html.erb (4.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2417ms (Views: 2257.1ms | ActiveRecord: 25.0ms)


Started GET "/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:08:17 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (10.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (3.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (175.1ms)
  Rendered layouts/_headcontent.html.erb (510.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (40.0ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 863ms (Views: 731.8ms | ActiveRecord: 42.3ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 19:08:28 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (51.6ms)
  Rendered layouts/_headcontent.html.erb (478.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.6ms)
  Rendered layouts/_settingnav.html.erb (31.7ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 612ms (Views: 577.0ms | ActiveRecord: 24.1ms)


Started PUT "/users/21/updateDepartments" for 127.0.0.1 at 2017-03-25 19:08:33 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"095DEh1QC1+YNKotYCnjIKE3aynH5A+pZpO7SIjrXioq4fLpgo4DmOd+deqfLdn6tIV9RAHTzO+y8QhlVFwr5g==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1", "6"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-25 16:08:33.369548', "updated_at" = '2017-03-25 16:08:33.369620' WHERE "users_departments"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-25 16:08:33.379763', "updated_at" = '2017-03-25 16:08:33.379812' WHERE "users_departments"."id" = $1[0m  [["id", 2]]
  [1m[35m (41.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:33 UTC], ["updated_at", 2017-03-25 16:08:33 UTC]]
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:33 UTC], ["updated_at", 2017-03-25 16:08:33 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 4], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:33 UTC], ["updated_at", 2017-03-25 16:08:33 UTC]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["department_id", 6], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:33 UTC], ["updated_at", 2017-03-25 16:08:33 UTC]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/user_profile
Completed 302 Found in 176ms (ActiveRecord: 104.4ms)


Started GET "/en/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:08:33 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (9.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (3.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (89.8ms)
  Rendered layouts/_headcontent.html.erb (453.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.5ms)
  Rendered layouts/_settingnav.html.erb (51.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 672ms (Views: 599.1ms | ActiveRecord: 45.5ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 19:08:39 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (187.3ms)
  Rendered layouts/_headcontent.html.erb (493.0ms)
  Rendered layouts/_layout_common_js.html.erb (7.1ms)
  Rendered layouts/_logoheader.html.erb (10.8ms)
  Rendered layouts/_settingnav.html.erb (28.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 775ms (Views: 707.0ms | ActiveRecord: 53.8ms)


Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 19:08:51 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pi+fe7cFQDtRdjsL2XN0K4goPhDmHdT/37c5KSuUSvpfEC6AKNtI/C485Mwmd07xnZoofSAqF7kL1YoE9yM/Ng==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1", "5"=>"1", "6"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (0.5ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:08:51.075850', "updated_at" = '2017-03-25 16:08:51.075913' WHERE "users_permissions"."id" = $1[0m  [["id", 3]]
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:08:51.103906', "updated_at" = '2017-03-25 16:08:51.103941' WHERE "users_permissions"."id" = $1[0m  [["id", 4]]
  [1m[35m (23.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:08:51.129614', "updated_at" = '2017-03-25 16:08:51.129654' WHERE "users_permissions"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:51 UTC], ["updated_at", 2017-03-25 16:08:51 UTC]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:51 UTC], ["updated_at", 2017-03-25 16:08:51 UTC]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 3], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:51 UTC], ["updated_at", 2017-03-25 16:08:51 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (8.5ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 5], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:51 UTC], ["updated_at", 2017-03-25 16:08:51 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 6], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:08:51 UTC], ["updated_at", 2017-03-25 16:08:51 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/user_profile
Completed 302 Found in 167ms (ActiveRecord: 85.9ms)


Started GET "/en/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:08:51 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5, 6)[0m
  [1m[36mPermission Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (128.1ms)
  Rendered layouts/_headcontent.html.erb (429.8ms)
  Rendered layouts/_layout_common_js.html.erb (14.0ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  Rendered layouts/_settingnav.html.erb (38.1ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (2.1ms)
Completed 200 OK in 691ms (Views: 623.3ms | ActiveRecord: 30.9ms)


Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 19:09:03 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (52.2ms)
Started GET "/en/users/21/user_departments?user_id=21" for 127.0.0.1 at 2017-03-25 19:09:03 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (26.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered layouts/_headcontent.html.erb (566.6ms)
  [1m[36mDepartment Exists (16.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  [1m[36mDepartment Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  Rendered layouts/_logoheader.html.erb (10.4ms)
  [1m[36mDepartment Exists (17.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered layouts/_settingnav.html.erb (50.5ms)
  Rendered users/user_departments.html.erb within layouts/admin (107.3ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 747ms (Views: 718.0ms | ActiveRecord: 16.2ms)


  Rendered layouts/_headcontent.html.erb (457.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (4.4ms)
  Rendered layouts/_settingnav.html.erb (30.7ms)
  Rendered layouts/_topnavbar.html.erb (4.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 681ms (Views: 593.5ms | ActiveRecord: 76.7ms)


Started GET "/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:09:06 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (7.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (8.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5, 6)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (109.7ms)
  Rendered layouts/_headcontent.html.erb (425.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.9ms)
  Rendered layouts/_logoheader.html.erb (7.6ms)
  Rendered layouts/_settingnav.html.erb (41.3ms)
  Rendered layouts/_topnavbar.html.erb (4.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 660ms (Views: 589.6ms | ActiveRecord: 41.9ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 19:09:16 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (3.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (186.0ms)
  Rendered layouts/_headcontent.html.erb (427.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.3ms)
  Rendered layouts/_settingnav.html.erb (42.2ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 716ms (Views: 634.9ms | ActiveRecord: 60.2ms)


Started GET "/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:09:20 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (9.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5, 6)[0m
  [1m[36mPermission Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (98.2ms)
  Rendered layouts/_headcontent.html.erb (470.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  Rendered layouts/_settingnav.html.erb (36.7ms)
  Rendered layouts/_topnavbar.html.erb (9.0ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 693ms (Views: 626.3ms | ActiveRecord: 42.2ms)


Started GET "/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:10:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (14.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (12.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5, 6)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (242.1ms)
  Rendered layouts/_headcontent.html.erb (2352.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.0ms)
  Rendered layouts/_settingnav.html.erb (70.7ms)
  Rendered layouts/_topnavbar.html.erb (4.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2961ms (Views: 2676.2ms | ActiveRecord: 84.0ms)


Started GET "/en/users/21/user_permissions?user_id=21" for 127.0.0.1 at 2017-03-25 19:11:15 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"21", "locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (1.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (178.6ms)
  Rendered layouts/_headcontent.html.erb (430.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.3ms)
  Rendered layouts/_settingnav.html.erb (29.8ms)
  Rendered layouts/_topnavbar.html.erb (4.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 714ms (Views: 637.6ms | ActiveRecord: 59.9ms)


Started PUT "/users/21/updatePermissions" for 127.0.0.1 at 2017-03-25 19:11:22 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"HODaXmpmbaCO+KIBwBZcuDoUQ9saxCjaXfY/BT8R3VPl32ul9bhlZ/GyfcY/EmZiL6ZVttzz65yJlIwo46aonw==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1", "5"=>"1"}, "commit"=>"Save Changes", "id"=>"21"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (2.7ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:11:22.183681', "updated_at" = '2017-03-25 16:11:22.183747' WHERE "users_permissions"."id" = $1[0m  [["id", 6]]
  [1m[35m (21.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:11:22.211860', "updated_at" = '2017-03-25 16:11:22.211896' WHERE "users_permissions"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:11:22.215137', "updated_at" = '2017-03-25 16:11:22.215171' WHERE "users_permissions"."id" = $1[0m  [["id", 8]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:11:22.220172', "updated_at" = '2017-03-25 16:11:22.220209' WHERE "users_permissions"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:11:22.225683', "updated_at" = '2017-03-25 16:11:22.225719' WHERE "users_permissions"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.7ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 1], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:11:22 UTC], ["updated_at", 2017-03-25 16:11:22 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 2], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:11:22 UTC], ["updated_at", 2017-03-25 16:11:22 UTC]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 3], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:11:22 UTC], ["updated_at", 2017-03-25 16:11:22 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 21], ["permission_id", 5], ["created_by", 18], ["modified_by", 18], ["created_at", 2017-03-25 16:11:22 UTC], ["updated_at", 2017-03-25 16:11:22 UTC]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/21/user_profile
Completed 302 Found in 158ms (ActiveRecord: 74.2ms)


Started GET "/en/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:11:22 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"21"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (3.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5)[0m
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (85.5ms)
  Rendered layouts/_headcontent.html.erb (403.1ms)
  Rendered layouts/_layout_common_js.html.erb (8.2ms)
  Rendered layouts/_logoheader.html.erb (12.0ms)
  Rendered layouts/_settingnav.html.erb (33.7ms)
  Rendered layouts/_topnavbar.html.erb (2.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 607ms (Views: 555.4ms | ActiveRecord: 17.6ms)


Started GET "/en/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:50:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (11.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (1.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (107.3ms)
  Rendered layouts/_headcontent.html.erb (2180.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.9ms)
  Rendered layouts/_settingnav.html.erb (59.2ms)
Completed 500 Internal Server Error in 2614ms (ActiveRecord: 29.4ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ArgumentError - wrong number of arguments (given 0, expected 1):
  activerecord (5.0.2) lib/active_record/associations/collection_proxy.rb:897:in `include?'
  app/policies/user_policy.rb:12:in `index?'
  app/views/layouts/_settingnav.html.erb:115:in `_app_views_layouts__settingnav_html_erb__2842116110704182921_69928130137320'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/layouts/admin.html.erb:15:in `_app_views_layouts_admin_html_erb__1223294381035060861_69928377084460'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:66:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `tap'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `each'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `catch'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2a95d2065d87b132/variables" for 127.0.0.1 at 2017-03-25 19:50:29 +0300
Started GET "/en/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:51:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (8.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (1.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (8.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (152.0ms)
  Rendered layouts/_headcontent.html.erb (2335.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (12.9ms)
  Rendered layouts/_settingnav.html.erb (62.7ms)
  Rendered layouts/_topnavbar.html.erb (3.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2915ms (Views: 2575.3ms | ActiveRecord: 90.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:51:27 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Redirected to http://localhost:3000/en/users/18/user_profile
Completed 302 Found in 22ms (ActiveRecord: 9.0ms)


Started GET "/en/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:51:27 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (3.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (32.8ms)
  Rendered layouts/_headcontent.html.erb (440.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  Rendered layouts/_settingnav.html.erb (51.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 616ms (Views: 550.2ms | ActiveRecord: 33.5ms)


Started GET "/en/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:54:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (6.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (6.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (124.8ms)
  Rendered layouts/_headcontent.html.erb (2141.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.8ms)
  Rendered layouts/_settingnav.html.erb (56.7ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 2611ms (Views: 2361.4ms | ActiveRecord: 54.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:54:53 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (89.3ms)
  Rendered layouts/_headcontent.html.erb (437.1ms)
  Rendered layouts/_layout_common_js.html.erb (7.3ms)
  Rendered layouts/_logoheader.html.erb (11.1ms)
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 620ms (Views: 583.2ms | ActiveRecord: 15.4ms)


Started GET "/users/21/user_profile" for 127.0.0.1 at 2017-03-25 19:54:59 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (12.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5)[0m
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (134.3ms)
  Rendered layouts/_headcontent.html.erb (431.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.2ms)
  Rendered layouts/_settingnav.html.erb (41.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 675ms (Views: 598.4ms | ActiveRecord: 50.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:55:04 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (39.4ms)
  Rendered layouts/_headcontent.html.erb (477.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (4.8ms)
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 613ms (Views: 583.7ms | ActiveRecord: 11.9ms)


Started GET "/users/26/user_profile" for 127.0.0.1 at 2017-03-25 19:55:08 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (1.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/user_profile.html.erb within layouts/admin (14.0ms)
  Rendered layouts/_headcontent.html.erb (440.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.6ms)
  Rendered layouts/_settingnav.html.erb (41.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 564ms (Views: 524.5ms | ActiveRecord: 12.7ms)


Started GET "/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:55:19 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (2.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (39.8ms)
  Rendered layouts/_headcontent.html.erb (418.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_settingnav.html.erb (46.2ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (5.5ms)
Completed 200 OK in 585ms (Views: 538.1ms | ActiveRecord: 23.0ms)


Started GET "/en/users/18/user_permissions?user_id=18" for 127.0.0.1 at 2017-03-25 19:55:34 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"18", "locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (8.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (1.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (173.2ms)
  Rendered layouts/_headcontent.html.erb (452.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.2ms)
  Rendered layouts/_settingnav.html.erb (53.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 734ms (Views: 667.9ms | ActiveRecord: 56.2ms)


Started PUT "/users/18/updatePermissions" for 127.0.0.1 at 2017-03-25 19:55:40 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Zr8AV3iL9qFamUXZRsSEfiMyumiZZ1BNhbc2lYP1IayvNkCx0S6KBsjo5yJYn/RICd9b1SKo1PnBxcf8TgS1bg==", "permissions"=>{"2"=>"1"}, "commit"=>"Save Changes", "id"=>"18"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (0.4ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (4.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:55:40.965412', "updated_at" = '2017-03-25 16:55:40.965478' WHERE "users_permissions"."id" = $1[0m  [["id", 15]]
  [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-25 16:55:40.984101', "updated_at" = '2017-03-25 16:55:40.984139' WHERE "users_permissions"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (8.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 18], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-25 16:55:40 UTC], ["updated_at", 2017-03-25 16:55:40 UTC]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/18/user_profile
Completed 302 Found in 89ms (ActiveRecord: 39.7ms)


Started GET "/en/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:55:41 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (3.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 2[0m
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (32.6ms)
  Rendered layouts/_headcontent.html.erb (475.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.8ms)
  Rendered layouts/_settingnav.html.erb (113.7ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 700ms (Views: 657.8ms | ActiveRecord: 7.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:55:45 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (49.5ms)
  Rendered layouts/_headcontent.html.erb (458.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  Rendered layouts/_settingnav.html.erb (33.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 604ms (Views: 579.9ms | ActiveRecord: 9.7ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-25 19:55:49 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"DEB8Y8vC2g3oj63naAKz2Bvleu1ls/IpsgG5kUEVbYnFyTyFYmemqnr+Dxx2WcPuMQibUN58dp32c0j4jOT5Sw==", "locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.7ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 21], ["id", 21]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 38ms (ActiveRecord: 11.1ms)


Started GET "/en" for 127.0.0.1 at 2017-03-25 19:55:49 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 16ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-25 19:55:49 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (5.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (52.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 523ms (Views: 520.3ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-25 19:55:56 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"FX0KSbLl0OhEKCGiwi9hMWENlnRS6fnI7sFtS4YrOrBVjz06egJHdLoe7P8kXfeFa6hUiPyndfefvPekBW57xg==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-25 16:55:56 UTC], ["last_sign_in_at", 2017-03-23 07:01:29 UTC], ["sign_in_count", 21], ["updated_at", 2017-03-25 16:55:56 UTC], ["modified_by", nil], ["id", 18]]
  [1m[35m (41.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 383ms (ActiveRecord: 44.3ms)


Started GET "/en" for 127.0.0.1 at 2017-03-25 19:55:56 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (13.1ms)
  Rendered layouts/_logoheader.html.erb (14.1ms)
  Rendered layouts/_navigation.html.erb (38.0ms)
  Rendered layouts/_topnavbar.html.erb (3.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 573ms (Views: 561.2ms | ActiveRecord: 2.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-25 19:56:01 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.4ms)
  Rendered layouts/_headcontent.html.erb (518.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (6.1ms)
  Rendered layouts/_settingnav.html.erb (83.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 668ms (Views: 654.9ms | ActiveRecord: 2.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:56:06 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (8.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  Rendered users/index.html.erb within layouts/admin (57.0ms)
  Rendered layouts/_headcontent.html.erb (510.1ms)
  Rendered layouts/_layout_common_js.html.erb (2.1ms)
  Rendered layouts/_logoheader.html.erb (21.2ms)
  Rendered layouts/_settingnav.html.erb (62.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 679ms (Views: 644.5ms | ActiveRecord: 17.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:58:37 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 234ms (ActiveRecord: 29.1ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-25 19:58:38 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (6.0ms)
  Rendered layouts/_headcontent.html.erb (2092.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.8ms)
  [1m[35m (7.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (52.6ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2209ms (Views: 2187.8ms | ActiveRecord: 16.5ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-25 19:58:50 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nenfMWu9xk8v4WrWwbSeZnjhphSCPMt0EnWXdCR/kJI8DMyTZJnH6VWfvCc+IAZY7ppoydX22fImX9PMWVPIkA==", "locale"=>"en"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 18], ["id", 18]]
  [1m[35m (39.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 98ms (ActiveRecord: 48.8ms)


Started GET "/en" for 127.0.0.1 at 2017-03-25 19:58:50 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 7ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-25 19:58:50 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (3.7ms)
  Rendered devise/sessions/new.html.erb within layouts/application (48.8ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_topnavbar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (5.0ms)
Completed 200 OK in 600ms (Views: 595.8ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-25 19:59:03 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JMgCMPkHOXWpLNeN/3QYBzWDY0qKobYY1F1DqXoN8BC4Fsy2+SQ13/KvWpBvVEBvtlla/S/bggtfWSZYkMErGw==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitd@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 16ms (ActiveRecord: 5.6ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JMgCMPkHOXWpLNeN/3QYBzWDY0qKobYY1F1DqXoN8BC4Fsy2+SQ13/KvWpBvVEBvtlla/S/bggtfWSZYkMErGw==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (3.0ms)
  Rendered devise/sessions/new.html.erb within layouts/application (21.4ms)
  Rendered layouts/_layout_common_js.html.erb (2.3ms)
  Rendered layouts/_topnavbar.html.erb (5.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 721ms (Views: 436.2ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-25 19:59:18 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"yIoIU1oJ90iYzTK0szrRFwhED0/hJDNvQk2XpU/xBmVUVMbVWir74sNOv6kjGol/i542+EReB3zJSfJUpT3dbg==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitd@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (ActiveRecord: 1.5ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"yIoIU1oJ90iYzTK0szrRFwhED0/hJDNvQk2XpU/xBmVUVMbVWir74sNOv6kjGol/i542+EReB3zJSfJUpT3dbg==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (2.9ms)
  Rendered devise/sessions/new.html.erb within layouts/application (14.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 765ms (Views: 483.6ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-25 19:59:28 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"e+nYLuyQEHZJcEvpLMDSvBaP/m2PhNnEIT6EpsVS1N3nNxao7LMc3BLzxvS84IrUlVXH2ir+7deqOuFXL54P1g==", "user"=>{"email"=>"dawitdd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitdd@gmail.com"], ["LIMIT", 1]]
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-25 16:59:28 UTC], ["last_sign_in_at", 2017-03-25 16:14:37 UTC], ["sign_in_count", 5], ["updated_at", 2017-03-25 16:59:28 UTC], ["modified_by", nil], ["id", 21]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 339ms (ActiveRecord: 20.7ms)


Started GET "/en" for 127.0.0.1 at 2017-03-25 19:59:28 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (3.8ms)
  Rendered layouts/_logoheader.html.erb (9.0ms)
  Rendered layouts/_navigation.html.erb (31.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 541ms (Views: 532.6ms | ActiveRecord: 3.8ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-25 19:59:33 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.0ms)
  Rendered layouts/_headcontent.html.erb (465.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.6ms)
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 562ms (Views: 547.3ms | ActiveRecord: 10.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 19:59:38 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (122.5ms)
  Rendered layouts/_headcontent.html.erb (446.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.0ms)
  Rendered layouts/_topnavbar.html.erb (7.7ms)
  Rendered layouts/_footer.html.erb (3.2ms)
Completed 200 OK in 684ms (Views: 645.9ms | ActiveRecord: 18.5ms)


Started GET "/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:59:44 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (1.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 2[0m
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (67.3ms)
  Rendered layouts/_headcontent.html.erb (426.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.7ms)
  Rendered layouts/_topnavbar.html.erb (2.5ms)
  Rendered layouts/_footer.html.erb (3.2ms)
Completed 200 OK in 661ms (Views: 572.7ms | ActiveRecord: 31.5ms)


Started GET "/en/users/18/user_permissions?user_id=18" for 127.0.0.1 at 2017-03-25 19:59:55 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"18", "locale"=>"en", "id"=>"18"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (5.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (166.8ms)
  Rendered layouts/_headcontent.html.erb (459.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (3.2ms)
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (60.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 732ms (Views: 654.1ms | ActiveRecord: 70.3ms)


Started GET "/users/18/user_profile" for 127.0.0.1 at 2017-03-25 19:59:59 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 2[0m
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (29.7ms)
  Rendered layouts/_headcontent.html.erb (557.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.0ms)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (72.5ms)
  Rendered layouts/_topnavbar.html.erb (8.2ms)
  Rendered layouts/_footer.html.erb (6.8ms)
Completed 200 OK in 752ms (Views: 707.6ms | ActiveRecord: 12.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 20:00:08 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (51.7ms)
  Rendered layouts/_headcontent.html.erb (423.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (37.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 586ms (Views: 557.4ms | ActiveRecord: 6.7ms)


Started GET "/users/21/user_profile" for 127.0.0.1 at 2017-03-25 20:00:12 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 21]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (5.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mDepartment Exists (6.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (2.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 5)[0m
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 5], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (137.1ms)
  Rendered layouts/_headcontent.html.erb (499.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.1ms)
  Rendered layouts/_topnavbar.html.erb (5.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 752ms (Views: 683.9ms | ActiveRecord: 44.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-25 20:00:23 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (44.9ms)
  Rendered layouts/_headcontent.html.erb (450.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (38.2ms)
  Rendered layouts/_topnavbar.html.erb (9.2ms)
  Rendered layouts/_footer.html.erb (4.8ms)
Completed 200 OK in 612ms (Views: 573.9ms | ActiveRecord: 15.3ms)


Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-26 14:15:16 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (66.2ms)
  Rendered layouts/_headcontent.html.erb (478.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.8ms)
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.6ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 646ms (Views: 605.8ms | ActiveRecord: 28.7ms)


Started GET "/users/18/roles" for 127.0.0.1 at 2017-03-26 14:15:27 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (2.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (8.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (45.6ms)
  Rendered layouts/_headcontent.html.erb (543.6ms)
  Rendered layouts/_layout_common_js.html.erb (4.6ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (73.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 724ms (Views: 679.7ms | ActiveRecord: 26.0ms)


Started GET "/en/users/26/edit" for 127.0.0.1 at 2017-03-26 19:05:28 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.8ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c43badf003666a0d/variables" for 127.0.0.1 at 2017-03-26 19:05:28 +0300
Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-26 19:06:50 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (43.0ms)
  Rendered layouts/_headcontent.html.erb (520.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (83.1ms)
  Rendered layouts/_topnavbar.html.erb (8.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 720ms (Views: 694.6ms | ActiveRecord: 11.3ms)


Started GET "/users/26/user_profile" for 127.0.0.1 at 2017-03-26 19:06:59 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/user_profile.html.erb within layouts/admin (17.9ms)
  Rendered layouts/_headcontent.html.erb (586.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.7ms)
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.0ms)
  Rendered layouts/_topnavbar.html.erb (3.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 741ms (Views: 697.8ms | ActiveRecord: 15.3ms)


Started GET "/users/18/user_profile" for 127.0.0.1 at 2017-03-26 19:07:06 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"18"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 18]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 2[0m
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (22.8ms)
  Rendered layouts/_headcontent.html.erb (536.2ms)
  Rendered layouts/_layout_common_js.html.erb (5.2ms)
  Rendered layouts/_logoheader.html.erb (14.5ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.3ms)
  Rendered layouts/_topnavbar.html.erb (3.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 684ms (Views: 641.2ms | ActiveRecord: 19.2ms)


Started GET "/users/21/roles" for 127.0.0.1 at 2017-03-26 19:07:18 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 21], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (42.2ms)
  Rendered layouts/_headcontent.html.erb (474.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (8.2ms)
  [1m[35m (13.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (65.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 632ms (Views: 590.5ms | ActiveRecord: 27.8ms)


Started GET "/users/26/user_profile" for 127.0.0.1 at 2017-03-26 19:07:49 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/user_profile.html.erb within layouts/admin (15.9ms)
  Rendered layouts/_headcontent.html.erb (413.6ms)
  Rendered layouts/_layout_common_js.html.erb (2.4ms)
  Rendered layouts/_logoheader.html.erb (10.1ms)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.2ms)
  Rendered layouts/_topnavbar.html.erb (2.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 532ms (Views: 491.9ms | ActiveRecord: 15.0ms)


Started GET "/en/users/26/user_permissions?user_id=26" for 127.0.0.1 at 2017-03-26 19:08:01 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (147.6ms)
  Rendered layouts/_headcontent.html.erb (436.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (2.7ms)
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.5ms)
  Rendered layouts/_topnavbar.html.erb (6.3ms)
  Rendered layouts/_footer.html.erb (1.5ms)
Completed 200 OK in 696ms (Views: 635.5ms | ActiveRecord: 48.5ms)


Started PUT "/users/26/updatePermissions" for 127.0.0.1 at 2017-03-26 19:08:12 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"EN99Y5daudCHqn4UOEbu5W7paDUHplmlzQpXLwnKxOulj46uoZVtSVZWFDHF6w6RdXZ9VtkawYamdjofkEDYHg==", "permissions"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (1.2ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-26 16:08:12 UTC], ["updated_at", 2017-03-26 16:08:12 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-26 16:08:12 UTC], ["updated_at", 2017-03-26 16:08:12 UTC]]
  [1m[35m (49.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/user_profile
Completed 302 Found in 109ms (ActiveRecord: 67.6ms)


Started GET "/en/users/26/user_profile" for 127.0.0.1 at 2017-03-26 19:08:12 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (32.3ms)
  Rendered layouts/_headcontent.html.erb (412.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (24.4ms)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (61.4ms)
  Rendered layouts/_topnavbar.html.erb (7.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 577ms (Views: 523.4ms | ActiveRecord: 16.4ms)


Started GET "/en/users/26/user_departments?user_id=26" for 127.0.0.1 at 2017-03-26 19:08:26 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"26", "locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (38.0ms)
  Rendered layouts/_headcontent.html.erb (457.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (10.9ms)
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (54.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 601ms (Views: 569.0ms | ActiveRecord: 17.1ms)


Started PUT "/users/26/updateDepartments" for 127.0.0.1 at 2017-03-26 19:08:31 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"e4BEkL5FhvwKfWLDmJkeKGcQjPzhJqgIGVuGBmquJDfO0LddiIpSZduBCOZlNP5cfI+Znz+aMCtyJ+s28yQ4wg==", "departments"=>{"6"=>"1"}, "commit"=>"Save Changes", "id"=>"26"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.4ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (4.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 26], ["department_id", 6], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-26 16:08:31 UTC], ["updated_at", 2017-03-26 16:08:31 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/26/user_profile
Completed 302 Found in 56ms (ActiveRecord: 13.8ms)


Started GET "/en/users/26/user_profile" for 127.0.0.1 at 2017-03-26 19:08:32 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"26"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 6[0m
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (39.6ms)
  Rendered layouts/_headcontent.html.erb (385.5ms)
  Rendered layouts/_layout_common_js.html.erb (5.3ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (3.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 532ms (Views: 488.8ms | ActiveRecord: 19.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-26 19:08:49 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (45.1ms)
  Rendered layouts/_headcontent.html.erb (426.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (48.6ms)
  Rendered layouts/_topnavbar.html.erb (2.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 571ms (Views: 540.0ms | ActiveRecord: 15.3ms)


Started GET "/users/26/roles" for 127.0.0.1 at 2017-03-26 19:16:31 +0300
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  Rendering users/roles.html.erb within layouts/admin
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  [1m[36mRole Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 76], ["LIMIT", 1]]
  [1m[36mRole Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 77], ["LIMIT", 1]]
  [1m[36mRole Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 78], ["LIMIT", 1]]
  [1m[36mRole Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 79], ["LIMIT", 1]]
  Rendered users/roles.html.erb within layouts/admin (37.6ms)
  Rendered layouts/_headcontent.html.erb (467.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (14.6ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.3ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 594ms (Views: 571.3ms | ActiveRecord: 14.1ms)


Started GET "/en/roles" for 127.0.0.1 at 2017-03-26 19:16:50 +0300
Processing by RolesController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering roles/index.html.erb within layouts/admin
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL[0m
  Rendered roles/index.html.erb within layouts/admin (10.5ms)
  Rendered layouts/_headcontent.html.erb (434.2ms)
  Rendered layouts/_layout_common_js.html.erb (3.9ms)
  Rendered layouts/_logoheader.html.erb (13.4ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 543ms (Views: 529.5ms | ActiveRecord: 4.4ms)


Started GET "/en/hubs" for 127.0.0.1 at 2017-03-26 19:17:08 +0300
Processing by HubsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering hubs/index.html.erb within layouts/admin
  [1m[36mHub Load (63.1ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendered hubs/index.html.erb within layouts/admin (96.4ms)
  Rendered layouts/_headcontent.html.erb (471.0ms)
  Rendered layouts/_layout_common_js.html.erb (2.9ms)
  Rendered layouts/_logoheader.html.erb (7.8ms)
  [1m[35m (9.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (67.0ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 733ms (Views: 589.0ms | ActiveRecord: 79.1ms)


Started GET "/en/fdps" for 127.0.0.1 at 2017-03-26 19:17:16 +0300
Processing by FdpsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering fdps/index.html.erb within layouts/admin
  [1m[36mFdp Load (0.7ms)[0m  [1m[34mSELECT "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (32.5ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mLocation Load (2.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  Rendered fdps/index.html.erb within layouts/admin (118.5ms)
  Rendered layouts/_headcontent.html.erb (434.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (16.1ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.2ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 662ms (Views: 589.2ms | ActiveRecord: 53.8ms)


Started GET "/en/fdp_contacts" for 127.0.0.1 at 2017-03-26 19:17:23 +0300
Processing by FdpContactsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering fdp_contacts/index.html.erb within layouts/admin
  [1m[36mFdpContact Load (0.7ms)[0m  [1m[34mSELECT "fdp_contacts".* FROM "fdp_contacts" WHERE "fdp_contacts"."deleted_at" IS NULL[0m
  [1m[36mFdp Load (2.3ms)[0m  [1m[34mSELECT  "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL AND "fdps"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mLocation Load (0.7ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mLocation Load (0.6ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL AND "fdps"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  Rendered fdp_contacts/index.html.erb within layouts/admin (87.3ms)
  Rendered layouts/_headcontent.html.erb (403.2ms)
  Rendered layouts/_layout_common_js.html.erb (5.4ms)
  Rendered layouts/_logoheader.html.erb (10.3ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 595ms (Views: 566.3ms | ActiveRecord: 10.6ms)


Started GET "/en/fdp_contacts/11/edit" for 127.0.0.1 at 2017-03-26 19:17:28 +0300
Processing by FdpContactsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"11"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mFdpContact Load (0.7ms)[0m  [1m[34mSELECT  "fdp_contacts".* FROM "fdp_contacts" WHERE "fdp_contacts"."deleted_at" IS NULL AND "fdp_contacts"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  Rendering fdp_contacts/edit.html.erb within layouts/admin
  [1m[36mFdp Load (0.8ms)[0m  [1m[34mSELECT "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL ORDER BY "fdps"."name" ASC[0m
  [1m[36mLocation Load (0.8ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mLocation Load (4.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  Rendered fdp_contacts/_form.html.erb (71.7ms)
  Rendered fdp_contacts/edit.html.erb within layouts/admin (79.1ms)
  Rendered layouts/_headcontent.html.erb (438.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.2ms)
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.8ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 610ms (Views: 587.8ms | ActiveRecord: 12.7ms)


Started GET "/en/fdp_contacts" for 127.0.0.1 at 2017-03-26 19:17:34 +0300
Processing by FdpContactsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering fdp_contacts/index.html.erb within layouts/admin
  [1m[36mFdpContact Load (5.5ms)[0m  [1m[34mSELECT "fdp_contacts".* FROM "fdp_contacts" WHERE "fdp_contacts"."deleted_at" IS NULL[0m
  [1m[36mFdp Load (2.7ms)[0m  [1m[34mSELECT  "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL AND "fdps"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mLocation Load (2.5ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mLocation Load (4.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "fdps".* FROM "fdps" WHERE "fdps"."deleted_at" IS NULL AND "fdps"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" IN (4, 5) ORDER BY coalesce("locations"."ancestry", '')[0m
  Rendered fdp_contacts/index.html.erb within layouts/admin (53.7ms)
  Rendered layouts/_headcontent.html.erb (412.8ms)
  Rendered layouts/_layout_common_js.html.erb (3.8ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 567ms (Views: 539.0ms | ActiveRecord: 20.3ms)


Started GET "/" for 127.0.0.1 at 2017-03-27 09:35:29 +0300
  [1m[36mActiveRecord::SchemaMigration Load (16.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (175.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (2.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_navigation.html.erb (140.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 4755ms (Views: 4127.5ms | ActiveRecord: 386.6ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 09:35:40 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.0ms)
  Rendered layouts/_headcontent.html.erb (266.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (31.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (226.9ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (1.3ms)
Completed 200 OK in 587ms (Views: 495.1ms | ActiveRecord: 64.0ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 09:35:44 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (18.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (42.7ms)
  Rendered layouts/_headcontent.html.erb (288.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 441ms (Views: 377.1ms | ActiveRecord: 27.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 09:35:51 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (45.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (130.8ms)
  Rendered layouts/_headcontent.html.erb (286.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (33.9ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 512ms (Views: 428.0ms | ActiveRecord: 59.7ms)


Started GET "/users/26/user_profile" for 127.0.0.1 at 2017-03-27 09:35:58 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[35m (45.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 26]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 26]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 6[0m
  [1m[36mDepartment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Load (3.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2)[0m
  [1m[36mPermission Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 26], ["id", 2], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (93.7ms)
  Rendered layouts/_headcontent.html.erb (341.2ms)
  Rendered layouts/_layout_common_js.html.erb (3.9ms)
  Rendered layouts/_logoheader.html.erb (6.0ms)
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (55.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (4.0ms)
Completed 200 OK in 684ms (Views: 495.9ms | ActiveRecord: 77.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 09:36:46 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (28.8ms)
  Rendered layouts/_headcontent.html.erb (282.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (28.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 388ms (Views: 361.2ms | ActiveRecord: 14.2ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-27 09:48:47 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"OAiI7pJp6AkiQuTRb4bKzfN3csiPE/BcE9FB4cYEohmNWHsjpKY8kPO+jvSSKyq56Ohnq1GvaH94rSzRX46+7A==", "locale"=>"en"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.3ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 21], ["id", 21]]
  [1m[35m (51.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 74ms (ActiveRecord: 62.7ms)


Started GET "/en" for 127.0.0.1 at 2017-03-27 09:48:47 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-27 09:48:47 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (4.1ms)
  Rendered devise/sessions/new.html.erb within layouts/application (91.3ms)
  Rendered layouts/_layout_common_js.html.erb (4.8ms)
  Rendered layouts/_topnavbar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 439ms (Views: 433.6ms | ActiveRecord: 0.0ms)


Started GET "/en/users/sign_up" for 127.0.0.1 at 2017-03-27 09:48:56 +0300
Processing by Devise::RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.3ms)
  Rendered devise/registrations/new.html.erb within layouts/application (15.0ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_topnavbar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (2.8ms)
Completed 200 OK in 504ms (Views: 501.5ms | ActiveRecord: 0.0ms)


Started POST "/en/users" for 127.0.0.1 at 2017-03-27 09:49:31 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tBM7J62g2thEZ2UMcRYUUap0HzWhmKdKAl+ZZap2L9vq/1UXOw+pL1teW6e7GjoBz4aWgdnPF+cMp/qRlOzwlA==", "user"=>{"first_name"=>"beza", "last_name"=>"m", "email"=>"beza@cats.org", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
Unpermitted parameters: first_name, last_name
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (3.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."deleted_at" IS NULL LIMIT $2[0m  [["email", "beza@cats.org"], ["LIMIT", 1]]
  [1m[35mSQL (32.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "beza@cats.org"], ["encrypted_password", "$2a$11$jIbWWrP41qoc5hcOsQCJoOoTOG9rVNlVsiRqzA9MIKRKq8bSsjCvS"], ["created_at", 2017-03-27 06:49:32 UTC], ["updated_at", 2017-03-27 06:49:32 UTC]]
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT  "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL AND "roles"."name" = $1 AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT $2[0m  [["name", "guest"], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL AND "roles"."id" = 77[0m
  [1m[35mSQL (11.0ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 27], ["role_id", 77]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "current_sign_in_ip" = $4, "last_sign_in_ip" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["sign_in_count", 1], ["current_sign_in_at", 2017-03-27 06:49:32 UTC], ["last_sign_in_at", 2017-03-27 06:49:32 UTC], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["updated_at", 2017-03-27 06:49:32 UTC], ["id", 27]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 546ms (ActiveRecord: 78.3ms)


Started GET "/en" for 127.0.0.1 at 2017-03-27 09:49:32 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (7.0ms)
  Rendered layouts/_navigation.html.erb (21.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 367ms (Views: 354.6ms | ActiveRecord: 0.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 09:49:37 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.7ms)
  Rendered layouts/_headcontent.html.erb (260.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  [1m[35m (4.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 27], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (36.1ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (2.3ms)
Completed 200 OK in 327ms (Views: 316.5ms | ActiveRecord: 6.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 09:49:42 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 27], ["name", "HRD"]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 21ms (ActiveRecord: 3.7ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 09:49:42 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (4.9ms)
  Rendered layouts/_headcontent.html.erb (284.0ms)
  Rendered layouts/_layout_common_js.html.erb (1.9ms)
  Rendered layouts/_logoheader.html.erb (9.6ms)
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 27], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 361ms (Views: 348.3ms | ActiveRecord: 5.9ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-27 09:49:51 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"lRB9Vbe/Km5Go7AolRmxwfRy6QkmJPY+sWyNUfIDMHrL/BNlIRBZmVmajoNfFZ+RkYBgvV5zRpO/lO6lzJnvNQ==", "locale"=>"en"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.1ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 27], ["id", 27]]
  [1m[35m (50.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 71ms (ActiveRecord: 64.0ms)


Started GET "/en" for 127.0.0.1 at 2017-03-27 09:49:51 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-27 09:49:52 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (16.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.6ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 364ms (Views: 361.6ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-27 09:49:59 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dgn9ceb0QVk+Y5lBOWsnu6p4P1XihPTrL7Z9ELKxYsFmy9O3hWZzY9l/wDqEG75mjEVZ9+qA6Ywm6B5yZCfqkg==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-27 06:49:59 UTC], ["last_sign_in_at", 2017-03-25 16:55:56 UTC], ["sign_in_count", 22], ["updated_at", 2017-03-27 06:49:59 UTC], ["modified_by", nil], ["id", 18]]
  [1m[35m (39.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 391ms (ActiveRecord: 48.7ms)


Started GET "/en" for 127.0.0.1 at 2017-03-27 09:49:59 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_navigation.html.erb (17.5ms)
  Rendered layouts/_topnavbar.html.erb (7.3ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 343ms (Views: 336.5ms | ActiveRecord: 0.6ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 09:50:03 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.6ms)
  Rendered layouts/_headcontent.html.erb (284.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (33.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 354ms (Views: 347.2ms | ActiveRecord: 3.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 09:50:08 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 27ms (ActiveRecord: 4.4ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 09:50:08 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (11.1ms)
  Rendered layouts/_headcontent.html.erb (361.1ms)
  Rendered layouts/_layout_common_js.html.erb (7.1ms)
  Rendered layouts/_logoheader.html.erb (5.0ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (37.1ms)
  Rendered layouts/_topnavbar.html.erb (8.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 459ms (Views: 447.5ms | ActiveRecord: 8.4ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-27 09:50:17 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"+MxCzqnYdL+dUgHvVgsXASC+m8GimUHFlUxQSoehYNLAKc4+lwEPZLUf3IIwSwH2TiujoSTSCwOxrSkScQW1pQ==", "locale"=>"en"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 18], ["id", 18]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 22ms (ActiveRecord: 7.8ms)


Started GET "/en" for 127.0.0.1 at 2017-03-27 09:50:17 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-27 09:50:17 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (5.3ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.8ms)
  Rendered layouts/_layout_common_js.html.erb (1.1ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (7.4ms)
Completed 200 OK in 320ms (Views: 317.0ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-27 09:50:39 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1kgEiVfsDbN1xYU7sLppGxCJ2K5a0+hnQ81imXvR90jBbxNkQ91+vcE26PLpMcAyjcqQgotyrWtR/FR2PMlrPg==", "user"=>{"email"=>"dawidd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawidd@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 7ms (ActiveRecord: 4.3ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1kgEiVfsDbN1xYU7sLppGxCJ2K5a0+hnQ81imXvR90jBbxNkQ91+vcE26PLpMcAyjcqQgotyrWtR/FR2PMlrPg==", "user"=>{"email"=>"dawidd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.0ms)
  Rendered devise/sessions/new.html.erb within layouts/application (8.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_topnavbar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (5.5ms)
Completed 200 OK in 610ms (Views: 321.6ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-27 09:50:57 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"M/PmZ69xNw2ECJiVGNTHCu6hR5w0G10UvQPsVC6SEBgk1PGKu0BEAzD79VxBX24jc+IPsOW6GBivMtq7aYqMbg==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitd@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 13ms (ActiveRecord: 9.6ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"M/PmZ69xNw2ECJiVGNTHCu6hR5w0G10UvQPsVC6SEBgk1PGKu0BEAzD79VxBX24jc+IPsOW6GBivMtq7aYqMbg==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (9.8ms)
Completed 200 OK in 623ms (Views: 337.8ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-27 09:51:06 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gaLoCBjFBbvz9xhvtAjRStCQFolxYPcQaZnuDwkST1WWhf/lDPR2tUcEdabtg3hjTdNepaDBshx7qNjgTgrTIw==", "user"=>{"email"=>"dawitdd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitdd@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.3ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-27 06:51:07 UTC], ["last_sign_in_at", 2017-03-25 16:59:28 UTC], ["sign_in_count", 6], ["updated_at", 2017-03-27 06:51:07 UTC], ["modified_by", nil], ["id", 21]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 309ms (ActiveRecord: 11.5ms)


Started GET "/en" for 127.0.0.1 at 2017-03-27 09:51:07 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (7.3ms)
  Rendered layouts/_logoheader.html.erb (5.2ms)
  Rendered layouts/_navigation.html.erb (14.1ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 309ms (Views: 300.8ms | ActiveRecord: 2.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 09:51:13 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (9.9ms)
  Rendered layouts/_headcontent.html.erb (293.9ms)
  Rendered layouts/_layout_common_js.html.erb (6.1ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (4.9ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 386ms (Views: 381.2ms | ActiveRecord: 2.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 09:51:21 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (72.9ms)
  Rendered layouts/_headcontent.html.erb (283.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (6.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (46.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 454ms (Views: 418.3ms | ActiveRecord: 21.7ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-27 09:51:35 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.2ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/user_profile.html.erb within layouts/admin (7.9ms)
  Rendered layouts/_headcontent.html.erb (300.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (8.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 396ms (Views: 361.5ms | ActiveRecord: 13.0ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-27 09:51:58 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (45.2ms)
  Rendered layouts/_headcontent.html.erb (336.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (37.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 520ms (Views: 423.8ms | ActiveRecord: 15.7ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-27 09:52:10 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Uknk1K23a3peJHYMXF5NTUlzqpcqrPLkVnbsVOftywVNYaTqj01qHG0xUVBWJauDNkW8BaKkwQywQit4EG++Uw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (62.8ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:52:10 UTC], ["updated_at", 2017-03-27 06:52:10 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:52:10 UTC], ["updated_at", 2017-03-27 06:52:10 UTC]]
  [1m[35m (59.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 171ms (ActiveRecord: 136.7ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 09:52:11 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (5.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (0.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/user_profile.html.erb within layouts/admin (22.9ms)
  Rendered layouts/_headcontent.html.erb (296.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (9.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (42.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 411ms (Views: 360.1ms | ActiveRecord: 29.7ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-27 09:52:19 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (124.7ms)
  Rendered layouts/_headcontent.html.erb (336.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 580ms (Views: 454.6ms | ActiveRecord: 80.1ms)


Started PUT "/users/27/updatePermissions" for 127.0.0.1 at 2017-03-27 09:52:34 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y+gecXom4mpECyvrq//AzI8NBIhmkAGCalEmvmVgNNPUwF5PWNzjDHceDLehhCYC8DsSGu6YMmqMZeGSkuJBhQ==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (5.6ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (48.4ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:52:34 UTC], ["updated_at", 2017-03-27 06:52:34 UTC]]
  [1m[35m (31.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:52:34 UTC], ["updated_at", 2017-03-27 06:52:34 UTC]]
  [1m[35m (38.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 3], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:52:34 UTC], ["updated_at", 2017-03-27 06:52:34 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 172ms (ActiveRecord: 139.4ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 09:52:34 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (50.4ms)
  Rendered layouts/_headcontent.html.erb (331.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (28.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (4.5ms)
Completed 200 OK in 460ms (Views: 413.3ms | ActiveRecord: 30.6ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-27 09:56:16 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 4.6ms)



NameError - uninitialized constant UsersController::RoleType:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:32:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ddf625602ec68451/variables" for 127.0.0.1 at 2017-03-27 09:56:16 +0300
Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 09:56:58 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (3.4ms)
  Rendered layouts/_headcontent.html.erb (318.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.0ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (42.5ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 392ms (Views: 381.7ms | ActiveRecord: 1.7ms)


Started GET "/departments/1/edit?locale=en" for 127.0.0.1 at 2017-03-27 09:57:01 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.3ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/admin
  Rendered departments/_form.html.erb (4.7ms)
  Rendered departments/edit.html.erb within layouts/admin (30.3ms)
  Rendered layouts/_headcontent.html.erb (375.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (39.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 742ms (Views: 457.0ms | ActiveRecord: 16.2ms)


Started PATCH "/departments/1?locale=en" for 127.0.0.1 at 2017-03-27 09:57:12 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MIjPTNYXxdsjQcuCTI/LYXjTIlSG5+hR8dI2uclTf6kvoI9y9O3EvRBU7N5G9C2vB+U0xg7v27kX5vGVPtEK/w==", "department"=>{"name"=>"Early Warning", "description"=>"EW"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "Early Warning"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.9ms)[0m  [1m[33mUPDATE "departments" SET "name" = $1, "description" = $2, "modified_by" = $3, "updated_at" = $4 WHERE "departments"."id" = $5[0m  [["name", "Early Warning"], ["description", "EW"], ["modified_by", 21], ["updated_at", 2017-03-27 06:57:12 UTC], ["id", 1]]
  [1m[35m (150.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 188ms (ActiveRecord: 161.4ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 09:57:12 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (3.9ms)
  Rendered layouts/_headcontent.html.erb (413.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (39.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 491ms (Views: 482.7ms | ActiveRecord: 4.7ms)


Started GET "/departments/2/edit?locale=en" for 127.0.0.1 at 2017-03-27 09:57:17 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/admin
  Rendered departments/_form.html.erb (10.4ms)
  Rendered departments/edit.html.erb within layouts/admin (13.2ms)
  Rendered layouts/_headcontent.html.erb (302.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.8ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (34.5ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 383ms (Views: 374.0ms | ActiveRecord: 4.8ms)


Started PATCH "/departments/2?locale=en" for 127.0.0.1 at 2017-03-27 09:57:29 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xyfoKH4uk8VCqNmEZxuATwfUrmm/1BVkL0wHHOJBMdjYD6gWXNSSo3G9/thtYGaBeOK4+zfcJozJeMAwFcNEjg==", "department"=>{"name"=>"PSNP/FSCD", "description"=>"Food Security"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"2"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "PSNP/FSCD"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE "departments" SET "name" = $1, "description" = $2, "modified_by" = $3, "updated_at" = $4 WHERE "departments"."id" = $5[0m  [["name", "PSNP/FSCD"], ["description", "Food Security"], ["modified_by", 21], ["updated_at", 2017-03-27 06:57:29 UTC], ["id", 2]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 32ms (ActiveRecord: 11.8ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 09:57:29 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (3.2ms)
  Rendered layouts/_headcontent.html.erb (290.4ms)
  Rendered layouts/_layout_common_js.html.erb (2.8ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (60.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 390ms (Views: 382.6ms | ActiveRecord: 4.1ms)


Started GET "/departments/4/edit?locale=en" for 127.0.0.1 at 2017-03-27 09:57:34 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"4"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/admin
  Rendered departments/_form.html.erb (6.7ms)
  Rendered departments/edit.html.erb within layouts/admin (8.4ms)
  Rendered layouts/_headcontent.html.erb (310.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (48.5ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 396ms (Views: 382.6ms | ActiveRecord: 5.0ms)


Started PATCH "/departments/4?locale=en" for 127.0.0.1 at 2017-03-27 09:57:40 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JZnrFMb9lIZ8cBhgsvIIMBlEsx+pF1wuZI+WHrY9hK06sasq5AeV4E9lPzy4ie7+ZnKljSEfb8aCu1EyQb/x+w==", "department"=>{"name"=>"Logistics", "description"=>""}, "commit"=>"Update Department", "locale"=>"en", "id"=>"4"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "Logistics"], ["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (2.8ms)[0m  [1m[33mUPDATE "departments" SET "name" = $1, "modified_by" = $2, "updated_at" = $3 WHERE "departments"."id" = $4[0m  [["name", "Logistics"], ["modified_by", 21], ["updated_at", 2017-03-27 06:57:40 UTC], ["id", 4]]
  [1m[35m (82.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 104ms (ActiveRecord: 93.6ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 09:57:40 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (4.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (12.2ms)
  Rendered layouts/_headcontent.html.erb (293.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.9ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (29.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 376ms (Views: 358.1ms | ActiveRecord: 9.1ms)


Started GET "/departments/6/edit?locale=en" for 127.0.0.1 at 2017-03-27 09:57:44 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"6"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/admin
  Rendered departments/_form.html.erb (2.1ms)
  Rendered departments/edit.html.erb within layouts/admin (5.0ms)
  Rendered layouts/_headcontent.html.erb (320.6ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (5.5ms)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (34.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 390ms (Views: 383.0ms | ActiveRecord: 3.4ms)


Started PATCH "/departments/6?locale=en" for 127.0.0.1 at 2017-03-27 09:57:56 +0300
Processing by DepartmentsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcGyuOL9mc8dmgCWgW8lXyQZ7gQ+ej5WxHTusz69/Jai6fKGwAeYqS6PJ8qLFMORWy/4lrZyDb4iQCmfyT+JwA==", "department"=>{"name"=>"Comodity Management Unit", "description"=>"CMU"}, "commit"=>"Update Department", "locale"=>"en", "id"=>"6"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDepartment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" WHERE "departments"."name" = $1 AND "departments"."deleted_at" IS NULL AND ("departments"."id" != $2) LIMIT $3[0m  [["name", "Comodity Management Unit"], ["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "departments" SET "name" = $1, "description" = $2, "modified_by" = $3, "updated_at" = $4 WHERE "departments"."id" = $5[0m  [["name", "Comodity Management Unit"], ["description", "CMU"], ["modified_by", 21], ["updated_at", 2017-03-27 06:57:56 UTC], ["id", 6]]
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/departments?locale=en
Completed 302 Found in 39ms (ActiveRecord: 26.1ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 09:57:56 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (7.9ms)
  Rendered layouts/_headcontent.html.erb (342.4ms)
  Rendered layouts/_layout_common_js.html.erb (3.1ms)
  Rendered layouts/_logoheader.html.erb (4.8ms)
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (31.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 411ms (Views: 396.3ms | ActiveRecord: 8.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 09:58:03 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (7.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (52.0ms)
  Rendered layouts/_headcontent.html.erb (250.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (30.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 375ms (Views: 348.5ms | ActiveRecord: 18.6ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-27 09:58:09 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (4.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (56.2ms)
  Rendered layouts/_headcontent.html.erb (293.1ms)
  Rendered layouts/_layout_common_js.html.erb (28.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (40.1ms)
  Rendered layouts/_topnavbar.html.erb (5.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 467ms (Views: 400.7ms | ActiveRecord: 34.6ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-27 09:58:20 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (2.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (136.1ms)
  Rendered layouts/_headcontent.html.erb (269.0ms)
  Rendered layouts/_layout_common_js.html.erb (8.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (31.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 474ms (Views: 391.7ms | ActiveRecord: 77.9ms)


Started PUT "/users/27/updatePermissions" for 127.0.0.1 at 2017-03-27 09:58:30 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mmg/mFlWBEp4c8B1uIJrSAZio/cePoDrBo+OxaioF5eFQH+me6wFLEtm5ymy+Y2GeVS1ZZY2swPgu0npXypiwQ==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1", "6"=>"1", "7"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (0.5ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-27 06:58:30.998396', "updated_at" = '2017-03-27 06:58:30.998442' WHERE "users_permissions"."id" = $1[0m  [["id", 20]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.5ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-27 06:58:31.001178', "updated_at" = '2017-03-27 06:58:31.001216' WHERE "users_permissions"."id" = $1[0m  [["id", 21]]
  [1m[35m (51.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-27 06:58:31.058439', "updated_at" = '2017-03-27 06:58:31.058480' WHERE "users_permissions"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:58:31 UTC], ["updated_at", 2017-03-27 06:58:31 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:58:31 UTC], ["updated_at", 2017-03-27 06:58:31 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 3], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:58:31 UTC], ["updated_at", 2017-03-27 06:58:31 UTC]]
  [1m[35m (44.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 6], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:58:31 UTC], ["updated_at", 2017-03-27 06:58:31 UTC]]
  [1m[35m (28.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 7], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 06:58:31 UTC], ["updated_at", 2017-03-27 06:58:31 UTC]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 192ms (ActiveRecord: 163.3ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 09:58:31 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (58.7ms)
  Rendered layouts/_headcontent.html.erb (269.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (40.4ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 423ms (Views: 359.2ms | ActiveRecord: 46.9ms)


Started GET "/en/users/27" for 127.0.0.1 at 2017-03-27 09:59:44 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.0ms)
  Rendered layouts/_headcontent.html.erb (316.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  [1m[35m (9.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (39.4ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 419ms (Views: 365.9ms | ActiveRecord: 11.7ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-27 10:00:20 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (32.4ms)
  Rendered layouts/_headcontent.html.erb (297.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (28.9ms)
  Rendered layouts/_topnavbar.html.erb (4.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 407ms (Views: 374.9ms | ActiveRecord: 20.0ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-27 10:00:28 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pIYI8fi9pwNPO5CGSM9/o6a6IM7kYtaClRj5veHUKd+7rkjP2kemZXwut9pCtJlt2Yw2XGxq5WpzLD6RFlZciQ==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (3.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-27 07:00:28.646304', "updated_at" = '2017-03-27 07:00:28.646347' WHERE "users_departments"."id" = $1[0m  [["id", 8]]
  [1m[35m (46.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-27 07:00:28.696143', "updated_at" = '2017-03-27 07:00:28.696205' WHERE "users_departments"."id" = $1[0m  [["id", 9]]
  [1m[35m (26.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 07:00:28 UTC], ["updated_at", 2017-03-27 07:00:28 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 107ms (ActiveRecord: 89.9ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:00:28 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (5.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (51.3ms)
  Rendered layouts/_headcontent.html.erb (319.0ms)
  Rendered layouts/_layout_common_js.html.erb (9.0ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (33.1ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 457ms (Views: 412.0ms | ActiveRecord: 24.1ms)


Started GET "/en/users/edit" for 127.0.0.1 at 2017-03-27 10:01:53 +0300
Processing by Devise::RegistrationsController#edit as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering devise/registrations/edit.html.erb within layouts/application
  Rendered devise/registrations/edit.html.erb within layouts/application (8.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_navigation.html.erb (21.8ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 446ms (Views: 437.1ms | ActiveRecord: 6.1ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:02:36 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (5.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (4.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (60.6ms)
Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:02:36 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (13.1ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (36.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (13.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (11.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (3.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (22.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (8.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (11.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (106.7ms)
  Rendered layouts/_headcontent.html.erb (615.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.7ms)
  [1m[35m (19.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (68.0ms)
  Rendered layouts/_topnavbar.html.erb (4.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 833ms (Views: 756.3ms | ActiveRecord: 55.0ms)


  Rendered layouts/_headcontent.html.erb (483.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (32.6ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 740ms (Views: 559.2ms | ActiveRecord: 143.4ms)


Started GET "/" for 127.0.0.1 at 2017-03-27 10:04:22 +0300
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.3ms)
  Rendered layouts/_navigation.html.erb (14.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 367ms (Views: 363.9ms | ActiveRecord: 0.6ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-27 10:04:28 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (30.6ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (75.7ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_navigation.html.erb (21.7ms)
  Rendered layouts/_topnavbar.html.erb (4.3ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 459ms (Views: 367.9ms | ActiveRecord: 38.5ms)


Started GET "/en/transporters/7" for 127.0.0.1 at 2017-03-27 10:04:33 +0300
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (1.0ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (19.3ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 7]]
  Rendered transporters/show.html.erb within layouts/application (86.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.9ms)
  Rendered layouts/_navigation.html.erb (15.3ms)
  Rendered layouts/_topnavbar.html.erb (7.2ms)
  Rendered layouts/_footer.html.erb (4.5ms)
Completed 200 OK in 473ms (Views: 420.3ms | ActiveRecord: 27.0ms)


Started GET "/en/transporters/7/edit" for 127.0.0.1 at 2017-03-27 10:04:44 +0300
Processing by TransportersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (2.4ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/edit.html.erb within layouts/application
  [1m[36mOwnershipType Load (18.7ms)[0m  [1m[34mSELECT "ownership_types".* FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL ORDER BY "ownership_types"."name" ASC[0m
  Rendered transporters/_form.html.erb (95.5ms)
  Rendered transporters/edit.html.erb within layouts/application (99.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.3ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  Rendered layouts/_navigation.html.erb (11.5ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 471ms (Views: 401.8ms | ActiveRecord: 25.0ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-27 10:05:11 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (0.5ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (6.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  Rendered layouts/_navigation.html.erb (18.6ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 363ms (Views: 357.1ms | ActiveRecord: 2.7ms)


Started GET "/en/transporters/7" for 127.0.0.1 at 2017-03-27 10:05:17 +0300
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (3.4ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (2.5ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 7]]
  Rendered transporters/show.html.erb within layouts/application (11.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.6ms)
  Rendered layouts/_navigation.html.erb (21.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 358ms (Views: 337.2ms | ActiveRecord: 10.4ms)


Started GET "/en/transporters/7/edit" for 127.0.0.1 at 2017-03-27 10:05:22 +0300
Processing by TransportersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (7.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (2.9ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/edit.html.erb within layouts/application
  [1m[36mOwnershipType Load (1.2ms)[0m  [1m[34mSELECT "ownership_types".* FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL ORDER BY "ownership_types"."name" ASC[0m
  Rendered transporters/_form.html.erb (9.5ms)
  Rendered transporters/edit.html.erb within layouts/application (16.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  Rendered layouts/_navigation.html.erb (15.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 374ms (Views: 354.2ms | ActiveRecord: 11.8ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-27 10:05:45 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (5.0ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (8.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (11.5ms)
  Rendered layouts/_navigation.html.erb (18.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 384ms (Views: 368.5ms | ActiveRecord: 7.4ms)


Started GET "/en/transporters/7" for 127.0.0.1 at 2017-03-27 10:05:54 +0300
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (2.0ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (0.4ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 7]]
  Rendered transporters/show.html.erb within layouts/application (13.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.8ms)
  Rendered layouts/_navigation.html.erb (18.1ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 361ms (Views: 350.0ms | ActiveRecord: 3.0ms)


Started GET "/en/transporter_addresses/new?transporter_id=7" for 127.0.0.1 at 2017-03-27 10:06:00 +0300
Processing by TransporterAddressesController#new as HTML
  Parameters: {"transporter_id"=>"7", "locale"=>"en"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (2.1ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporter_addresses/new.html.erb within layouts/application
  [1m[36mTransporter Load (3.1ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mLocation Load (39.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  Rendered transporter_addresses/_form.html.erb (146.4ms)
  Rendered transporter_addresses/new.html.erb within layouts/application (169.7ms)
Completed 500 Internal Server Error in 250ms (ActiveRecord: 62.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `city' for #<TransporterAddress:0x007f5fd4883408>:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:35:in `value'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:45:in `value_before_type_cast'
  actionview (5.0.2) lib/action_view/helpers/tags/text_field.rb:13:in `block in render'
  actionview (5.0.2) lib/action_view/helpers/tags/text_field.rb:13:in `render'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:793:in `text_field'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:1302:in `text_field'
  app/views/transporter_addresses/_form.html.erb:39:in `block in _app_views_transporter_addresses__form_html_erb___2351479142407497582_70024780042380'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/transporter_addresses/_form.html.erb:5:in `_app_views_transporter_addresses__form_html_erb___2351479142407497582_70024780042380'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/transporter_addresses/new.html.erb:26:in `_app_views_transporter_addresses_new_html_erb__3576356227087374183_70024780840040'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9615ed364431dbf4/variables" for 127.0.0.1 at 2017-03-27 10:06:01 +0300
Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-27 10:07:40 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.9ms)
  Rendered layouts/_headcontent.html.erb (296.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (33.6ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 372ms (Views: 358.4ms | ActiveRecord: 10.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 10:07:47 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (3.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (59.1ms)
  Rendered layouts/_headcontent.html.erb (361.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (95.3ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 565ms (Views: 527.3ms | ActiveRecord: 19.3ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:08:02 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (7.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (3.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (58.2ms)
  Rendered layouts/_headcontent.html.erb (332.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.1ms)
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (46.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 492ms (Views: 437.4ms | ActiveRecord: 28.4ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 10:08:37 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (8.7ms)
  Rendered layouts/_headcontent.html.erb (411.0ms)
  Rendered layouts/_layout_common_js.html.erb (11.1ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (37.3ms)
  Rendered layouts/_topnavbar.html.erb (9.7ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 510ms (Views: 500.2ms | ActiveRecord: 5.9ms)


Started GET "/departments/1/edit?locale=en" for 127.0.0.1 at 2017-03-27 10:08:41 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
  [1m[36mUser Load (9.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.6ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/admin
  Rendered departments/_form.html.erb (9.4ms)
  Rendered departments/edit.html.erb within layouts/admin (11.4ms)
Started GET "/departments/1/edit?locale=en" for 127.0.0.1 at 2017-03-27 10:08:41 +0300
Processing by DepartmentsController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mDepartment Load (12.9ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering departments/edit.html.erb within layouts/admin
  Rendered departments/_form.html.erb (2.7ms)
  Rendered departments/edit.html.erb within layouts/admin (26.2ms)
  Rendered layouts/_headcontent.html.erb (843.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (4.8ms)
  Rendered layouts/_headcontent.html.erb (758.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  [1m[35m (12.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (72.1ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (2.7ms)
Completed 200 OK in 983ms (Views: 951.9ms | ActiveRecord: 24.6ms)


  Rendered layouts/_logoheader.html.erb (9.9ms)
  [1m[35m (5.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (33.2ms)
  Rendered layouts/_topnavbar.html.erb (6.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 886ms (Views: 854.2ms | ActiveRecord: 22.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-27 10:09:00 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (59.1ms)
  Rendered layouts/_headcontent.html.erb (291.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (2.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (35.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 422ms (Views: 384.9ms | ActiveRecord: 21.9ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:09:02 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (4.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (63.1ms)
  Rendered layouts/_headcontent.html.erb (312.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.5ms)
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.4ms)
  Rendered layouts/_topnavbar.html.erb (4.6ms)
  Rendered layouts/_footer.html.erb (4.2ms)
Completed 200 OK in 464ms (Views: 416.1ms | ActiveRecord: 34.2ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-27 10:09:07 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (31.8ms)
  Rendered layouts/_headcontent.html.erb (312.5ms)
  Rendered layouts/_layout_common_js.html.erb (1.6ms)
  Rendered layouts/_logoheader.html.erb (3.2ms)
  [1m[35m (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.0ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 436ms (Views: 404.3ms | ActiveRecord: 19.0ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-27 10:09:11 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Y6tAtcm1fSbbvGyAokUIPwDDG8AURokYUGb9uqGIxB58gwCL6098QOipS9yoPu7xf/UNUpxOuvC2UjqWVgqxSA==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-27 07:09:11.332276', "updated_at" = '2017-03-27 07:09:11.332345' WHERE "users_departments"."id" = $1[0m  [["id", 10]]
  [1m[35m (147.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 07:09:11 UTC], ["updated_at", 2017-03-27 07:09:11 UTC]]
  [1m[35m (87.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 265ms (ActiveRecord: 244.8ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:09:11 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (0.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (46.7ms)
  Rendered layouts/_headcontent.html.erb (337.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (46.2ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 486ms (Views: 424.5ms | ActiveRecord: 35.0ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-27 10:09:20 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (1.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (11.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (10.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (142.3ms)
  Rendered layouts/_headcontent.html.erb (272.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (34.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 475ms (Views: 393.2ms | ActiveRecord: 73.3ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:09:24 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (45.9ms)
  Rendered layouts/_headcontent.html.erb (334.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (10.9ms)
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (44.2ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 499ms (Views: 444.5ms | ActiveRecord: 27.2ms)


Started GET "/departments?locale=en" for 127.0.0.1 at 2017-03-27 10:13:21 +0300
Processing by DepartmentsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering departments/index.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered departments/index.html.erb within layouts/admin (5.9ms)
  Rendered layouts/_headcontent.html.erb (335.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (4.4ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.5ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 418ms (Views: 408.8ms | ActiveRecord: 5.5ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-27 10:13:33 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (36.7ms)
  Rendered layouts/_headcontent.html.erb (298.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.8ms)
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (36.8ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 412ms (Views: 378.0ms | ActiveRecord: 28.7ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-27 10:13:41 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uXLTdv/J/kVTZ2uvRI9wbMO/6irb58vM0KefVosjrGymWpNI3TP/I2ByTPNO9JaivIn8uFPv+CQ2k1h6fKHZOg==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-27 07:13:41.757465', "updated_at" = '2017-03-27 07:13:41.757515' WHERE "users_departments"."id" = $1[0m  [["id", 11]]
  [1m[35m (35.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 07:13:41 UTC], ["updated_at", 2017-03-27 07:13:41 UTC]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-27 07:13:41 UTC], ["updated_at", 2017-03-27 07:13:41 UTC]]
  [1m[35m (17.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 92ms (ActiveRecord: 66.0ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-27 10:13:41 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  Rendered users/user_profile.html.erb within layouts/admin (54.2ms)
  Rendered layouts/_headcontent.html.erb (340.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (44.1ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 489ms (Views: 440.9ms | ActiveRecord: 28.9ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-27 10:16:13 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (7.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (10.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (120.4ms)
  Rendered layouts/_headcontent.html.erb (299.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (40.3ms)
  Rendered layouts/_topnavbar.html.erb (2.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 489ms (Views: 412.5ms | ActiveRecord: 72.0ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:26:24 +0300
  [1m[36mActiveRecord::SchemaMigration Load (26.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (64.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (68.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (25.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (39.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (15.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/user_profile.html.erb within layouts/admin (139.5ms)
  Rendered layouts/_headcontent.html.erb (2138.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (143.7ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3350ms (Views: 2453.3ms | ActiveRecord: 490.2ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:26:43 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (83.9ms)
  Rendered layouts/_headcontent.html.erb (399.2ms)
  Rendered layouts/_layout_common_js.html.erb (5.4ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.9ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 612ms (Views: 566.1ms | ActiveRecord: 16.9ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-28 14:26:47 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mO7jndA3PArP59X7dIa4mPDPi68QlcIxR3tr+NzPGm+HxqOj8s09bPzy8qd+/V5Wj/mdPZid8dmhT6zUK01vOQ==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (0.5ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:26:47.884257', "updated_at" = '2017-03-28 11:26:47.884324' WHERE "users_departments"."id" = $1[0m  [["id", 12]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:26:47.895399', "updated_at" = '2017-03-28 11:26:47.895450' WHERE "users_departments"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (31.9ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:26:47 UTC], ["updated_at", 2017-03-28 11:26:47 UTC]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:26:47 UTC], ["updated_at", 2017-03-28 11:26:47 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 4], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:26:47 UTC], ["updated_at", 2017-03-28 11:26:47 UTC]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27/user_profile
Completed 302 Found in 123ms (ActiveRecord: 65.0ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:26:48 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4)[0m
  [1m[36mPermission Load (2.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/user_profile.html.erb within layouts/admin (15.5ms)
  Rendered layouts/_headcontent.html.erb (357.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (116.4ms)
  Rendered layouts/_topnavbar.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 572ms (Views: 516.7ms | ActiveRecord: 18.6ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:27:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (6.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4)[0m
  [1m[36mPermission Load (1.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/user_profile.html.erb within layouts/admin (74.1ms)
  Rendered layouts/_headcontent.html.erb (1912.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.6ms)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (116.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2406ms (Views: 2140.4ms | ActiveRecord: 48.6ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:28:42 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4)[0m
  [1m[36mPermission Load (4.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/user_profile.html.erb within layouts/admin (86.2ms)
  Rendered layouts/_headcontent.html.erb (2039.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (114.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2542ms (Views: 2261.6ms | ActiveRecord: 58.4ms)


Started GET "/en/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:34:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (1.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4)[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/user_profile.html.erb within layouts/admin (88.3ms)
  Rendered layouts/_headcontent.html.erb (2227.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (109.3ms)
  Rendered layouts/_topnavbar.html.erb (5.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2800ms (Views: 2465.0ms | ActiveRecord: 45.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:34:47 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (46.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (6.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (6.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (190.9ms)
  Rendered layouts/_headcontent.html.erb (410.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 726ms (Views: 613.7ms | ActiveRecord: 77.6ms)


Started GET "/users/27/show" for 127.0.0.1 at 2017-03-28 14:34:53 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/27/show"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [312 times] (226.4ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (52.4ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (411.1ms)
Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:35:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (130.5ms)
  Rendered layouts/_headcontent.html.erb (2000.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (62.8ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2480ms (Views: 2222.9ms | ActiveRecord: 41.0ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:35:21 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (36.9ms)
Completed 500 Internal Server Error in 61ms (ActiveRecord: 5.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `each' for nil:NilClass:
  app/views/users/show.html.erb:94:in `_app_views_users_show_html_erb__2268575833217481659_70301153783300'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/73303e946adcb685/variables" for 127.0.0.1 at 2017-03-28 14:35:22 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:36:08 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (132.8ms)
  Rendered layouts/_headcontent.html.erb (1979.8ms)
  Rendered layouts/_layout_common_js.html.erb (2.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (52.9ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2451ms (Views: 2186.7ms | ActiveRecord: 59.5ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:36:15 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
Completed 404 Not Found in 16ms (ActiveRecord: 2.5ms)



ActiveRecord::RecordNotFound - Couldn't find User without an ID:
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:456:in `find_with_ids'
  activerecord (5.0.2) lib/active_record/relation/finder_methods.rb:66:in `find'
  activerecord (5.0.2) lib/active_record/querying.rb:3:in `find'
  activerecord (5.0.2) lib/active_record/core.rb:151:in `find'
  app/controllers/users_controller.rb:18:in `show'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9c21722c07a3eff6/variables" for 127.0.0.1 at 2017-03-28 14:36:15 +0300
Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:37:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (7.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (15.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (135.5ms)
  Rendered layouts/_headcontent.html.erb (1971.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (51.2ms)
  Rendered layouts/_topnavbar.html.erb (5.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2442ms (Views: 2192.9ms | ActiveRecord: 60.5ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:37:22 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  Rendered users/show.html.erb within layouts/admin (62.5ms)
Completed 500 Internal Server Error in 101ms (ActiveRecord: 22.3ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `each' for nil:NilClass:
  app/views/users/show.html.erb:128:in `_app_views_users_show_html_erb___3935693291474457802_69900795379420'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/33e2353bfedf94bb/variables" for 127.0.0.1 at 2017-03-28 14:37:22 +0300
Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:38:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (10.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (7.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4)[0m
  [1m[36mPermission Load (1.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/show.html.erb within layouts/admin (73.9ms)
  Rendered layouts/_headcontent.html.erb (2115.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (6.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (151.5ms)
  Rendered layouts/_topnavbar.html.erb (4.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2699ms (Views: 2383.3ms | ActiveRecord: 71.0ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:38:26 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (6.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (4.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (8.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (87.6ms)
  Rendered layouts/_headcontent.html.erb (443.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.5ms)
  [1m[35m (12.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (58.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 642ms (Views: 584.0ms | ActiveRecord: 43.0ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-28 14:38:31 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"orIV7Neyix5sf+WFEIw913X+ZcefG3gD0lsOq3Zddsy9mlXS9UiKeF9qwtka99sZCshzVRcTS+s0b8mHgd8Dmg==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1", "6"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.2ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:38:31.436188', "updated_at" = '2017-03-28 11:38:31.436255' WHERE "users_departments"."id" = $1[0m  [["id", 14]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:38:31.444724', "updated_at" = '2017-03-28 11:38:31.444762' WHERE "users_departments"."id" = $1[0m  [["id", 15]]
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:38:31.467496', "updated_at" = '2017-03-28 11:38:31.467535' WHERE "users_departments"."id" = $1[0m  [["id", 16]]
  [1m[35m (33.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:38:31 UTC], ["updated_at", 2017-03-28 11:38:31 UTC]]
  [1m[35m (20.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:38:31 UTC], ["updated_at", 2017-03-28 11:38:31 UTC]]
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 4], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:38:31 UTC], ["updated_at", 2017-03-28 11:38:31 UTC]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 6], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:38:31 UTC], ["updated_at", 2017-03-28 11:38:31 UTC]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 209ms (ActiveRecord: 149.1ms)



ArgumentError - too few arguments:
  app/controllers/users_controller.rb:71:in `updateDepartments'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/a1ac3686f9bd952a/variables" for 127.0.0.1 at 2017-03-28 14:38:31 +0300
Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-28 14:39:38 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"orIV7Neyix5sf+WFEIw913X+ZcefG3gD0lsOq3Zddsy9mlXS9UiKeF9qwtka99sZCshzVRcTS+s0b8mHgd8Dmg==", "departments"=>{"1"=>"1", "2"=>"1", "4"=>"1", "6"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (1.6ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:39.147151', "updated_at" = '2017-03-28 11:39:39.147231' WHERE "users_departments"."id" = $1[0m  [["id", 17]]
  [1m[35m (64.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:39.221722', "updated_at" = '2017-03-28 11:39:39.221763' WHERE "users_departments"."id" = $1[0m  [["id", 18]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:39.227268', "updated_at" = '2017-03-28 11:39:39.227309' WHERE "users_departments"."id" = $1[0m  [["id", 19]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:39.236322', "updated_at" = '2017-03-28 11:39:39.236364' WHERE "users_departments"."id" = $1[0m  [["id", 20]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:39:39 UTC], ["updated_at", 2017-03-28 11:39:39 UTC]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.4ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:39:39 UTC], ["updated_at", 2017-03-28 11:39:39 UTC]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 4], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:39:39 UTC], ["updated_at", 2017-03-28 11:39:39 UTC]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.5ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 6], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:39:39 UTC], ["updated_at", 2017-03-28 11:39:39 UTC]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27
Completed 302 Found in 348ms (ActiveRecord: 143.7ms)


Started GET "/en/users/27" for 127.0.0.1 at 2017-03-28 14:39:39 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2, 4, 6)[0m
  [1m[36mPermission Load (3.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/show.html.erb within layouts/admin (66.1ms)
  Rendered layouts/_headcontent.html.erb (2006.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (110.1ms)
  Rendered layouts/_topnavbar.html.erb (9.3ms)
  Rendered layouts/_footer.html.erb (2.7ms)
Completed 200 OK in 2380ms (Views: 2216.1ms | ActiveRecord: 44.7ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:39:50 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (73.5ms)
  Rendered layouts/_headcontent.html.erb (412.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (61.8ms)
  Rendered layouts/_topnavbar.html.erb (9.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 603ms (Views: 572.6ms | ActiveRecord: 18.5ms)


Started PUT "/users/27/updateDepartments" for 127.0.0.1 at 2017-03-28 14:39:55 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tFr7XMLo3d0DBypj4PPQzH38N8onni9TWmzHEkiFVjGrcrti4BLcuzASDT/qiDYCAsohWK+WHLu8WAA+vwcjZw==", "departments"=>{"1"=>"1", "2"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.3ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:55.459469', "updated_at" = '2017-03-28 11:39:55.459510' WHERE "users_departments"."id" = $1[0m  [["id", 21]]
  [1m[35m (43.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:55.509696', "updated_at" = '2017-03-28 11:39:55.509737' WHERE "users_departments"."id" = $1[0m  [["id", 22]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:55.517735', "updated_at" = '2017-03-28 11:39:55.517837' WHERE "users_departments"."id" = $1[0m  [["id", 23]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.2ms)[0m  [1m[33mUPDATE "users_departments" SET "deleted_at" = '2017-03-28 11:39:55.527692', "updated_at" = '2017-03-28 11:39:55.527744' WHERE "users_departments"."id" = $1[0m  [["id", 24]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.2ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:39:55 UTC], ["updated_at", 2017-03-28 11:39:55 UTC]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (7.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["department_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:39:55 UTC], ["updated_at", 2017-03-28 11:39:55 UTC]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27
Completed 302 Found in 132ms (ActiveRecord: 81.6ms)


Started GET "/en/users/27" for 127.0.0.1 at 2017-03-28 14:39:55 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.1ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 6, 7)[0m
  Rendered users/show.html.erb within layouts/admin (15.6ms)
  Rendered layouts/_headcontent.html.erb (417.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.9ms)
  [1m[35m (7.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.8ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 557ms (Views: 504.6ms | ActiveRecord: 25.0ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-28 14:40:03 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (4.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (198.7ms)
  Rendered layouts/_headcontent.html.erb (476.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (58.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 797ms (Views: 716.1ms | ActiveRecord: 69.2ms)


Started PUT "/users/27/updatePermissions" for 127.0.0.1 at 2017-03-28 14:40:11 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fsIYdk6jJZ5dZ1UYTu8cgEbwWAQfZvEYCYpwV3IrdvZh6lhIbFkk+G5yckRElPpOOcZOlpduwvDvvrd7hakDoA==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (1.7ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:40:11.356290', "updated_at" = '2017-03-28 11:40:11.356367' WHERE "users_permissions"."id" = $1[0m  [["id", 23]]
  [1m[35m (23.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:40:11.384551', "updated_at" = '2017-03-28 11:40:11.384592' WHERE "users_permissions"."id" = $1[0m  [["id", 24]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:40:11.388765', "updated_at" = '2017-03-28 11:40:11.388807' WHERE "users_permissions"."id" = $1[0m  [["id", 25]]
  [1m[35m (47.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:40:11.441278', "updated_at" = '2017-03-28 11:40:11.441323' WHERE "users_permissions"."id" = $1[0m  [["id", 26]]
  [1m[35m (69.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:40:11.515352', "updated_at" = '2017-03-28 11:40:11.515398' WHERE "users_permissions"."id" = $1[0m  [["id", 27]]
  [1m[35m (46.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (81.0ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:40:11 UTC], ["updated_at", 2017-03-28 11:40:11 UTC]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:40:11 UTC], ["updated_at", 2017-03-28 11:40:11 UTC]]
  [1m[35m (34.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 3], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:40:11 UTC], ["updated_at", 2017-03-28 11:40:11 UTC]]
  [1m[35m (57.6ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 464ms (ActiveRecord: 405.6ms)



ArgumentError - too few arguments:
  app/controllers/users_controller.rb:88:in `updatePermissions'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3016e146b02eb70e/variables" for 127.0.0.1 at 2017-03-28 14:40:11 +0300
Started PUT "/users/27/updatePermissions" for 127.0.0.1 at 2017-03-28 14:40:51 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tSTRING_DEND, expecting keyword_end
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:100: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:114: syntax error, unexpected keyword_end, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:124: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:125: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:127: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:128: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:138: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:139: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:141: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:142: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:152: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:153: syntax error, unexpected tSTRING_DEND, expecting '}'
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:167: syntax error, unexpected keyword_end, expecting '}':
  app/controllers/users_controller.rb:88:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/c4d1752c74d31a03/variables" for 127.0.0.1 at 2017-03-28 14:40:52 +0300
Started PUT "/users/27/updatePermissions" for 127.0.0.1 at 2017-03-28 14:41:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fsIYdk6jJZ5dZ1UYTu8cgEbwWAQfZvEYCYpwV3IrdvZh6lhIbFkk+G5yckRElPpOOcZOlpduwvDvvrd7hakDoA==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (3.9ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.4ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:41:16.500317', "updated_at" = '2017-03-28 11:41:16.500380' WHERE "users_permissions"."id" = $1[0m  [["id", 28]]
  [1m[35m (46.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:41:16.555925', "updated_at" = '2017-03-28 11:41:16.555970' WHERE "users_permissions"."id" = $1[0m  [["id", 29]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:41:16.560398', "updated_at" = '2017-03-28 11:41:16.560437' WHERE "users_permissions"."id" = $1[0m  [["id", 30]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.6ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:16 UTC], ["updated_at", 2017-03-28 11:41:16 UTC]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.9ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:16 UTC], ["updated_at", 2017-03-28 11:41:16 UTC]]
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 3], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:16 UTC], ["updated_at", 2017-03-28 11:41:16 UTC]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27
Completed 302 Found in 308ms (ActiveRecord: 120.6ms)


Started GET "/en/users/27" for 127.0.0.1 at 2017-03-28 14:41:16 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3)[0m
  Rendered users/show.html.erb within layouts/admin (95.7ms)
  Rendered layouts/_headcontent.html.erb (2070.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.4ms)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (129.5ms)
  Rendered layouts/_topnavbar.html.erb (3.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2496ms (Views: 2322.6ms | ActiveRecord: 33.0ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-28 14:41:28 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (201.2ms)
  Rendered layouts/_headcontent.html.erb (394.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (16.6ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (55.5ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 721ms (Views: 638.5ms | ActiveRecord: 68.5ms)


Started PUT "/users/27/updatePermissions" for 127.0.0.1 at 2017-03-28 14:41:34 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"QelYxLEm2ER+PCvmIjXLlIzqjcNFmhxKvQCuomx6QaBewRj6k9zZIk0pDLooTi1a89ybUc2SL6JbNGmOm/g09g==", "permissions"=>{"1"=>"1", "2"=>"1", "3"=>"1", "4"=>"1"}, "commit"=>"Save Changes", "id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (3.2ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:41:34.503308', "updated_at" = '2017-03-28 11:41:34.503366' WHERE "users_permissions"."id" = $1[0m  [["id", 31]]
  [1m[35m (319.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:41:34.828887', "updated_at" = '2017-03-28 11:41:34.828928' WHERE "users_permissions"."id" = $1[0m  [["id", 32]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.2ms)[0m  [1m[33mUPDATE "users_permissions" SET "deleted_at" = '2017-03-28 11:41:34.834585', "updated_at" = '2017-03-28 11:41:34.834641' WHERE "users_permissions"."id" = $1[0m  [["id", 33]]
  [1m[35m (25.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:34 UTC], ["updated_at", 2017-03-28 11:41:34 UTC]]
  [1m[35m (66.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 2], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:34 UTC], ["updated_at", 2017-03-28 11:41:34 UTC]]
  [1m[35m (37.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 3], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:34 UTC], ["updated_at", 2017-03-28 11:41:34 UTC]]
  [1m[35m (49.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 27], ["permission_id", 4], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:41:35 UTC], ["updated_at", 2017-03-28 11:41:35 UTC]]
  [1m[35m (39.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/27
Completed 302 Found in 618ms (ActiveRecord: 566.7ms)


Started GET "/en/users/27" for 127.0.0.1 at 2017-03-28 14:41:35 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (15.5ms)
  Rendered layouts/_headcontent.html.erb (412.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (40.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 550ms (Views: 496.1ms | ActiveRecord: 20.7ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:41:40 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (62.5ms)
  Rendered layouts/_headcontent.html.erb (466.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.8ms)
  Rendered layouts/_logoheader.html.erb (5.2ms)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (48.9ms)
  Rendered layouts/_topnavbar.html.erb (5.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 640ms (Views: 609.0ms | ActiveRecord: 21.5ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:41:43 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (1.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/user_profile.html.erb within layouts/admin (15.3ms)
  Rendered layouts/_headcontent.html.erb (468.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.1ms)
  Rendered layouts/_topnavbar.html.erb (5.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 608ms (Views: 562.7ms | ActiveRecord: 18.1ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-28 14:41:48 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (2.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (8.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (7.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (5.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (184.6ms)
  Rendered layouts/_headcontent.html.erb (476.3ms)
  Rendered layouts/_layout_common_js.html.erb (6.2ms)
  Rendered layouts/_logoheader.html.erb (11.6ms)
  [1m[35m (5.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (42.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (2.3ms)
Completed 200 OK in 772ms (Views: 685.2ms | ActiveRecord: 73.9ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:41:56 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/user_profile.html.erb within layouts/admin (11.3ms)
  Rendered layouts/_headcontent.html.erb (411.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (4.5ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (48.3ms)
  Rendered layouts/_topnavbar.html.erb (7.6ms)
  Rendered layouts/_footer.html.erb (5.7ms)
Completed 200 OK in 554ms (Views: 506.9ms | ActiveRecord: 15.3ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:43:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (7.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (9.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (6.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/user_profile.html.erb within layouts/admin (82.5ms)
  Rendered layouts/_headcontent.html.erb (2068.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (5.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (138.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2582ms (Views: 2314.9ms | ActiveRecord: 70.9ms)


Started GET "/users/27/" for 127.0.0.1 at 2017-03-28 14:43:16 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (19.5ms)
  Rendered layouts/_headcontent.html.erb (478.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.5ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 664ms (Views: 596.1ms | ActiveRecord: 15.1ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:43:21 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (71.8ms)
  Rendered layouts/_headcontent.html.erb (369.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.5ms)
  [1m[35m (3.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (66.9ms)
  Rendered layouts/_topnavbar.html.erb (7.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 564ms (Views: 527.6ms | ActiveRecord: 19.5ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:43:26 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/user_profile.html.erb within layouts/admin (13.8ms)
  Rendered layouts/_headcontent.html.erb (464.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.1ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (44.9ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 610ms (Views: 562.8ms | ActiveRecord: 14.7ms)


Started GET "/en/users/27?user_id=27" for 127.0.0.1 at 2017-03-28 14:43:34 +0300
Processing by UsersController#show as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (14.2ms)
  Rendered layouts/_headcontent.html.erb (441.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.5ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 580ms (Views: 535.6ms | ActiveRecord: 20.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:43:40 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  Rendered users/index.html.erb within layouts/admin (134.6ms)
  Rendered layouts/_headcontent.html.erb (432.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (42.1ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 662ms (Views: 624.1ms | ActiveRecord: 20.9ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-28 14:43:57 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (1.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (9.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (166.0ms)
  Rendered layouts/_headcontent.html.erb (409.9ms)
  Rendered layouts/_layout_common_js.html.erb (4.0ms)
  Rendered layouts/_logoheader.html.erb (13.5ms)
  [1m[35m (6.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.8ms)
  Rendered layouts/_topnavbar.html.erb (2.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 698ms (Views: 612.9ms | ActiveRecord: 74.2ms)


Started GET "/users/27/user_profile" for 127.0.0.1 at 2017-03-28 14:44:00 +0300
Processing by UsersController#user_profile as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/user_profile.html.erb within layouts/admin
  [1m[36mDepartment Load (5.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/user_profile.html.erb within layouts/admin (12.6ms)
  Rendered layouts/_headcontent.html.erb (392.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (3.7ms)
  [1m[35m (4.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.6ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 539ms (Views: 485.3ms | ActiveRecord: 19.5ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:44:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (78.0ms)
  Rendered layouts/_headcontent.html.erb (1990.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (7.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (143.3ms)
  Rendered layouts/_topnavbar.html.erb (10.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2487ms (Views: 2246.4ms | ActiveRecord: 59.4ms)


Started GET "/en/users/27?user_id=27" for 127.0.0.1 at 2017-03-28 14:44:55 +0300
Processing by UsersController#show as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (3.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (26.5ms)
  Rendered layouts/_headcontent.html.erb (407.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (48.3ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 571ms (Views: 515.1ms | ActiveRecord: 22.8ms)


Started GET "/en/users/27?user_id=27" for 127.0.0.1 at 2017-03-28 14:45:00 +0300
Processing by UsersController#show as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (4.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (3.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (15.9ms)
  Rendered layouts/_headcontent.html.erb (378.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.5ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 507ms (Views: 471.2ms | ActiveRecord: 21.3ms)


Started GET "/en/users/27?user_id=27" for 127.0.0.1 at 2017-03-28 14:45:49 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (15.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (76.3ms)
  Rendered layouts/_headcontent.html.erb (1922.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (5.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (113.2ms)
  Rendered layouts/_topnavbar.html.erb (7.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2430ms (Views: 2167.3ms | ActiveRecord: 63.2ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:45:57 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (5.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (75.3ms)
  Rendered layouts/_headcontent.html.erb (440.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (3.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (43.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 624ms (Views: 594.8ms | ActiveRecord: 19.4ms)


Started GET "/users/27/show" for 127.0.0.1 at 2017-03-28 14:46:02 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/27/show"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [312 times] (199.8ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (14.4ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (5.3ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (336.2ms)
Started GET "/users/27/" for 127.0.0.1 at 2017-03-28 14:46:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (1.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (76.3ms)
  Rendered layouts/_headcontent.html.erb (1906.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (150.6ms)
  Rendered layouts/_topnavbar.html.erb (10.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2419ms (Views: 2181.6ms | ActiveRecord: 56.3ms)


Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:46:26 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (70.7ms)
  Rendered layouts/_headcontent.html.erb (371.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (8.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.6ms)
  Rendered layouts/_topnavbar.html.erb (3.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 552ms (Views: 514.1ms | ActiveRecord: 23.0ms)


Started GET "/users/27/show" for 127.0.0.1 at 2017-03-28 14:46:30 +0300
  
ActionController::RoutingError (No route matches [GET] "/users/27/show"):
  
actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'
web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/method_override.rb:22:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.2) lib/rails/engine.rb:522:in `call'
puma (3.7.1) lib/puma/configuration.rb:232:in `call'
puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
puma (3.7.1) lib/puma/server.rb:415:in `process_client'
puma (3.7.1) lib/puma/server.rb:275:in `block in run'
puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered collection of /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb [312 times] (207.8ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (20.3ms)
  Rendering /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (355.4ms)
Started GET "/en/users/27/user_departments?user_id=27" for 127.0.0.1 at 2017-03-28 14:47:06 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (4.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (6.0ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (151.3ms)
  Rendered layouts/_headcontent.html.erb (1893.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.3ms)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (125.8ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2382ms (Views: 2191.4ms | ActiveRecord: 60.3ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:47:14 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (6.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (1.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (51.5ms)
  Rendered layouts/_headcontent.html.erb (439.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (54.2ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (5.7ms)
Completed 200 OK in 637ms (Views: 577.6ms | ActiveRecord: 23.6ms)


Started GET "/en/users/27/user_permissions?user_id=27" for 127.0.0.1 at 2017-03-28 14:47:23 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"27", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (8.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (4.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 27], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (165.8ms)
  Rendered layouts/_headcontent.html.erb (399.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.6ms)
  [1m[35m (10.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.2ms)
  Rendered layouts/_topnavbar.html.erb (9.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 669ms (Views: 591.8ms | ActiveRecord: 57.9ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:47:28 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (11.4ms)
  Rendered layouts/_headcontent.html.erb (430.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (54.0ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 565ms (Views: 527.4ms | ActiveRecord: 16.0ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:49:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (79.8ms)
  Rendered layouts/_headcontent.html.erb (1947.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  [1m[35m (8.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (148.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2454ms (Views: 2185.5ms | ActiveRecord: 74.6ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-28 14:49:59 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (3.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.2ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (16.5ms)
  Rendered layouts/_headcontent.html.erb (416.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (46.3ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 562ms (Views: 507.9ms | ActiveRecord: 20.8ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-28 14:50:08 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZzQre2epaQvSPA+yWp66uifgfHirGTpV36yq0FzmLqx4HGtFRVNobeEpKO5Q5Vx0WNZq6iMRCb05mG38q2Rb+g==", "locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 21], ["id", 21]]
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 40ms (ActiveRecord: 15.4ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:50:08 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 8ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-28 14:50:08 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.3ms)
  Rendered devise/sessions/new.html.erb within layouts/application (65.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 541ms (Views: 538.4ms | ActiveRecord: 0.0ms)


Started GET "/en/users/sign_up" for 127.0.0.1 at 2017-03-28 14:50:14 +0300
Processing by Devise::RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (6.6ms)
  Rendered devise/registrations/new.html.erb within layouts/application (16.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_topnavbar.html.erb (2.2ms)
  Rendered layouts/_footer.html.erb (1.5ms)
Completed 200 OK in 1154ms (Views: 1151.7ms | ActiveRecord: 0.0ms)


Started POST "/en/users" for 127.0.0.1 at 2017-03-28 14:50:37 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"S9OKBbefiQDRj8LqQur1d1EydjMsiRkZBtsC2qzAVoA6QB7LKDg03OYO8+qmQyavPPpgClpdhLY7XERRp1mRaA==", "user"=>{"first_name"=>"alex", "last_name"=>"alex", "email"=>"alex@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
Unpermitted parameters: first_name, last_name
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."deleted_at" IS NULL LIMIT $2[0m  [["email", "alex@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (37.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "alex@gmail.com"], ["encrypted_password", "$2a$11$7hiPiJauA1hsua/z4gc.8Ojo/D8B7RI/2aaRSMKirdWvIMFQSCoqe"], ["created_at", 2017-03-28 11:50:38 UTC], ["updated_at", 2017-03-28 11:50:38 UTC]]
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT  "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL AND "roles"."name" = $1 AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT $2[0m  [["name", "guest"], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL AND "roles"."id" = 77[0m
  [1m[35mSQL (15.6ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 28], ["role_id", 77]]
  [1m[35m (49.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.8ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "current_sign_in_ip" = $4, "last_sign_in_ip" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["sign_in_count", 1], ["current_sign_in_at", 2017-03-28 11:50:38 UTC], ["last_sign_in_at", 2017-03-28 11:50:38 UTC], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["updated_at", 2017-03-28 11:50:38 UTC], ["id", 28]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 664ms (ActiveRecord: 144.3ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:50:38 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.7ms)
  Rendered layouts/_layout_common_js.html.erb (8.8ms)
  Rendered layouts/_logoheader.html.erb (3.9ms)
  Rendered layouts/_navigation.html.erb (29.1ms)
  Rendered layouts/_topnavbar.html.erb (5.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 531ms (Views: 505.8ms | ActiveRecord: 0.6ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-28 14:50:42 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.2ms)
  Rendered layouts/_headcontent.html.erb (434.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 28], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.7ms)
  Rendered layouts/_topnavbar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 571ms (Views: 529.5ms | ActiveRecord: 3.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:50:47 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 28], ["name", "HRD"]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 39ms (ActiveRecord: 11.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-28 14:50:47 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (4.6ms)
  Rendered layouts/_headcontent.html.erb (410.3ms)
  Rendered layouts/_layout_common_js.html.erb (2.7ms)
  Rendered layouts/_logoheader.html.erb (13.5ms)
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 28], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.3ms)
  Rendered layouts/_topnavbar.html.erb (5.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 541ms (Views: 531.2ms | ActiveRecord: 4.0ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-28 14:50:55 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"b8IUDb8dOxjw1U50zfckBwRxMVjxUvpgW67fK9xd1RIeUYDDILqGxMdUf3QpXvffabknYYeGZ89mKZmg18QS+g==", "locale"=>"en"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (6.1ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 28], ["id", 28]]
  [1m[35m (22.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 43ms (ActiveRecord: 31.6ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:50:55 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-28 14:50:55 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (5.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.5ms)
  Rendered layouts/_layout_common_js.html.erb (8.7ms)
  Rendered layouts/_topnavbar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 513ms (Views: 507.7ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-28 14:51:02 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1dd1yzqmJr8hgH1F2btbQwWJcgl/dGHxKwjNVTlwn38ZAWyFrwbysqwVPj2sCj0rGfsvIxpaaBPCuR7s/WrhhA==", "user"=>{"email"=>"admin@cats.org", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@cats.org"], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-28 11:51:03 UTC], ["last_sign_in_at", 2017-03-27 06:49:59 UTC], ["sign_in_count", 23], ["updated_at", 2017-03-28 11:51:03 UTC], ["modified_by", nil], ["id", 18]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 363ms (ActiveRecord: 4.4ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:51:03 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_navigation.html.erb (17.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 482ms (Views: 474.3ms | ActiveRecord: 3.9ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-28 14:51:10 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.9ms)
  Rendered layouts/_headcontent.html.erb (373.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.5ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 485ms (Views: 474.6ms | ActiveRecord: 3.6ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:51:14 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
Redirected to http://localhost:3000/en/setting/index
Completed 302 Found in 26ms (ActiveRecord: 7.8ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-28 14:51:14 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (2.9ms)
  Rendered layouts/_headcontent.html.erb (409.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (2.8ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 18], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (84.0ms)
  Rendered layouts/_topnavbar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 535ms (Views: 523.0ms | ActiveRecord: 5.6ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-28 14:51:25 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"88wHEMTUmwKCp806wQBtZP1f1nXWW59X7XfE4hp1NZ7mMD8D3t08r2yctCZ3S7GO1zNCmtrzGe/Jszfd7o4Fqw==", "locale"=>"en"}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 18], ["id", 18]]
  [1m[35m (166.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 189ms (ActiveRecord: 173.0ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:51:25 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-28 14:51:25 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (12.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_topnavbar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 486ms (Views: 484.1ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-28 14:51:40 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DCVIzDDicWhWkpAdOe8VC6472sh1BiQln2rAsBjk8IRh06aj4XdFvHqL4B8J3G8kA8YUZiDYtKLKzSmQU0B9Og==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitd@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 12ms (ActiveRecord: 0.8ms)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DCVIzDDicWhWkpAdOe8VC6472sh1BiQln2rAsBjk8IRh06aj4XdFvHqL4B8J3G8kA8YUZiDYtKLKzSmQU0B9Og==", "user"=>{"email"=>"dawitd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (6.8ms)
  Rendered devise/sessions/new.html.erb within layouts/application (13.9ms)
  Rendered layouts/_layout_common_js.html.erb (8.0ms)
  Rendered layouts/_topnavbar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (4.2ms)
Completed 200 OK in 739ms (Views: 462.6ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-28 14:51:50 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"59YkQHqr+BhKVd85f1oAo7OU7/lCOGPmOQKrl/U2BaGKIMovqz7MzGZMrztPaXqMHmkhVxfm82FspUK3vpKIHw==", "user"=>{"email"=>"dawitdd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitdd@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-28 11:51:50 UTC], ["last_sign_in_at", 2017-03-27 06:51:07 UTC], ["sign_in_count", 7], ["updated_at", 2017-03-28 11:51:50 UTC], ["modified_by", nil], ["id", 21]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 332ms (ActiveRecord: 5.0ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:51:50 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  Rendered layouts/_navigation.html.erb (24.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 492ms (Views: 480.3ms | ActiveRecord: 6.5ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-28 14:51:55 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (1.9ms)
  Rendered layouts/_headcontent.html.erb (399.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.2ms)
  [1m[35m (5.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (65.6ms)
  Rendered layouts/_topnavbar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 520ms (Views: 503.7ms | ActiveRecord: 9.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:52:00 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (8.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (82.6ms)
  Rendered layouts/_headcontent.html.erb (449.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.8ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.3ms)
  Rendered layouts/_topnavbar.html.erb (6.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 653ms (Views: 619.6ms | ActiveRecord: 23.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:57:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (7.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (7.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (149.8ms)
  Rendered layouts/_headcontent.html.erb (1965.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (3.9ms)
Completed 200 OK in 2447ms (Views: 2183.2ms | ActiveRecord: 65.8ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-28 14:57:26 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"jIlnwwSC+Qrk9Hu8j37ojrSoWr6mNOStSf5SILvaXfykCRZQhPg/XEzxsmfsF2Lb/EUafMaYQn7RMu5WeKTkUQ==", "locale"=>"en"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 21], ["id", 21]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 39ms (ActiveRecord: 5.7ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:57:27 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-28 14:57:27 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (6.0ms)
  Rendered devise/sessions/new.html.erb within layouts/application (52.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_topnavbar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 495ms (Views: 492.7ms | ActiveRecord: 0.0ms)


Started GET "/en/users/sign_up" for 127.0.0.1 at 2017-03-28 14:57:33 +0300
Processing by Devise::RegistrationsController#new as HTML
  Parameters: {"locale"=>"en"}
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (6.0ms)
  Rendered devise/registrations/new.html.erb within layouts/application (18.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_topnavbar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 484ms (Views: 479.4ms | ActiveRecord: 0.0ms)


Started POST "/en/users" for 127.0.0.1 at 2017-03-28 14:57:54 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rzbtPRC4uKwWg4K36+LiN0UE/toXfNKNd6t4BfPWfk8fuYdeTPjUoprlB32k8dJut0VYX8aSwyg1Z+VHxVDXbg==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (6.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."deleted_at" IS NULL LIMIT $2[0m  [["email", "mm@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "mm@gmail.com"], ["encrypted_password", "$2a$11$uYM.OHgxayAU7hMFtKSHmeUhdOKWUcaL1MtMXfqZ.hN6oegFIELeq"], ["created_at", 2017-03-28 11:57:55 UTC], ["updated_at", 2017-03-28 11:57:55 UTC], ["first_name", "mola"], ["last_name", "m"]]
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT  "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL AND "roles"."name" = $1 AND "roles"."resource_type" IS NULL AND "roles"."resource_id" IS NULL ORDER BY "roles"."id" ASC LIMIT $2[0m  [["name", "guest"], ["LIMIT", 1]]
  [1m[36mRole Load (3.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."deleted_at" IS NULL AND "roles"."id" = 77[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 29], ["role_id", 77]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "current_sign_in_ip" = $4, "last_sign_in_ip" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["sign_in_count", 1], ["current_sign_in_at", 2017-03-28 11:57:55 UTC], ["last_sign_in_at", 2017-03-28 11:57:55 UTC], ["current_sign_in_ip", "127.0.0.1/32"], ["last_sign_in_ip", "127.0.0.1/32"], ["updated_at", 2017-03-28 11:57:55 UTC], ["id", 29]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 464ms (ActiveRecord: 41.3ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:57:55 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (2.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  Rendered layouts/_navigation.html.erb (40.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 484ms (Views: 473.3ms | ActiveRecord: 2.0ms)


Started DELETE "/en/users/sign_out" for 127.0.0.1 at 2017-03-28 14:58:04 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Tfr+F06DG1MKkhok4nCVvAjFN+bsoH/QE3vLtBSiXOb9dZR0EsN3XYb0n+6tY6Xl+oSRYz1ObnVRt1b2IiT1xw==", "locale"=>"en"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "modified_by" = $1 WHERE "users"."id" = $2[0m  [["modified_by", 29], ["id", 29]]
  [1m[35m (53.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 75ms (ActiveRecord: 60.1ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:58:04 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2017-03-28 14:58:04 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.3ms)
  Rendered devise/sessions/new.html.erb within layouts/application (14.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (3.3ms)
Completed 200 OK in 487ms (Views: 484.6ms | ActiveRecord: 0.0ms)


Started POST "/en/users/sign_in" for 127.0.0.1 at 2017-03-28 14:58:19 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"2npVOTPicmRYA4+byNQGIeVbCIWniaxZfgSfVxwbXvSzFiDSqITwKP6f0MYizHSW1VJmboVLnTvOyWaYv1J04A==", "user"=>{"email"=>"dawitdd@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in", "locale"=>"en"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "dawitdd@gmail.com"], ["LIMIT", 1]]
  [1m[35m (5.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["current_sign_in_at", 2017-03-28 11:58:20 UTC], ["last_sign_in_at", 2017-03-28 11:51:50 UTC], ["sign_in_count", 8], ["updated_at", 2017-03-28 11:58:20 UTC], ["modified_by", nil], ["id", 21]]
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en
Completed 302 Found in 345ms (ActiveRecord: 20.6ms)


Started GET "/en" for 127.0.0.1 at 2017-03-28 14:58:20 +0300
Processing by DashboardController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (0.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  Rendered layouts/_navigation.html.erb (22.2ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 498ms (Views: 492.4ms | ActiveRecord: 0.7ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-28 14:58:24 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (4.0ms)
  Rendered layouts/_headcontent.html.erb (438.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (15.0ms)
  [1m[35m (10.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (64.1ms)
  Rendered layouts/_topnavbar.html.erb (4.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 539ms (Views: 522.5ms | ActiveRecord: 10.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:58:28 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (8.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (83.4ms)
  Rendered layouts/_headcontent.html.erb (419.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (46.0ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 605ms (Views: 559.8ms | ActiveRecord: 26.5ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-28 14:58:39 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (8.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (2.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/show.html.erb within layouts/admin (26.2ms)
  Rendered layouts/_headcontent.html.erb (431.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.4ms)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (64.5ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 624ms (Views: 538.5ms | ActiveRecord: 32.2ms)


Started GET "/en/users/29/user_departments?user_id=29" for 127.0.0.1 at 2017-03-28 14:58:46 +0300
Processing by UsersController#user_departments as HTML
  Parameters: {"user_id"=>"29", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  Rendering users/user_departments.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mDepartment Exists (3.4ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 1], ["LIMIT", 1]]
  [1m[36mDepartment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 2], ["LIMIT", 1]]
  [1m[36mDepartment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Exists (5.9ms)[0m  [1m[34mSELECT  1 AS one FROM "departments" INNER JOIN "users_departments" ON "departments"."id" = "users_departments"."department_id" WHERE "departments"."deleted_at" IS NULL AND "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1 AND "departments"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 6], ["LIMIT", 1]]
  Rendered users/user_departments.html.erb within layouts/admin (99.9ms)
  Rendered layouts/_headcontent.html.erb (398.6ms)
  Rendered layouts/_layout_common_js.html.erb (7.6ms)
  Rendered layouts/_logoheader.html.erb (1.6ms)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.9ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 630ms (Views: 591.4ms | ActiveRecord: 28.6ms)


Started PUT "/users/29/updateDepartments" for 127.0.0.1 at 2017-03-28 14:58:51 +0300
Processing by UsersController#updateDepartments as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"T4uPBTS4d0y4qOPZe4wjMRIaxnzCnLOZKDGAJFgADdYdCrYEb4AdbwYBil+zXpn2HdLl6eBpDdUf+W0PUCKyrw==", "departments"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (8.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mUsersDepartment Load (2.8ms)[0m  [1m[34mSELECT "users_departments".* FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "users_departments" ("user_id", "department_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 29], ["department_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:58:51 UTC], ["updated_at", 2017-03-28 11:58:51 UTC]]
  [1m[35m (22.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/29
Completed 302 Found in 78ms (ActiveRecord: 49.6ms)


Started GET "/en/users/29" for 127.0.0.1 at 2017-03-28 14:58:51 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/show.html.erb within layouts/admin (20.7ms)
  Rendered layouts/_headcontent.html.erb (406.5ms)
  Rendered layouts/_layout_common_js.html.erb (3.3ms)
  Rendered layouts/_logoheader.html.erb (1.6ms)
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (90.1ms)
  Rendered layouts/_topnavbar.html.erb (6.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 596ms (Views: 539.4ms | ActiveRecord: 15.9ms)


Started GET "/en/users/29/user_permissions?user_id=29" for 127.0.0.1 at 2017-03-28 14:58:57 +0300
Processing by UsersController#user_permissions as HTML
  Parameters: {"user_id"=>"29", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  Rendering users/user_permissions.html.erb within layouts/admin
  [1m[36mPermission Load (1.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL[0m
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 1], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.1ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 2], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 3], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 4], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 5], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 6], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 7], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 8], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 9], ["LIMIT", 1]]
  [1m[36mPermission Exists (8.4ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 10], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 11], ["LIMIT", 1]]
  [1m[36mPermission Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 12], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 13], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 14], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 15], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 16], ["LIMIT", 1]]
  [1m[36mPermission Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 17], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.5ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 18], ["LIMIT", 1]]
  [1m[36mPermission Exists (2.3ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 19], ["LIMIT", 1]]
  [1m[36mPermission Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."id" = $2 LIMIT $3[0m  [["user_id", 29], ["id", 20], ["LIMIT", 1]]
  Rendered users/user_permissions.html.erb within layouts/admin (191.1ms)
  Rendered layouts/_headcontent.html.erb (412.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (58.9ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 720ms (Views: 657.5ms | ActiveRecord: 53.0ms)


Started PUT "/users/29/updatePermissions" for 127.0.0.1 at 2017-03-28 14:59:04 +0300
Processing by UsersController#updatePermissions as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"U70fFe5YWjm4w6GpGjBUcwV9jr3BVkmNKtMf+hsPkdgBPCYUtWAwGgZqyC/S4u60CrWtKOOj98EdG/LREy0uoQ==", "permissions"=>{"1"=>"1"}, "commit"=>"Save Changes", "id"=>"29"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mUsersPermission Load (3.2ms)[0m  [1m[34mSELECT "users_permissions".* FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (4.1ms)[0m  [1m[32mINSERT INTO "users_permissions" ("user_id", "permission_id", "created_by", "modified_by", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 29], ["permission_id", 1], ["created_by", 21], ["modified_by", 21], ["created_at", 2017-03-28 11:59:04 UTC], ["updated_at", 2017-03-28 11:59:04 UTC]]
  [1m[35m (9.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users/29
Completed 302 Found in 62ms (ActiveRecord: 22.7ms)


Started GET "/en/users/29" for 127.0.0.1 at 2017-03-28 14:59:04 +0300
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (6.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (19.8ms)
  Rendered layouts/_headcontent.html.erb (391.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (7.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.6ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 547ms (Views: 478.9ms | ActiveRecord: 31.5ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 14:59:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (6.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (5.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (7.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (6.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (9.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (5.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (99.4ms)
  Rendered layouts/_headcontent.html.erb (473.1ms)
  Rendered layouts/_layout_common_js.html.erb (4.0ms)
  Rendered layouts/_logoheader.html.erb (10.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.3ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 682ms (Views: 621.0ms | ActiveRecord: 49.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 15:23:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError - 

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

:
  activerecord (5.0.2) lib/active_record/migration.rb:573:in `check_pending!'
  activerecord (5.0.2) lib/active_record/migration.rb:549:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/026637e2dd9a7605/variables" for 127.0.0.1 at 2017-03-28 15:23:33 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAddressToWarehouse (20170323072956)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (45.4ms)[0m  [1m[35mALTER TABLE "warehouses" ADD "address" character varying[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170323072956"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAddressToFdp (20170323090521)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[35mALTER TABLE "fdps" ADD "address" character varying[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170323090521"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddLocationColumnsToFdp (20170327072202)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "fdps" ADD "woreda" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "fdps" ADD "zone" character varying[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "fdps" ADD "region" character varying[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170327072202"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (26.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/users" for 127.0.0.1 at 2017-03-28 15:24:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (1.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  Rendered users/index.html.erb within layouts/admin (171.2ms)
  Rendered layouts/_headcontent.html.erb (33195.4ms)
  Rendered layouts/_layout_common_js.html.erb (1.3ms)
  Rendered layouts/_logoheader.html.erb (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (55.9ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 33744ms (Views: 33466.1ms | ActiveRecord: 51.4ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-28 15:25:02 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (4.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (7.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (61.4ms)
  Rendered layouts/_headcontent.html.erb (596.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (9.4ms)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (75.9ms)
  Rendered layouts/_topnavbar.html.erb (4.9ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 831ms (Views: 743.6ms | ActiveRecord: 42.1ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-28 15:25:11 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (4.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
Completed 500 Internal Server Error in 109ms (ActiveRecord: 16.3ms)



NameError - uninitialized constant UsersController::Hubs:
  activesupport (5.0.2) lib/active_support/dependencies.rb:550:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  app/controllers/users_controller.rb:34:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/192cad991ac075b1/variables" for 127.0.0.1 at 2017-03-28 15:25:12 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-28 15:25:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (4.8ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (74.5ms)
  Rendered users/edit.html.erb within layouts/admin (103.0ms)
Completed 500 Internal Server Error in 442ms (ActiveRecord: 42.3ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `hubUser' for #<User:0x007eff2c487a88>
Did you mean?  hub_user
               hub_user?
               hub_user=:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:35:in `value'
  actionview (5.0.2) lib/action_view/helpers/tags/checkable.rb:10:in `input_checked?'
  actionview (5.0.2) lib/action_view/helpers/tags/check_box.rb:19:in `render'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:952:in `check_box'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:1699:in `check_box'
  app/views/users/_form.html.erb:41:in `block in _app_views_users__form_html_erb___4323832743319660026_69817211073080'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb___4323832743319660026_69817211073080'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___3352579798466636377_69816982180780'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/68881dbb58438ab2/variables" for 127.0.0.1 at 2017-03-28 15:25:45 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-28 15:29:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (2.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.7ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (54.0ms)
  Rendered users/edit.html.erb within layouts/admin (68.6ms)
Completed 500 Internal Server Error in 392ms (ActiveRecord: 46.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `map' for nil:NilClass
Did you mean?  tap:
  actionview (5.0.2) lib/action_view/helpers/form_options_helper.rb:358:in `options_for_select'
  app/views/users/_form.html.erb:48:in `block in _app_views_users__form_html_erb__321800281089393909_70156888848840'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb__321800281089393909_70156888848840'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___487601463969040594_70157117586180'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/9c3451b9cc23d424/variables" for 127.0.0.1 at 2017-03-28 15:29:55 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-28 15:31:03 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (2.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (1.4ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (77.5ms)
  Rendered users/edit.html.erb within layouts/admin (83.5ms)
Completed 500 Internal Server Error in 130ms (ActiveRecord: 16.4ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `map' for nil:NilClass
Did you mean?  tap:
  actionview (5.0.2) lib/action_view/helpers/form_options_helper.rb:358:in `options_for_select'
  app/views/users/_form.html.erb:58:in `block in _app_views_users__form_html_erb__321800281089393909_47423379104200'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb__321800281089393909_47423379104200'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___487601463969040594_47423378875340'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ce965dab5e4175c5/variables" for 127.0.0.1 at 2017-03-28 15:31:03 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-28 15:31:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (7.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (5.5ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (80.6ms)
  Rendered users/edit.html.erb within layouts/admin (98.5ms)
Completed 500 Internal Server Error in 456ms (ActiveRecord: 51.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `map' for nil:NilClass
Did you mean?  tap:
  actionview (5.0.2) lib/action_view/helpers/form_options_helper.rb:358:in `options_for_select'
  app/views/users/_form.html.erb:58:in `block in _app_views_users__form_html_erb__1943398180874287442_70236177968900'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb__1943398180874287442_70236177968900'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___679698831147158478_70236407001140'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ffddf6ee32625e08/variables" for 127.0.0.1 at 2017-03-28 15:31:22 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-28 15:34:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (1.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.7ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (52.4ms)
  Rendered users/edit.html.erb within layouts/admin (67.2ms)
  Rendered layouts/_headcontent.html.erb (2336.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (171.5ms)
  Rendered layouts/_topnavbar.html.erb (6.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2902ms (Views: 2605.7ms | ActiveRecord: 59.2ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:34:32 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.5ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (15.1ms)
  Rendered users/edit.html.erb within layouts/admin (17.8ms)
  Rendered layouts/_headcontent.html.erb (499.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  [1m[35m (4.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (54.6ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 648ms (Views: 606.4ms | ActiveRecord: 9.2ms)


Started PATCH "/en/users/29" for 127.0.0.1 at 2017-03-28 15:34:55 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"CaxwY9L5cuDtG+9Iim/QYJCWCoruOPbQtttWnfp6UERbLUliicEYw1Oyhs5CvWqnn14pH8zNSJyBE7u28ljvPQ==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "is_active"=>"1", "case_team"=>"1", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.6ms)[0m  [1m[33mUPDATE "users" SET "hub" = $1, "region" = $2, "case_team" = $3, "updated_at" = $4, "modified_by" = $5 WHERE "users"."id" = $6[0m  [["hub", "1"], ["region", "4"], ["case_team", 1], ["updated_at", 2017-03-28 12:34:55 UTC], ["modified_by", 21], ["id", 29]]
  [1m[35m (21.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 53ms (ActiveRecord: 27.3ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 15:34:55 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (7.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (7.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (154.7ms)
  Rendered layouts/_headcontent.html.erb (567.7ms)
  Rendered layouts/_layout_common_js.html.erb (3.6ms)
  Rendered layouts/_logoheader.html.erb (2.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.9ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 835ms (Views: 779.1ms | ActiveRecord: 36.6ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:35:02 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.3ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (1.2ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (13.0ms)
  Rendered users/edit.html.erb within layouts/admin (15.8ms)
  Rendered layouts/_headcontent.html.erb (536.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.1ms)
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (51.7ms)
  Rendered layouts/_topnavbar.html.erb (2.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 677ms (Views: 633.0ms | ActiveRecord: 19.9ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:40:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.7ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (8.3ms)
  Rendered users/edit.html.erb within layouts/admin (21.8ms)
Completed 500 Internal Server Error in 339ms (ActiveRecord: 54.0ms)



SyntaxError - syntax error, unexpected '|'
...ct(User.user_types.map {|k,v| |k, v| }, :selected => f.objec...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected '|', expecting '='
...er.user_types.map {|k,v| |k, v| }, :selected => f.object.rol...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected =>, expecting &. or :: or '[' or '.'
...ct.role_type, :include_blank => true),{}, {:class => 'form-c...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected ')', expecting '}'
...}, {:class => 'form-control'} );@output_buffer.safe_append='
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:76: syntax error, unexpected keyword_end, expecting '}'
'.freeze;   end 
               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:84: syntax error, unexpected keyword_ensure, expecting '}'
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:86: syntax error, unexpected keyword_end, expecting '}':
  app/views/users/_form.html.erb:49:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___1395281579159719980_70211173997060'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7c773cec74f0e4ee/variables" for 127.0.0.1 at 2017-03-28 15:40:19 +0300
Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:40:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (1.0ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (2.0ms)
  Rendered users/edit.html.erb within layouts/admin (30.5ms)
Completed 500 Internal Server Error in 341ms (ActiveRecord: 44.0ms)



SyntaxError - syntax error, unexpected '|'
...ect(User.user_types.map{|k,v| |k, v| }, :selected => f.objec...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected '|', expecting '='
...ser.user_types.map{|k,v| |k, v| }, :selected => f.object.rol...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected =>, expecting &. or :: or '[' or '.'
...ct.role_type, :include_blank => true),{}, {:class => 'form-c...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected ')', expecting '}'
...}, {:class => 'form-control'} );@output_buffer.safe_append='
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:76: syntax error, unexpected keyword_end, expecting '}'
'.freeze;   end 
               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:84: syntax error, unexpected keyword_ensure, expecting '}'
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:86: syntax error, unexpected keyword_end, expecting '}':
  app/views/users/_form.html.erb:49:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___1238785064983408486_70301032912420'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/88d56a1727171dea/variables" for 127.0.0.1 at 2017-03-28 15:40:53 +0300
Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:42:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (3.1ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (8.5ms)
  Rendered users/edit.html.erb within layouts/admin (32.0ms)
Completed 500 Internal Server Error in 341ms (ActiveRecord: 46.6ms)



SyntaxError - syntax error, unexpected '|'
...t(User.user_types.map { |k,v| |k,v| }, :selected => f.object...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected '|', expecting '='
...er.user_types.map { |k,v| |k,v| }, :selected => f.object.rol...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected =>, expecting &. or :: or '[' or '.'
...ct.role_type, :include_blank => true),{}, {:class => 'form-c...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected ')', expecting '}'
...}, {:class => 'form-control'} );@output_buffer.safe_append='
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:76: syntax error, unexpected keyword_end, expecting '}'
'.freeze;   end 
               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:84: syntax error, unexpected keyword_ensure, expecting '}'
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:86: syntax error, unexpected keyword_end, expecting '}':
  app/views/users/_form.html.erb:49:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb__1626316509510606135_69884225258280'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1224f150fd059547/variables" for 127.0.0.1 at 2017-03-28 15:42:08 +0300
Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:43:16 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.8ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (5.5ms)
  Rendered users/edit.html.erb within layouts/admin (17.8ms)
Completed 500 Internal Server Error in 314ms (ActiveRecord: 34.9ms)



SyntaxError - syntax error, unexpected '|'
...t(User.user_types.map { |k,v| |k,v| }) );@output_buffer.safe...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:49: syntax error, unexpected '|', expecting '='
...er.user_types.map { |k,v| |k,v| }) );@output_buffer.safe_app...
...                               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:76: syntax error, unexpected keyword_end, expecting '}'
'.freeze;   end 
               ^
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:84: syntax error, unexpected keyword_ensure, expecting '}'
/home/dawit/cats/cats-web/app/views/users/_form.html.erb:86: syntax error, unexpected keyword_end, expecting '}':
  app/views/users/_form.html.erb:49:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb__1280407983238828680_70234164442540'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/bef2d8f9af8f3243/variables" for 127.0.0.1 at 2017-03-28 15:43:16 +0300
Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 15:44:54 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (3.4ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (107.0ms)
  Rendered users/edit.html.erb within layouts/admin (132.7ms)
Completed 500 Internal Server Error in 443ms (ActiveRecord: 44.9ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `role_type' for #<User:0x007efe28af7850>
Did you mean?  role_types_id:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  actionview (5.0.2) lib/action_view/helpers/tags/base.rb:35:in `value'
  actionview (5.0.2) lib/action_view/helpers/tags/select.rb:16:in `block in render'
  actionview (5.0.2) lib/action_view/helpers/tags/select.rb:16:in `render'
  actionview (5.0.2) lib/action_view/helpers/form_options_helper.rb:163:in `select'
  actionview (5.0.2) lib/action_view/helpers/form_options_helper.rb:817:in `select'
  app/views/users/_form.html.erb:49:in `block in _app_views_users__form_html_erb___4597589623770187857_69815036309800'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb___4597589623770187857_69815036309800'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___1250337905685370281_69815298953760'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d86a3dcba0581bb3/variables" for 127.0.0.1 at 2017-03-28 15:44:55 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (87.2ms)[0m  [1m[35mALTER TABLE "users" DROP "is_case_team"[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "users" DROP "is_admin"[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "users" DROP "is_case_team"[0m
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DROP "is_case_team"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "is_admin"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "case_team"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "hub_user"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "regional_user"[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "users" DROP "role_type_id"[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DROP "is_case_team"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP "is_admin"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DROP "case_team"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "hub_user"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "regional_user"[0m
  [1m[35m (54.5ms)[0m  [1m[35mALTER TABLE "users" DROP "role_types_id"[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170328133734"]]
  [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (4.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddDepartmentToUsers (20170328134548)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "department" integer[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170328134548"]]
  [1m[35m (48.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/en/users/29/" for 127.0.0.1 at 2017-03-28 16:48:05 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (7.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (2.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (74.2ms)
  Rendered layouts/_headcontent.html.erb (2641.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.5ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (115.3ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3145ms (Views: 2872.8ms | ActiveRecord: 57.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 16:48:13 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (5.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (179.9ms)
  Rendered layouts/_headcontent.html.erb (650.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (5.2ms)
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.3ms)
  Rendered layouts/_topnavbar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 950ms (Views: 901.5ms | ActiveRecord: 28.8ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-28 16:49:23 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (10.7ms)
  Rendered layouts/_headcontent.html.erb (604.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (10.0ms)
  [1m[35m (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.1ms)
  Rendered layouts/_topnavbar.html.erb (6.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 740ms (Views: 700.1ms | ActiveRecord: 9.5ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:49:32 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (4.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (4.0ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (94.6ms)
  Rendered users/edit.html.erb within layouts/admin (99.6ms)
Completed 500 Internal Server Error in 248ms (ActiveRecord: 26.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `role_types_id' for #<User:0x007f182492f688>
Did you mean?  role_ids:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/_form.html.erb:49:in `block in _app_views_users__form_html_erb__4271310897340679433_69870831913860'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'
  actionview (5.0.2) lib/action_view/helpers/capture_helper.rb:39:in `capture'
  actionview (5.0.2) lib/action_view/helpers/form_helper.rb:450:in `form_for'
  app/views/users/_form.html.erb:4:in `_app_views_users__form_html_erb__4271310897340679433_69870831913860'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:343:in `render_partial'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:311:in `block in render'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/partial_renderer.rb:310:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:47:in `render_partial'
  actionview (5.0.2) lib/action_view/helpers/rendering_helper.rb:35:in `render'
  app/views/users/edit.html.erb:20:in `_app_views_users_edit_html_erb___3505508971492722792_69870832080400'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/05aaf0821045b71e/variables" for 127.0.0.1 at 2017-03-28 16:49:32 +0300
Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:50:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (1.0ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (47.1ms)
  Rendered users/edit.html.erb within layouts/admin (59.8ms)
  Rendered layouts/_headcontent.html.erb (2528.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (184.0ms)
  Rendered layouts/_topnavbar.html.erb (6.0ms)
  Rendered layouts/_footer.html.erb (2.0ms)
Completed 200 OK in 3115ms (Views: 2800.9ms | ActiveRecord: 61.9ms)


Started PATCH "/en/users/29" for 127.0.0.1 at 2017-03-28 16:51:07 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"h6cHJB2GlytctuxntMrGy1+BcckXzOEngefSEjhpCiXVJj4lRr79COIfheF8GHwMUElSXDU5X2u2Lz85MEu1XA==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "is_active"=>"1", "user_type_id"=>"3", "department"=>"1", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
Unpermitted parameters: user_type_id, department
  [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 36ms (ActiveRecord: 9.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 16:51:07 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (5.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (4.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (163.7ms)
  Rendered layouts/_headcontent.html.erb (675.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.2ms)
  Rendered layouts/_topnavbar.html.erb (8.9ms)
  Rendered layouts/_footer.html.erb (4.8ms)
Completed 200 OK in 958ms (Views: 896.5ms | ActiveRecord: 40.6ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:51:12 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (2.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (1.9ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (12.9ms)
  Rendered users/edit.html.erb within layouts/admin (20.9ms)
  Rendered layouts/_headcontent.html.erb (618.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.5ms)
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (56.5ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 776ms (Views: 737.8ms | ActiveRecord: 16.2ms)


Started PATCH "/en/users/29" for 127.0.0.1 at 2017-03-28 16:51:22 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Cqjj84Wi5DGouy0PifHMNgLboDZ1swfQG8FpOag19rNYKdry3pqOEhYSRIlBI3bxDRODo1dGuZwsCYQSoBdJyg==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "is_active"=>"1", "user_type_id"=>"5", "department"=>"1", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
Unpermitted parameters: user_type_id, department
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 26ms (ActiveRecord: 8.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 16:51:22 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (6.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (4.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (101.1ms)
  Rendered layouts/_headcontent.html.erb (549.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (6.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (119.0ms)
  Rendered layouts/_topnavbar.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 837ms (Views: 789.6ms | ActiveRecord: 27.3ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:51:26 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (3.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (1.2ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (5.6ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (18.2ms)
  Rendered users/edit.html.erb within layouts/admin (28.1ms)
  Rendered layouts/_headcontent.html.erb (593.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (20.3ms)
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.7ms)
  Rendered layouts/_topnavbar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 746ms (Views: 707.5ms | ActiveRecord: 19.2ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:56:11 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (7.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (4.6ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (15.7ms)
  Rendered users/edit.html.erb within layouts/admin (26.2ms)
  Rendered layouts/_headcontent.html.erb (588.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.7ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (112.7ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 975ms (Views: 767.4ms | ActiveRecord: 14.1ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:56:25 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (1.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (11.1ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (68.1ms)
  Rendered users/edit.html.erb within layouts/admin (80.4ms)
  Rendered layouts/_headcontent.html.erb (2654.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (8.4ms)
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (175.9ms)
  Rendered layouts/_topnavbar.html.erb (3.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 3234ms (Views: 2918.9ms | ActiveRecord: 65.6ms)


Started PATCH "/en/users/29" for 127.0.0.1 at 2017-03-28 16:56:48 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4vcAMcpIu3l2kapD4gG+e439GTBR/5m0tJ568/IAroewdjkwkXDRWsg4w8Uq0wS8gjU6pXMKJ/iDVpfY+iIR/g==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "is_active"=>"1", "user_type_id"=>"3", "department"=>"2", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.5ms)[0m  [1m[33mUPDATE "users" SET "user_type_id" = $1, "department" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["user_type_id", 3], ["department", 2], ["updated_at", 2017-03-28 13:56:48 UTC], ["id", 29]]
  [1m[35m (39.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 87ms (ActiveRecord: 64.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 16:56:48 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (5.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (147.6ms)
  Rendered layouts/_headcontent.html.erb (641.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (10.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (48.1ms)
  Rendered layouts/_topnavbar.html.erb (4.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 906ms (Views: 840.8ms | ActiveRecord: 41.4ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:56:53 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (3.4ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (15.9ms)
  Rendered users/edit.html.erb within layouts/admin (21.5ms)
  Rendered layouts/_headcontent.html.erb (596.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.6ms)
  [1m[35m (4.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.4ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (3.0ms)
Completed 200 OK in 756ms (Views: 709.4ms | ActiveRecord: 17.3ms)


Started PATCH "/en/users/29" for 127.0.0.1 at 2017-03-28 16:57:06 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"do78caRRk8I+3FDJNr0yjz1u4oWJJWVSmKrJY0QIgIkkD8Vw/2n54YB1OU/+b4hIMqbBEKvQ2x6vYiRITCo/8A==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "is_active"=>"1", "user_type_id"=>"3", "department"=>"2", "hub"=>"2", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.1ms)[0m  [1m[33mUPDATE "users" SET "hub" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["hub", "2"], ["updated_at", 2017-03-28 13:57:06 UTC], ["id", 29]]
  [1m[35m (46.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 80ms (ActiveRecord: 54.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 16:57:06 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (9.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (90.3ms)
  Rendered layouts/_headcontent.html.erb (503.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.9ms)
  Rendered layouts/_logoheader.html.erb (14.1ms)
  [1m[36mCACHE (19.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (58.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 721ms (Views: 653.2ms | ActiveRecord: 52.4ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:57:12 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (2.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (1.5ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (10.8ms)
  Rendered users/edit.html.erb within layouts/admin (18.1ms)
  Rendered layouts/_headcontent.html.erb (600.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.5ms)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.7ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 740ms (Views: 712.4ms | ActiveRecord: 9.0ms)


Started PATCH "/en/users/29" for 127.0.0.1 at 2017-03-28 16:57:22 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0x4EoQu2xI+m/QiI/m9oGcrDK751pAatD4WqhMZhZf6Bnz2gUI6urBhUYQ42vdLexQsIK1dRuOE4TUevzkPahw==", "user"=>{"first_name"=>"mola", "last_name"=>"m", "email"=>"mm@gmail.com", "is_active"=>"1", "user_type_id"=>"3", "department"=>"2", "hub"=>"2", "region"=>"7"}, "commit"=>"Update User", "locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.4ms)[0m  [1m[33mUPDATE "users" SET "region" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["region", "7"], ["updated_at", 2017-03-28 13:57:22 UTC], ["id", 29]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 34ms (ActiveRecord: 12.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-28 16:57:22 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (4.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (80.8ms)
  Rendered layouts/_headcontent.html.erb (616.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.0ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 806ms (Views: 766.0ms | ActiveRecord: 17.5ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-28 16:57:26 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.4ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (9.7ms)
  Rendered users/edit.html.erb within layouts/admin (17.8ms)
  Rendered layouts/_headcontent.html.erb (626.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  [1m[35m (6.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (61.6ms)
  Rendered layouts/_topnavbar.html.erb (2.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 772ms (Views: 731.4ms | ActiveRecord: 12.3ms)


Started GET "/en/users/29/edit" for 127.0.0.1 at 2017-03-29 09:24:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"29"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (6.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (2.3ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (48.1ms)
  Rendered users/edit.html.erb within layouts/admin (64.6ms)
  Rendered layouts/_headcontent.html.erb (2458.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.8ms)
  [1m[35m (5.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (178.3ms)
  Rendered layouts/_topnavbar.html.erb (5.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3065ms (Views: 2733.0ms | ActiveRecord: 74.0ms)


Started GET "/en/transporters" for 127.0.0.1 at 2017-03-29 09:24:28 +0300
Processing by TransportersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering transporters/index.html.erb within layouts/application
  [1m[36mTransporter Load (50.7ms)[0m  [1m[34mSELECT "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL[0m
  Rendered transporters/index.html.erb within layouts/application (97.9ms)
  Rendered layouts/_layout_common_js.html.erb (9.2ms)
  Rendered layouts/_logoheader.html.erb (17.1ms)
  Rendered layouts/_navigation.html.erb (36.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 790ms (Views: 696.6ms | ActiveRecord: 71.3ms)


Started GET "/en/transporters/7/edit" for 127.0.0.1 at 2017-03-29 09:27:12 +0300
Processing by TransportersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (4.0ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/edit.html.erb within layouts/application
  [1m[36mOwnershipType Load (18.8ms)[0m  [1m[34mSELECT "ownership_types".* FROM "ownership_types" WHERE "ownership_types"."deleted_at" IS NULL ORDER BY "ownership_types"."name" ASC[0m
  Rendered transporters/_form.html.erb (112.4ms)
  Rendered transporters/edit.html.erb within layouts/application (120.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (12.9ms)
  Rendered layouts/_navigation.html.erb (26.7ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 880ms (Views: 835.5ms | ActiveRecord: 32.7ms)


Started GET "/en/transporters/7" for 127.0.0.1 at 2017-03-29 09:27:19 +0300
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (0.7ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (24.9ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 7]]
  Rendered transporters/show.html.erb within layouts/application (59.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (6.5ms)
  Rendered layouts/_navigation.html.erb (35.8ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 757ms (Views: 706.5ms | ActiveRecord: 33.7ms)


Started GET "/en/transporters/7" for 127.0.0.1 at 2017-03-29 09:42:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by TransportersController#show as HTML
  Parameters: {"locale"=>"en", "id"=>"7"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTransporter Load (0.7ms)[0m  [1m[34mSELECT  "transporters".* FROM "transporters" WHERE "transporters"."deleted_at" IS NULL AND "transporters"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendering transporters/show.html.erb within layouts/application
  [1m[36mTransporterAddress Load (4.9ms)[0m  [1m[34mSELECT "transporter_addresses".* FROM "transporter_addresses" WHERE "transporter_addresses"."deleted_at" IS NULL AND "transporter_addresses"."transporter_id" = $1[0m  [["transporter_id", 7]]
  Rendered transporters/show.html.erb within layouts/application (68.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (3.9ms)
  Rendered layouts/_navigation.html.erb (19.8ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2881ms (Views: 2681.3ms | ActiveRecord: 35.7ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-29 09:43:10 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (4.8ms)
  Rendered layouts/_headcontent.html.erb (606.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (145.3ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 805ms (Views: 762.4ms | ActiveRecord: 25.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 09:43:17 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (12.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (153.7ms)
  Rendered layouts/_headcontent.html.erb (630.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (58.8ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 898ms (Views: 840.3ms | ActiveRecord: 39.3ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:43:21 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (4.7ms)
Completed 500 Internal Server Error in 83ms (ActiveRecord: 13.6ms)



SyntaxError - unknown regexp option - p
unmatched close parenthesis: /h4>
          <p>Registered since:
            <%= time_ago_in_words(@transporter.created_at) );@output_buffer.safe_append='</
/home/dawit/cats/cats-web/app/views/users/show.html.erb:41: syntax error, unexpected '<'
          <small>
           ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:43: syntax error, unexpected '<', expecting ')'
          </small>
           ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:44: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:45: syntax error, unexpected '<'
      </div>
       ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:49: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:50: syntax error, unexpected '<'
  </div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:51: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:54: syntax error, unexpected '<'
<div class="wrapper wrapper-content">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:55: syntax error, unexpected '<'
  <div class="ibox float-e-margins">
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:56: syntax error, unexpected '<'
    <div class="ibox-content">
     ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:59: syntax error, unexpected '<'
<div class="row">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:60: syntax error, unexpected '<'
<div class="col-sm-4">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:61: syntax error, unexpected '<'
  <div class="control-label col-sm-3"> User</div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:62: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:63: syntax error, unexpected '<'
</div>
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:66: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:67: syntax error, unexpected '<'
  <div class="col-sm-5"> '.freez...
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:68: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:70: syntax error, unexpected '<'
<div class="col-sm-4">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:71: syntax error, unexpected '<'
  <div class="control-label col-sm-3"> Last login</div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:71: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
  <div class="control-label col-sm-3"> Last login</div>
                                                 ^
end pattern with unmatched parenthesis: /div>
  <div class="col-sm-5"> '.freeze;@output_buffer.append=( @user.last_sign_in_at.strftime("%m/
/home/dawit/cats/cats-web/app/views/users/show.html.erb:72: unknown type of %string
..._sign_in_at.strftime("%m/%d/%y") );@output_buffer.safe_appen...
...                               ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:72: syntax error, unexpected end-of-input
..._sign_in_at.strftime("%m/%d/%y") );@output_buffer.safe_appen...
...                               ^:
  app/views/users/show.html.erb:40:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/940553ee4c05a560/variables" for 127.0.0.1 at 2017-03-29 09:43:22 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (4.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:44:51 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.5ms)
Completed 500 Internal Server Error in 51ms (ActiveRecord: 12.2ms)



SyntaxError - end pattern with unmatched parenthesis: /h4>
          <p>Registered since:
            <%= time_ago_in_words(@user.created_at.strftime("%m/
/home/dawit/cats/cats-web/app/views/users/show.html.erb:40: unknown type of %string
....created_at.strftime("%m/%d/%y")) );@output_buffer.safe_appe...
...                               ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:40: syntax error, unexpected end-of-input
....created_at.strftime("%m/%d/%y")) );@output_buffer.safe_appe...
...                               ^:
  app/views/users/show.html.erb:40:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7b06cece134e2e11/variables" for 127.0.0.1 at 2017-03-29 09:44:51 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:46:36 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (2.4ms)
Completed 500 Internal Server Error in 57ms (ActiveRecord: 7.4ms)



SyntaxError - end pattern with unmatched parenthesis: /h4>
          <p>Registered since:
            <%= time_ago_in_words(@user.created_at.strftime("%m/
/home/dawit/cats/cats-web/app/views/users/show.html.erb:40: unknown type of %string
....created_at.strftime("%m/%d/%y")) );@output_buffer.safe_appe...
...                               ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:40: syntax error, unexpected end-of-input
....created_at.strftime("%m/%d/%y")) );@output_buffer.safe_appe...
...                               ^:
  app/views/users/show.html.erb:40:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b420a5b9c72a3c44/variables" for 127.0.0.1 at 2017-03-29 09:46:36 +0300
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:46:46 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (3.7ms)
Completed 500 Internal Server Error in 274ms (ActiveRecord: 28.2ms)



SyntaxError - end pattern with unmatched parenthesis: /h4>
          <p>Registered since:
            <%= time_ago_in_words(@user.created_at.strftime("%m/
/home/dawit/cats/cats-web/app/views/users/show.html.erb:40: unknown type of %string
....created_at.strftime("%m/%d/%y")) );@output_buffer.safe_appe...
...                               ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:40: syntax error, unexpected end-of-input
....created_at.strftime("%m/%d/%y")) );@output_buffer.safe_appe...
...                               ^:
  app/views/users/show.html.erb:40:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/51796f727aafd040/variables" for 127.0.0.1 at 2017-03-29 09:46:47 +0300
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (5.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:47:47 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.7ms)
Completed 500 Internal Server Error in 50ms (ActiveRecord: 9.8ms)



SyntaxError - unknown regexp option - p
unmatched close parenthesis: /h4>
          <p>Registered since:
            <%= time_ago_in_words(@user.created_at) );@output_buffer.safe_append='</
/home/dawit/cats/cats-web/app/views/users/show.html.erb:41: syntax error, unexpected '<'
          <small>
           ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:43: syntax error, unexpected '<', expecting ')'
          </small>
           ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:44: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:45: syntax error, unexpected '<'
      </div>
       ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:49: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:50: syntax error, unexpected '<'
  </div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:51: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:54: syntax error, unexpected '<'
<div class="wrapper wrapper-content">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:55: syntax error, unexpected '<'
  <div class="ibox float-e-margins">
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:56: syntax error, unexpected '<'
    <div class="ibox-content">
     ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:59: syntax error, unexpected '<'
<div class="row">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:60: syntax error, unexpected '<'
<div class="col-sm-4">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:61: syntax error, unexpected '<'
  <div class="control-label col-sm-3"> User</div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:62: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:63: syntax error, unexpected '<'
</div>
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:66: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:67: syntax error, unexpected '<'
  <div class="col-sm-5"> '.freez...
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:68: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:70: syntax error, unexpected '<'
<div class="col-sm-4">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:71: syntax error, unexpected '<'
  <div class="control-label col-sm-3"> Last login</div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:71: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
  <div class="control-label col-sm-3"> Last login</div>
                                                 ^
end pattern with unmatched parenthesis: /div>
  <div class="col-sm-5"> '.freeze;@output_buffer.append=( @user.last_sign_in_at.strftime("%m/
/home/dawit/cats/cats-web/app/views/users/show.html.erb:72: unknown type of %string
..._sign_in_at.strftime("%m/%d/%y") );@output_buffer.safe_appen...
...                               ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:72: syntax error, unexpected end-of-input
..._sign_in_at.strftime("%m/%d/%y") );@output_buffer.safe_appen...
...                               ^:
  app/views/users/show.html.erb:40:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b6d9cfa49d103b7f/variables" for 127.0.0.1 at 2017-03-29 09:47:47 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (3.2ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/" for 127.0.0.1 at 2017-03-29 09:55:18 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by DashboardController#index as HTML
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering dashboard/index.html.erb within layouts/application
  Rendered dashboard/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_layout_common_js.html.erb (1.0ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  Rendered layouts/_navigation.html.erb (61.0ms)
  Rendered layouts/_topnavbar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2563ms (Views: 2446.7ms | ActiveRecord: 17.9ms)


Started GET "/en/setting/index" for 127.0.0.1 at 2017-03-29 09:55:31 +0300
Processing by SettingController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering setting/index.html.erb within layouts/admin
  Rendered setting/index.html.erb within layouts/admin (11.1ms)
  Rendered layouts/_headcontent.html.erb (592.8ms)
  Rendered layouts/_layout_common_js.html.erb (8.8ms)
  Rendered layouts/_logoheader.html.erb (18.0ms)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (201.9ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 862ms (Views: 836.9ms | ActiveRecord: 17.2ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 09:55:38 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (7.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  Rendered users/index.html.erb within layouts/admin (156.9ms)
  Rendered layouts/_headcontent.html.erb (554.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (41.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 802ms (Views: 744.4ms | ActiveRecord: 35.3ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:55:43 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (1.7ms)
Completed 500 Internal Server Error in 87ms (ActiveRecord: 8.9ms)



SyntaxError - unknown regexp option - p
unmatched close parenthesis: /h4>
          <p>Registered since:
            <%= (@user.created_at) );@output_buffer.safe_append='</
/home/dawit/cats/cats-web/app/views/users/show.html.erb:41: syntax error, unexpected '<'
          <small>
           ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:43: syntax error, unexpected '<', expecting ')'
          </small>
           ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:44: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:45: syntax error, unexpected '<'
      </div>
       ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:49: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:50: syntax error, unexpected '<'
  </div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:51: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:54: syntax error, unexpected '<'
<div class="wrapper wrapper-content">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:55: syntax error, unexpected '<'
  <div class="ibox float-e-margins">
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:56: syntax error, unexpected '<'
    <div class="ibox-content">
     ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:59: syntax error, unexpected '<'
<div class="row">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:60: syntax error, unexpected '<'
<div class="col-sm-4">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:61: syntax error, unexpected '<'
  <div class="control-label col-sm-3"> User</div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:62: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:63: syntax error, unexpected '<'
</div>
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:66: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:67: syntax error, unexpected '<'
  <div class="col-sm-5"> '.freez...
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:68: unknown regexp options - dv
/home/dawit/cats/cats-web/app/views/users/show.html.erb:70: syntax error, unexpected '<'
<div class="col-sm-4">
 ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:71: syntax error, unexpected '<'
  <div class="control-label col-sm-3"> Last login</div>
   ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:71: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
  <div class="control-label col-sm-3"> Last login</div>
                                                 ^
end pattern with unmatched parenthesis: /div>
  <div class="col-sm-5"> '.freeze;@output_buffer.append=( @user.last_sign_in_at.strftime("%m/
/home/dawit/cats/cats-web/app/views/users/show.html.erb:72: unknown type of %string
..._sign_in_at.strftime("%m/%d/%y") );@output_buffer.safe_appen...
...                               ^
/home/dawit/cats/cats-web/app/views/users/show.html.erb:72: syntax error, unexpected end-of-input
..._sign_in_at.strftime("%m/%d/%y") );@output_buffer.safe_appen...
...                               ^:
  app/views/users/show.html.erb:40:in `'
  actionview (5.0.2) lib/action_view/template.rb:310:in `compile'
  actionview (5.0.2) lib/action_view/template.rb:259:in `block (2 levels) in compile!'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:356:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:258:in `block in compile!'
  actionview (5.0.2) lib/action_view/template.rb:246:in `compile!'
  actionview (5.0.2) lib/action_view/template.rb:158:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/8d10893661123735/variables" for 127.0.0.1 at 2017-03-29 09:55:43 +0300
  [1m[36mDepartment Load (3.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:56:40 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (22.1ms)
Completed 500 Internal Server Error in 283ms (ActiveRecord: 33.6ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

ArgumentError - argument out of range:
  activesupport (5.0.2) lib/active_support/core_ext/string/conversions.rb:25:in `to_time'
  actionview (5.0.2) lib/action_view/helpers/date_helper.rb:98:in `distance_of_time_in_words'
  actionview (5.0.2) lib/action_view/helpers/date_helper.rb:179:in `time_ago_in_words'
  app/views/users/show.html.erb:40:in `_app_views_users_show_html_erb__2268802559893777127_70023072258580'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/ffbea27ee58a9c51/variables" for 127.0.0.1 at 2017-03-29 09:56:41 +0300
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
Started GET "/users/29" for 127.0.0.1 at 2017-03-29 09:57:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (5.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (2.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (144.8ms)
  Rendered layouts/_headcontent.html.erb (2566.8ms)
  Rendered layouts/_layout_common_js.html.erb (5.8ms)
  Rendered layouts/_logoheader.html.erb (7.2ms)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (115.7ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3106ms (Views: 2848.7ms | ActiveRecord: 56.8ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:00:39 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (3.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (102.6ms)
  Rendered layouts/_headcontent.html.erb (2143.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (4.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (112.6ms)
  Rendered layouts/_topnavbar.html.erb (3.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2641ms (Views: 2385.3ms | ActiveRecord: 53.6ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:01:32 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (14.7ms)
  Rendered layouts/_headcontent.html.erb (459.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (7.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (98.1ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 666ms (Views: 606.0ms | ActiveRecord: 24.1ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:02:15 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (106.3ms)
  Rendered layouts/_headcontent.html.erb (2298.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (103.0ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2791ms (Views: 2552.3ms | ActiveRecord: 43.6ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:04:12 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (5.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (117.9ms)
  Rendered layouts/_headcontent.html.erb (2686.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.2ms)
  [1m[35m (13.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (136.5ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3262ms (Views: 2976.3ms | ActiveRecord: 58.2ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:05:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (6.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (6.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (142.9ms)
  Rendered layouts/_headcontent.html.erb (2425.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (111.9ms)
  Rendered layouts/_topnavbar.html.erb (7.0ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 3065ms (Views: 2723.4ms | ActiveRecord: 69.0ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:06:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (7.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (103.0ms)
  Rendered layouts/_headcontent.html.erb (2373.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (5.7ms)
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (119.7ms)
  Rendered layouts/_topnavbar.html.erb (6.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 2898ms (Views: 2620.1ms | ActiveRecord: 78.8ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:07:10 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (8.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (100.0ms)
  Rendered layouts/_headcontent.html.erb (2289.7ms)
  Rendered layouts/_layout_common_js.html.erb (5.4ms)
  Rendered layouts/_logoheader.html.erb (9.0ms)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (109.7ms)
  Rendered layouts/_topnavbar.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2765ms (Views: 2532.5ms | ActiveRecord: 48.9ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:08:10 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (14.5ms)
  Rendered layouts/_headcontent.html.erb (474.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.4ms)
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (95.2ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 676ms (Views: 619.9ms | ActiveRecord: 24.1ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:09:12 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (14.7ms)
  Rendered layouts/_headcontent.html.erb (570.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.0ms)
  [1m[35m (11.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (65.4ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 731ms (Views: 674.6ms | ActiveRecord: 25.1ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:10:07 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (15.6ms)
  Rendered layouts/_headcontent.html.erb (564.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (13.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (61.1ms)
  Rendered layouts/_topnavbar.html.erb (6.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 724ms (Views: 668.3ms | ActiveRecord: 28.0ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:10:39 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (17.8ms)
  Rendered layouts/_headcontent.html.erb (656.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (13.3ms)
  [1m[35m (11.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (66.2ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 810ms (Views: 758.4ms | ActiveRecord: 19.9ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:13:10 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (13.6ms)
  Rendered layouts/_headcontent.html.erb (556.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.6ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 710ms (Views: 660.0ms | ActiveRecord: 10.9ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:13:38 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (16.8ms)
  Rendered layouts/_headcontent.html.erb (542.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  [1m[35m (17.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (62.8ms)
  Rendered layouts/_topnavbar.html.erb (2.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 695ms (Views: 639.5ms | ActiveRecord: 25.7ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:14:39 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (13.4ms)
  Rendered layouts/_headcontent.html.erb (574.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.2ms)
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (62.8ms)
  Rendered layouts/_topnavbar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 724ms (Views: 675.4ms | ActiveRecord: 21.3ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:15:05 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (19.1ms)
  Rendered layouts/_headcontent.html.erb (546.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (6.1ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (71.1ms)
  Rendered layouts/_topnavbar.html.erb (7.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 704ms (Views: 661.5ms | ActiveRecord: 8.7ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:16:14 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (7.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (22.9ms)
  Rendered layouts/_headcontent.html.erb (555.3ms)
  Rendered layouts/_layout_common_js.html.erb (1.8ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (54.2ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 727ms (Views: 673.1ms | ActiveRecord: 18.3ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:16:43 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (12.9ms)
  Rendered layouts/_headcontent.html.erb (523.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.4ms)
  [1m[35m (6.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (54.7ms)
  Rendered layouts/_topnavbar.html.erb (7.4ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 682ms (Views: 634.4ms | ActiveRecord: 21.0ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:17:39 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (9.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (2.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (26.4ms)
  Rendered layouts/_headcontent.html.erb (533.1ms)
  Rendered layouts/_layout_common_js.html.erb (2.9ms)
  Rendered layouts/_logoheader.html.erb (12.0ms)
  [1m[35m (8.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (5.5ms)
Completed 200 OK in 728ms (Views: 639.9ms | ActiveRecord: 28.2ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:19:11 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (16.0ms)
  Rendered layouts/_headcontent.html.erb (587.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.7ms)
  Rendered layouts/_logoheader.html.erb (13.9ms)
  [1m[35m (13.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (56.3ms)
  Rendered layouts/_topnavbar.html.erb (3.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 739ms (Views: 679.3ms | ActiveRecord: 27.2ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:19:45 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (5.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (12.4ms)
  Rendered layouts/_headcontent.html.erb (548.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (8.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.0ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 695ms (Views: 641.0ms | ActiveRecord: 26.1ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:20:49 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (3.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (15.0ms)
  Rendered layouts/_headcontent.html.erb (640.5ms)
  Rendered layouts/_layout_common_js.html.erb (6.9ms)
  Rendered layouts/_logoheader.html.erb (12.9ms)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (72.1ms)
  Rendered layouts/_topnavbar.html.erb (9.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 818ms (Views: 773.4ms | ActiveRecord: 25.0ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:21:07 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (15.0ms)
  Rendered layouts/_headcontent.html.erb (535.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.8ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.4ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 661ms (Views: 623.7ms | ActiveRecord: 11.2ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:21:25 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (9.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (3.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (3.7ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (15.7ms)
  Rendered layouts/_headcontent.html.erb (518.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (12.2ms)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (69.3ms)
  Rendered layouts/_topnavbar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (4.6ms)
Completed 200 OK in 682ms (Views: 632.7ms | ActiveRecord: 27.5ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:22:21 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (5.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (3.2ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (24.0ms)
  Rendered layouts/_headcontent.html.erb (522.9ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (55.8ms)
  Rendered layouts/_topnavbar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 679ms (Views: 623.9ms | ActiveRecord: 26.2ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:23:00 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (4.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (2.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (14.7ms)
  Rendered layouts/_headcontent.html.erb (487.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (11.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 617ms (Views: 565.9ms | ActiveRecord: 26.4ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:23:33 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (8.4ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (3.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (3.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (17.4ms)
  Rendered layouts/_headcontent.html.erb (476.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.9ms)
  [1m[35m (7.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.1ms)
  Rendered layouts/_topnavbar.html.erb (7.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 616ms (Views: 569.1ms | ActiveRecord: 27.5ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:24:41 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (2.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (13.9ms)
  Rendered layouts/_headcontent.html.erb (509.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (7.3ms)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (51.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 645ms (Views: 599.2ms | ActiveRecord: 12.3ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:25:46 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (0.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (18.9ms)
  Rendered layouts/_headcontent.html.erb (508.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (46.1ms)
  [1m[35m (3.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (98.8ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 697ms (Views: 657.4ms | ActiveRecord: 13.4ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:26:56 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (3.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (12.0ms)
  Rendered layouts/_headcontent.html.erb (569.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (56.5ms)
  Rendered layouts/_topnavbar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 713ms (Views: 658.2ms | ActiveRecord: 21.1ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:27:33 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (6.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (4.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (28.4ms)
  Rendered layouts/_headcontent.html.erb (540.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (8.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.9ms)
  Rendered layouts/_topnavbar.html.erb (6.9ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 718ms (Views: 637.0ms | ActiveRecord: 30.9ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:29:53 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (1.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (3.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (19.0ms)
  Rendered layouts/_headcontent.html.erb (509.2ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (3.4ms)
  [1m[35m (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (64.1ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 661ms (Views: 618.4ms | ActiveRecord: 12.8ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:30:34 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (4.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (1.0ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (17.8ms)
  Rendered layouts/_headcontent.html.erb (571.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.6ms)
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (6.1ms)
Completed 200 OK in 706ms (Views: 659.3ms | ActiveRecord: 16.2ms)


Started GET "/users/29" for 127.0.0.1 at 2017-03-29 10:31:14 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 29]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 29]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (7.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" = 1[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" = 1[0m
  Rendered users/show.html.erb within layouts/admin (14.3ms)
  Rendered layouts/_headcontent.html.erb (542.8ms)
  Rendered layouts/_layout_common_js.html.erb (4.6ms)
  Rendered layouts/_logoheader.html.erb (5.0ms)
  [1m[35m (10.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.2ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 677ms (Views: 623.5ms | ActiveRecord: 23.8ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 10:31:24 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.1ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (4.9ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (50.6ms)
  Rendered users/edit.html.erb within layouts/admin (59.3ms)
  Rendered layouts/_headcontent.html.erb (494.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (18.3ms)
  [1m[35m (5.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.1ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 780ms (Views: 638.8ms | ActiveRecord: 30.0ms)


Started PATCH "/en/users/27" for 127.0.0.1 at 2017-03-29 10:31:35 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V2im5gwh39kjY3UifSnr/YE/BWtd+Mumu2za0jib6gQF6Z/nVxm1+p3KHKS1+1E6jvcm/n8NdeqMpDf5MLlVfQ==", "user"=>{"first_name"=>"", "last_name"=>"", "email"=>"beza@cats.org", "is_active"=>"0", "user_type_id"=>"2", "department"=>"1", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[33mUPDATE "users" SET "first_name" = $1, "last_name" = $2, "is_active" = $3, "hub" = $4, "region" = $5, "user_type_id" = $6, "department" = $7, "updated_at" = $8, "modified_by" = $9 WHERE "users"."id" = $10[0m  [["first_name", ""], ["last_name", ""], ["is_active", false], ["hub", "1"], ["region", "4"], ["user_type_id", 2], ["department", 1], ["updated_at", 2017-03-29 07:31:35 UTC], ["modified_by", 21], ["id", 27]]
  [1m[35m (206.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 261ms (ActiveRecord: 225.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 10:31:35 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (8.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (3.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (196.4ms)
  Rendered layouts/_headcontent.html.erb (552.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (37.5ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 869ms (Views: 806.3ms | ActiveRecord: 36.9ms)


Started GET "/users/28" for 127.0.0.1 at 2017-03-29 10:31:42 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"28"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 28]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 28]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND 1=0[0m
  [1m[36mPermission Load (0.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND 1=0[0m
  Rendered users/show.html.erb within layouts/admin (11.6ms)
  Rendered layouts/_headcontent.html.erb (543.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.5ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (46.9ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 678ms (Views: 638.8ms | ActiveRecord: 9.0ms)


Started GET "/en/users/28/edit" for 127.0.0.1 at 2017-03-29 10:31:59 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"28"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (4.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.7ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (12.2ms)
  Rendered users/edit.html.erb within layouts/admin (16.2ms)
  Rendered layouts/_headcontent.html.erb (534.1ms)
  Rendered layouts/_layout_common_js.html.erb (5.8ms)
  Rendered layouts/_logoheader.html.erb (15.8ms)
  [1m[35m (7.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (44.0ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 666ms (Views: 624.3ms | ActiveRecord: 16.4ms)


Started PATCH "/en/users/28" for 127.0.0.1 at 2017-03-29 10:32:10 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"CtCah2nKv505WLPn533hmniGBETT34LlbjDbjgqk80xYUaOGMvLVvofx2mEvr1tdd04n0fEqPKlZ+DalAoZMNQ==", "user"=>{"first_name"=>"", "last_name"=>"", "email"=>"alex@gmail.com", "is_active"=>"0", "user_type_id"=>"2", "department"=>"1", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"28"}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "first_name" = $1, "last_name" = $2, "is_active" = $3, "hub" = $4, "region" = $5, "user_type_id" = $6, "department" = $7, "updated_at" = $8, "modified_by" = $9 WHERE "users"."id" = $10[0m  [["first_name", ""], ["last_name", ""], ["is_active", false], ["hub", "1"], ["region", "4"], ["user_type_id", 2], ["department", 1], ["updated_at", 2017-03-29 07:32:10 UTC], ["modified_by", 21], ["id", 28]]
  [1m[35m (179.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 212ms (ActiveRecord: 184.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 10:32:11 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (7.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (6.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (3.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  Rendered users/index.html.erb within layouts/admin (81.6ms)
  Rendered layouts/_headcontent.html.erb (543.9ms)
  Rendered layouts/_layout_common_js.html.erb (2.0ms)
  Rendered layouts/_logoheader.html.erb (5.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (39.9ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 734ms (Views: 693.8ms | ActiveRecord: 29.7ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 10:32:36 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (9.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (4.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  Rendered users/index.html.erb within layouts/admin (100.1ms)
  Rendered layouts/_headcontent.html.erb (694.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (10.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (71.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 925ms (Views: 870.3ms | ActiveRecord: 30.1ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 10:32:48 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (1.9ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (2.8ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (19.9ms)
  Rendered users/edit.html.erb within layouts/admin (23.1ms)
  Rendered layouts/_headcontent.html.erb (551.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (9.8ms)
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (50.7ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 696ms (Views: 659.6ms | ActiveRecord: 18.0ms)


Started PATCH "/en/users/27" for 127.0.0.1 at 2017-03-29 10:33:00 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/GCLkYjZiJIYqJb0apU75r1K40V8GvNiAa8hpKtyKf+u4bKQ0+HisaYB/3KiR4EhsoLA0F7vTS42Z8yPo1CWhg==", "user"=>{"first_name"=>"bb", "last_name"=>"nn", "email"=>"beza@cats.org", "is_active"=>"0", "user_type_id"=>"2", "department"=>"1", "hub"=>"1", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "users" SET "first_name" = $1, "last_name" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["first_name", "bb"], ["last_name", "nn"], ["updated_at", 2017-03-29 07:33:00 UTC], ["id", 27]]
  [1m[35m (30.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 73ms (ActiveRecord: 39.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 10:33:00 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (4.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (3.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (89.7ms)
  Rendered layouts/_headcontent.html.erb (592.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (8.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (45.7ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 795ms (Views: 747.4ms | ActiveRecord: 22.4ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:33:06 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.1ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (7.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (4.8ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (32.0ms)
  Rendered layouts/_headcontent.html.erb (564.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (59.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 727ms (Views: 678.0ms | ActiveRecord: 24.0ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:33:55 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (5.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (12.7ms)
  Rendered layouts/_headcontent.html.erb (580.5ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (52.1ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 717ms (Views: 664.1ms | ActiveRecord: 16.6ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:34:51 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (8.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (7.3ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (5.2ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (22.3ms)
  Rendered layouts/_headcontent.html.erb (682.0ms)
  Rendered layouts/_layout_common_js.html.erb (1.5ms)
  Rendered layouts/_logoheader.html.erb (1.2ms)
  [1m[35m (8.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (47.0ms)
  Rendered layouts/_topnavbar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 853ms (Views: 792.2ms | ActiveRecord: 31.8ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:35:32 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.8ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.9ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (19.0ms)
  Rendered layouts/_headcontent.html.erb (586.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (1.7ms)
  [1m[35m (10.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (62.5ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (2.5ms)
Completed 200 OK in 744ms (Views: 694.5ms | ActiveRecord: 24.4ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:35:55 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.8ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mDepartment Load (2.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (3.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (16.1ms)
  Rendered layouts/_headcontent.html.erb (644.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.9ms)
  Rendered layouts/_logoheader.html.erb (1.3ms)
  [1m[35m (10.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (110.4ms)
  Rendered layouts/_topnavbar.html.erb (11.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 862ms (Views: 803.1ms | ActiveRecord: 26.9ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:43:18 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (20.3ms)
Completed 500 Internal Server Error in 189ms (ActiveRecord: 16.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `location' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__3379755457522094941_70159969864200'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/b290317a2cc7aec5/variables" for 127.0.0.1 at 2017-03-29 10:43:18 +0300
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (3.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:44:00 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (6.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (8.0ms)
Completed 500 Internal Server Error in 192ms (ActiveRecord: 12.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `location' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__3379755457522094941_70159935867020'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/2d14c2c5d2070454/variables" for 127.0.0.1 at 2017-03-29 10:44:01 +0300
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:44:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (8.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (54.5ms)
Completed 500 Internal Server Error in 302ms (ActiveRecord: 26.2ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `location' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__1810139075932960297_69959486588540'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/1d5068f229411e0a/variables" for 127.0.0.1 at 2017-03-29 10:44:14 +0300
  [1m[36mDepartment Load (0.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:44:44 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (60.5ms)
Completed 500 Internal Server Error in 117ms (ActiveRecord: 7.0ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__1810139075932960297_47228392864440'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/7d2697c77d7ff8fd/variables" for 127.0.0.1 at 2017-03-29 10:44:45 +0300
  [1m[36mDepartment Load (1.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (2.3ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 10:45:07 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (1.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (5.3ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (51.3ms)
  Rendered users/edit.html.erb within layouts/admin (61.3ms)
  Rendered layouts/_headcontent.html.erb (2565.1ms)
  Rendered layouts/_layout_common_js.html.erb (3.5ms)
  Rendered layouts/_logoheader.html.erb (1.9ms)
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (151.0ms)
  Rendered layouts/_topnavbar.html.erb (5.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 2941ms (Views: 2814.3ms | ActiveRecord: 29.8ms)


Started PATCH "/en/users/27" for 127.0.0.1 at 2017-03-29 10:45:26 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ymU5TZnCf1/5fzpcQPLoYCehSpU697O3nMN+vkgsGkWY5ABMwvoVfEfWU9qIIFKnKGlpABgCDfurC5OVQA6lPA==", "user"=>{"first_name"=>"bb", "last_name"=>"nn", "email"=>"beza@cats.org", "is_active"=>"1", "user_type_id"=>"3", "department"=>"2", "hub"=>"2", "region"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "users" SET "is_active" = $1, "hub" = $2, "user_type_id" = $3, "department" = $4, "updated_at" = $5 WHERE "users"."id" = $6[0m  [["is_active", true], ["hub", "2"], ["user_type_id", 3], ["department", 2], ["updated_at", 2017-03-29 07:45:26 UTC], ["id", 27]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 55ms (ActiveRecord: 8.9ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 10:45:26 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (2.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (175.1ms)
  Rendered layouts/_headcontent.html.erb (537.0ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (10.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (52.8ms)
  Rendered layouts/_topnavbar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 834ms (Views: 782.6ms | ActiveRecord: 26.1ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:45:31 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (16.2ms)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 8.1ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__1810139075932960297_69959414103860'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/56c0e39ba96bbb43/variables" for 127.0.0.1 at 2017-03-29 10:45:31 +0300
  [1m[36mDepartment Load (3.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (1.1ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:47:01 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (92.8ms)
Completed 500 Internal Server Error in 159ms (ActiveRecord: 14.7ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `locations' for #<User:0x007f41640d6810>
Did you mean?  location
               location=:
  activemodel (5.0.2) lib/active_model/attribute_methods.rb:433:in `method_missing'
  rolify (5.1.0) lib/rolify/role.rb:98:in `method_missing'
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__1810139075932960297_69959413942040'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/dc76794b17b13650/variables" for 127.0.0.1 at 2017-03-29 10:47:01 +0300
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 10:48:17 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (84.9ms)
Completed 500 Internal Server Error in 366ms (ActiveRecord: 31.8ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb___3928364904126652773_69823054251880'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/88b3c032c143e6e3/variables" for 127.0.0.1 at 2017-03-29 10:48:18 +0300
  [1m[36mDepartment Load (1.8ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.6ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddDepartmentToUsers (20170328134548)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DROP "department"[0m
  [1m[35mSQL (3.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170328134548"]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "department" integer[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "users" ADD "region" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "department" integer[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" ADD "region" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "department" integer[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" ADD "region" character varying[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ADD "hub" character varying[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "role_types_id" integer[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "regional_user" boolean[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "hub_user" boolean[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "case_team" integer[0m
  [1m[35m (5.5ms)[0m  [1m[35mALTER TABLE "users" ADD "is_admin" boolean[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "users" ADD "is_case_team" boolean[0m
  [1m[35mSQL (4.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20170328133734"]]
  [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DROP "is_case_team"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP "is_admin"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "case_team"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP "hub_user"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "regional_user"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "role_types_id"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "hub"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DROP "region"[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "users" DROP "department"[0m
  [1m[35m (5.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveFieldsFromUser (20170328133734)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DROP "is_case_team"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "is_admin"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP "case_team"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP "hub_user"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DROP "regional_user"[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DROP "role_types_id"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DROP "hub"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DROP "region"[0m
  [1m[35mSQL (4.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170328133734"]]
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddRefrencesToUser (20170329081608)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "location_id" integer[0m
  [1m[35m (230.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_location_id" ON "users"  ("location_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "users" ADD "hub_id" integer[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_hub_id" ON "users"  ("hub_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "users" ADD "department_id" integer[0m
  [1m[35m (27.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_department_id" ON "users"  ("department_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20170329081608"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(782232805093510260);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(782232805093510260)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 11:23:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tLABEL
...e(location_type: location_type: location.location_type[:regi...
...                               ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:33: syntax error, unexpected ')', expecting keyword_end
...ocation.location_type[:region]).map{ |h| [h.name, h.id]}    ...
...                               ^:
  app/controllers/users_controller.rb:33:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/3c6795c22e7824bb/variables" for 127.0.0.1 at 2017-03-29 11:23:27 +0300
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 11:26:21 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected [, expecting ')'
..._type: Location.location_type [:region]).map{ |h| [h.name, h...
...                               ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:33: syntax error, unexpected ')', expecting keyword_end
...cation.location_type [:region]).map{ |h| [h.name, h.id]}    ...
...                               ^:
  app/controllers/users_controller.rb:33:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f24c3aa4fd5e909a/variables" for 127.0.0.1 at 2017-03-29 11:26:21 +0300
Started GET "/users/27" for 127.0.0.1 at 2017-03-29 11:27:54 +0300
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (9.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (5.6ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  Rendered users/show.html.erb within layouts/admin (99.9ms)
Completed 500 Internal Server Error in 374ms (ActiveRecord: 40.5ms)


DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:7)
DEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from initialize at /home/dawit/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/better_errors-2.1.1/lib/better_errors/raised_exception.rb:8)

NoMethodError - undefined method `name' for nil:NilClass:
  app/views/users/show.html.erb:68:in `_app_views_users_show_html_erb__149536888194998161_47370947615220'
  actionview (5.0.2) lib/action_view/template.rb:159:in `block in render'
  activesupport (5.0.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:354:in `instrument'
  actionview (5.0.2) lib/action_view/template.rb:157:in `render'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (5.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (5.0.2) lib/action_view/rendering.rb:104:in `_render_template'
  actionpack (5.0.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (5.0.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:52:in `render_to_body'
  actionpack (5.0.2) lib/action_controller/metal/renderers.rb:142:in `render_to_body'
  actionpack (5.0.2) lib/abstract_controller/rendering.rb:26:in `render'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:36:in `render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/dawit/.rbenv/versions/2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'
  activesupport (5.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (5.0.2) lib/action_controller/metal/implicit_render.rb:36:in `default_render'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f33f69954b65d5c9/variables" for 127.0.0.1 at 2017-03-29 11:27:56 +0300
  [1m[36mDepartment Load (5.0ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (0.5ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:28:21 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Completed 500 Internal Server Error in 102ms (ActiveRecord: 15.6ms)



NoMethodError - undefined method `location_type' for #<Class:0x00562ad108c828>
Did you mean?  location_types:
  activerecord (5.0.2) lib/active_record/dynamic_matchers.rb:21:in `method_missing'
  app/controllers/users_controller.rb:33:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/934bc86e785ab9bc/variables" for 127.0.0.1 at 2017-03-29 11:28:21 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:32:07 +0300
  [1m[36mActiveRecord::SchemaMigration Load (6.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected [, expecting ')'
..._type: Location.location_type [:region]).map{ |h| [h.name, h...
...                               ^
/home/dawit/cats/cats-web/app/controllers/users_controller.rb:33: syntax error, unexpected ')', expecting keyword_end
...cation.location_type [:region]).map{ |h| [h.name, h.id]}    ...
...                               ^:
  app/controllers/users_controller.rb:33:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/d0c237680a884758/variables" for 127.0.0.1 at 2017-03-29 11:32:07 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:35:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (6.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (0.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.9ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (47.9ms)
  Rendered users/edit.html.erb within layouts/admin (83.9ms)
  Rendered layouts/_headcontent.html.erb (2606.7ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (9.1ms)
  [1m[35m (8.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (186.0ms)
  Rendered layouts/_topnavbar.html.erb (11.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 3234ms (Views: 2909.2ms | ActiveRecord: 72.0ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:36:57 +0300
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m

SyntaxError - syntax error, unexpected tIVAR, expecting ')'
    @hubs = Hub.all.map{ |r| [r.name, r.id]}  # hubs
         ^:
  app/controllers/users_controller.rb:34:in `'
  activesupport (5.0.2) lib/active_support/dependencies.rb:477:in `block in load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:662:in `new_constants_in'
  activesupport (5.0.2) lib/active_support/dependencies.rb:476:in `load_file'
  activesupport (5.0.2) lib/active_support/dependencies.rb:375:in `block in require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `block in load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:12:in `block in loading'
  activesupport (5.0.2) lib/active_support/concurrency/share_lock.rb:150:in `exclusive'
  activesupport (5.0.2) lib/active_support/dependencies/interlock.rb:11:in `loading'
  activesupport (5.0.2) lib/active_support/dependencies.rb:37:in `load_interlock'
  activesupport (5.0.2) lib/active_support/dependencies.rb:358:in `require_or_load'
  activesupport (5.0.2) lib/active_support/dependencies.rb:511:in `load_missing_constant'
  activesupport (5.0.2) lib/active_support/dependencies.rb:203:in `const_missing'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:268:in `block in constantize'
  activesupport (5.0.2) lib/active_support/inflector/methods.rb:266:in `constantize'
  activesupport (5.0.2) lib/active_support/dependencies.rb:583:in `get'
  activesupport (5.0.2) lib/active_support/dependencies.rb:614:in `constantize'
  actionpack (5.0.2) lib/action_dispatch/http/request.rb:81:in `controller_class'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:44:in `controller'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:30:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/f137729923446954/variables" for 127.0.0.1 at 2017-03-29 11:36:57 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:37:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
Completed 500 Internal Server Error in 241ms (ActiveRecord: 33.6ms)



NoMethodError - undefined method `location_type' for #<Class:0x007f7c00b4e6b8>
Did you mean?  location_types:
  activerecord (5.0.2) lib/active_record/dynamic_matchers.rb:21:in `method_missing'
  app/controllers/users_controller.rb:33:in `edit'
  actionpack (5.0.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:188:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rendering.rb:30:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (5.0.2) lib/active_support/callbacks.rb:126:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:448:in `block (2 levels) in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'
  app/controllers/application_controller.rb:34:in `set_current_user'
  activesupport (5.0.2) lib/active_support/callbacks.rb:382:in `block in make_lambda'
  activesupport (5.0.2) lib/active_support/callbacks.rb:285:in `block in halting'
  activesupport (5.0.2) lib/active_support/callbacks.rb:447:in `block in around'
  activesupport (5.0.2) lib/active_support/callbacks.rb:455:in `call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:101:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/rescue.rb:20:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (5.0.2) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (5.0.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (5.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (5.0.2) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'
  activerecord (5.0.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (5.0.2) lib/abstract_controller/base.rb:126:in `process'
  actionview (5.0.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'
  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'
  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'
  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'
  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
  warden (1.2.7) lib/warden/manager.rb:35:in `call'
  rack (2.0.1) lib/rack/etag.rb:25:in `call'
  rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
  rack (2.0.1) lib/rack/head.rb:12:in `call'
  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'
  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
  activerecord (5.0.2) lib/active_record/migration.rb:553:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'
  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
  web-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'
  web-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (3.4.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'
  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'
  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'
  rack (2.0.1) lib/rack/method_override.rb:22:in `call'
  rack (2.0.1) lib/rack/runtime.rb:22:in `call'
  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'
  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
  railties (5.0.2) lib/rails/engine.rb:522:in `call'
  puma (3.7.1) lib/puma/configuration.rb:232:in `call'
  puma (3.7.1) lib/puma/server.rb:578:in `handle_request'
  puma (3.7.1) lib/puma/server.rb:415:in `process_client'
  puma (3.7.1) lib/puma/server.rb:275:in `block in run'
  puma (3.7.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'

Started POST "/__better_errors/fcf12e70552fea1b/variables" for 127.0.0.1 at 2017-03-29 11:37:27 +0300
Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:37:59 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (2.7ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.8ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (41.6ms)
  Rendered users/edit.html.erb within layouts/admin (68.4ms)
  Rendered layouts/_headcontent.html.erb (2669.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.4ms)
  [1m[35m (4.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (182.7ms)
  Rendered layouts/_topnavbar.html.erb (6.7ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 3257ms (Views: 2938.5ms | ActiveRecord: 86.5ms)


Started PATCH "/en/users/27" for 127.0.0.1 at 2017-03-29 11:38:38 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AyxcGX9Gk54p7gVkS9XeYWK5ONQbQvSP/NkZmkHhfilRrWUYJH75vZdHbOKDB2SmbXEbQTm3SsPLEfSxScPBUA==", "user"=>{"first_name"=>"bb", "last_name"=>"nn", "email"=>"beza@cats.org", "mobile_no"=>"0912615598", "is_active"=>"1", "user_type_id"=>"3", "department_id"=>"2", "hub_id"=>"2", "location_id"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (8.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
Unpermitted parameters: mobile_no, department_id, hub_id, location_id
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 30ms (ActiveRecord: 9.4ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 11:38:38 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (1.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (194.3ms)
  Rendered layouts/_headcontent.html.erb (597.4ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (16.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (61.4ms)
  Rendered layouts/_topnavbar.html.erb (3.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 927ms (Views: 873.9ms | ActiveRecord: 30.4ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:38:45 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (9.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (4.5ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (4.3ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (12.9ms)
  Rendered users/edit.html.erb within layouts/admin (20.3ms)
  Rendered layouts/_headcontent.html.erb (615.3ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_logoheader.html.erb (7.9ms)
  [1m[35m (5.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.9ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 775ms (Views: 723.5ms | ActiveRecord: 30.5ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:40:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (5.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: around_filter is deprecated and will be removed in Rails 5.1. Use around_action instead. (called from <class:ApplicationController> at /home/dawit/cats/cats-web/app/controllers/application_controller.rb:5)
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (4.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (2.8ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.8ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (55.9ms)
  Rendered users/edit.html.erb within layouts/admin (72.2ms)
  Rendered layouts/_headcontent.html.erb (2705.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.5ms)
  Rendered layouts/_logoheader.html.erb (18.7ms)
  [1m[35m (6.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (217.8ms)
  Rendered layouts/_topnavbar.html.erb (10.1ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 3328ms (Views: 3017.7ms | ActiveRecord: 57.1ms)


Started PATCH "/en/users/27" for 127.0.0.1 at 2017-03-29 11:40:19 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+yZyMy2REct52GMeJ3mrGPYPmNgUD3I9kwImjJ9k1iCpp0sydql76MdxCpjvqxHf+ce7TTb6zHGkysunl0ZpWQ==", "user"=>{"first_name"=>"bb", "last_name"=>"nn", "email"=>"beza@cats.org", "mobile_no"=>"0912615598", "is_active"=>"1", "user_type_id"=>"3", "department_id"=>"1", "hub_id"=>"1", "location_id"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  [1m[33mUPDATE "users" SET "hub_id" = $1, "location_id" = $2, "mobile_no" = $3, "department_id" = $4, "updated_at" = $5 WHERE "users"."id" = $6[0m  [["hub_id", 1], ["location_id", 4], ["mobile_no", "0912615598"], ["department_id", 1], ["updated_at", 2017-03-29 08:40:19 UTC], ["id", 27]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 44ms (ActiveRecord: 11.0ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 11:40:19 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (145.3ms)
  Rendered layouts/_headcontent.html.erb (622.3ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (51.0ms)
  Rendered layouts/_topnavbar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 879ms (Views: 825.7ms | ActiveRecord: 38.2ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:40:23 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (5.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.0ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (0.7ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (10.0ms)
  Rendered users/edit.html.erb within layouts/admin (19.1ms)
  Rendered layouts/_headcontent.html.erb (717.0ms)
  Rendered layouts/_layout_common_js.html.erb (8.1ms)
  Rendered layouts/_logoheader.html.erb (8.1ms)
  [1m[35m (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (57.4ms)
  Rendered layouts/_topnavbar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 882ms (Views: 832.4ms | ActiveRecord: 19.1ms)


Started PATCH "/en/users/27" for 127.0.0.1 at 2017-03-29 11:40:36 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OY38Wn2HpQdwFUjw1w/Sgflq+/f4f+32FP1F8cwT0S5rDMVbJr/PJM68IXYf3WhG9qLYYtqKU7ojNajaxDFuVw==", "user"=>{"first_name"=>"bb", "last_name"=>"nn", "email"=>"beza@cats.org", "mobile_no"=>"0912615598", "is_active"=>"1", "user_type_id"=>"3", "department_id"=>"4", "hub_id"=>"1", "location_id"=>"4"}, "commit"=>"Update User", "locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "users" SET "department_id" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["department_id", 4], ["updated_at", 2017-03-29 08:40:36 UTC], ["id", 27]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/en/users
Completed 302 Found in 50ms (ActiveRecord: 21.1ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 11:40:36 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (11.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (9.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (93.5ms)
  Rendered layouts/_headcontent.html.erb (580.6ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (11.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (121.6ms)
  Rendered layouts/_topnavbar.html.erb (3.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 859ms (Views: 817.5ms | ActiveRecord: 30.2ms)


Started GET "/en/users/27/edit" for 127.0.0.1 at 2017-03-29 11:40:40 +0300
Processing by UsersController#edit as HTML
  Parameters: {"locale"=>"en", "id"=>"27"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mDepartment Load (2.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL[0m
  [1m[36mLocation Load (3.4ms)[0m  [1m[34mSELECT "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."location_type" = $1[0m  [["location_type", 1]]
  [1m[36mHub Load (3.2ms)[0m  [1m[34mSELECT "hubs".* FROM "hubs" WHERE "hubs"."deleted_at" IS NULL[0m
  Rendering users/edit.html.erb within layouts/admin
  Rendered users/_form.html.erb (12.9ms)
  Rendered users/edit.html.erb within layouts/admin (18.8ms)
  Rendered layouts/_headcontent.html.erb (679.1ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (4.7ms)
  [1m[35m (7.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (60.5ms)
  Rendered layouts/_topnavbar.html.erb (5.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 828ms (Views: 786.6ms | ActiveRecord: 18.8ms)


Started GET "/en/users" for 127.0.0.1 at 2017-03-29 11:40:51 +0300
Processing by UsersController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendering users/index.html.erb within layouts/admin
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."deleted_at" IS NULL[0m
  [1m[36mRole Load (5.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 26]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mRole Load (2.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mRole Load (2.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "roles"."deleted_at" IS NULL AND "users_roles"."user_id" = $1[0m  [["user_id", 27]]
  Rendered users/index.html.erb within layouts/admin (95.9ms)
  Rendered layouts/_headcontent.html.erb (648.2ms)
  Rendered layouts/_layout_common_js.html.erb (4.7ms)
  Rendered layouts/_logoheader.html.erb (10.4ms)
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (49.6ms)
  Rendered layouts/_topnavbar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 863ms (Views: 825.6ms | ActiveRecord: 18.9ms)


Started GET "/users/27" for 127.0.0.1 at 2017-03-29 11:40:55 +0300
Processing by UsersController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "users_departments"."department_id" FROM "users_departments" WHERE "users_departments"."deleted_at" IS NULL AND "users_departments"."user_id" = $1[0m  [["user_id", 27]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "users_permissions"."permission_id" FROM "users_permissions" WHERE "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1[0m  [["user_id", 27]]
  Rendering users/show.html.erb within layouts/admin
  [1m[36mLocation Load (2.0ms)[0m  [1m[34mSELECT  "locations".* FROM "locations" WHERE "locations"."deleted_at" IS NULL AND "locations"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDepartment Load (0.9ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."deleted_at" IS NULL AND "departments"."id" IN (1, 2)[0m
  [1m[36mPermission Load (1.4ms)[0m  [1m[34mSELECT "permissions".* FROM "permissions" WHERE "permissions"."deleted_at" IS NULL AND "permissions"."id" IN (1, 2, 3, 4)[0m
  Rendered users/show.html.erb within layouts/admin (69.1ms)
  Rendered layouts/_headcontent.html.erb (674.8ms)
  Rendered layouts/_layout_common_js.html.erb (0.6ms)
  Rendered layouts/_logoheader.html.erb (5.1ms)
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "permissions" INNER JOIN "users_permissions" ON "permissions"."id" = "users_permissions"."permission_id" WHERE "permissions"."deleted_at" IS NULL AND "users_permissions"."deleted_at" IS NULL AND "users_permissions"."user_id" = $1 AND "permissions"."name" = $2[0m  [["user_id", 21], ["name", "HRD"]]
  Rendered layouts/_settingnav.html.erb (53.4ms)
  Rendered layouts/_topnavbar.html.erb (6.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 923ms (Views: 847.4ms | ActiveRecord: 16.8ms)


