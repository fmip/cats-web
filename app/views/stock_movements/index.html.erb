<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-sm-4">
    <h2>Stock Movements</h2>
    <ol class="breadcrumb">
      <li>
        <a href="#">Lookups</a>
      </li>
      <li class="active">
        <strong>Stock Movements</strong>
      </li>
    </ol>
  </div>
  <div class="col-sm-8">
    <div class="title-action">
      <%= link_to 'New Stock Movement', new_stock_movement_path, :class => "btn btn-primary"%>
    </div>
  </div>
</div>

<div class="row wrapper wrapper-content">
  <div class="ibox float-e-margins">
    <div class="ibox-content">

      <table class="table table-striped">
        <thead>
          <tr>
            <th>Source</th>          
            <th>Destination</th>          
            <th>Project</th>
            <th>Quantity</th>
            <th>Unit of Measure</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @stock_movements.each do |stock_movement| %>
          <tr>
            <td><%= link_to stock_movement&.source_hub&.name + " > " + stock_movement&.source_warehouse&.name, stock_movement_path(stock_movement.id) %></td>
            <td><%= stock_movement&.destination_hub&.name + " > " + stock_movement&.destination_warehouse&.name %></td>
            <td><%= stock_movement&.project&.project_code + " [" + stock_movement&.commodity&.name + "]" %></td>
            <td><%= stock_movement.quantity %></td>
            <td><%= stock_movement&.unit_of_measure&.name %></td>
            <% if (stock_movement.status == "closed") %>
              <td><span class="label label-default"><%= stock_movement.status %></span></td>
            <% else %>
              <td><span class="label label-primary"><%= stock_movement.status %></span></td>
            <% end %>
            <td>
              <%= link_to 'Edit', edit_stock_movement_path(stock_movement), :class => "btn btn-warning" %> &middot;
              <% if (stock_movement.status == "open") %>
                <%= link_to 'Close', "/stock_movements/close/" + stock_movement.id.to_s, class: "btn btn-default", method: :post, data: { confirm: 'Are you sure you want to close this Stock Transfer?' } %> &middot;
              <% end %>
              <%= link_to 'Delete', stock_movement, class: "btn btn-danger", method: :delete, data: { confirm: 'Are you sure you want to delete this Stock Transfer?' } %>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>

    </div>
  </div>
</div>
