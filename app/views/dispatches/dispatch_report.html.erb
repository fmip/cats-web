<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-sm-4">
    <h2>Dispatch Report</h2>
   
  </div>
   <div class="col-sm-8">
    <div class="title-action">
      <%= link_to 'Cancel', dispatches_path,  :class => "btn btn-default"%>
    </div>
  </div>
</div>


<div class="ibox float-e-margins border-bottom">
  <div class="ibox-content">
      <%= form_tag( 'dispatch_report_generate?format=pdf' ,{ class: 'form-inline', style: 'display: inline-block;', role: 'form', method: 'POST'}) do %>
       
        <div class="form-group">
          <%= label_tag :hub, "Hub", { :class => ' control-label'} %>

          <div class="">
            <%= select_tag  :hub,  options_from_collection_for_select( Hub.all, 'id', 'name', params[:hub] ) , {:required => true , :prompt => "-- Choose --", :class => 'form-control col-md-3 data-parsley-required' }  %>
          </div>
        </div>
        <div class="form-group">
          <%= label_tag :status, "Status", { :class => ' control-label'} %>

          <div class="">
            <%= select_tag  :status,  options_for_select( ["Draft", "Posted"], params[:status]) , { :required => true , :prompt => "-- Choose --", :class => 'form-control col-md-3' }  %>
          </div>
        </div>
        <div class="form-group">
          <%= label_tag :dispatch_date, "Dispatch Date", { :class => ' control-label'} %>

          <div class="">
            <%= text_field_tag  :dispatch_date, params[:dispatch_date], { :required => true,  id: 'dispatch-date-picker',class: 'form-control'}  %>
          </div>
        </div>
        
        <div class="form-group">
          <label for=""></label>
          <div>
              <input type="submit" name="filter" value="Generate report" class="btn btn-sm btn-primary" />
          </div>
        </div>

        <% end %>
  </div>
</div>

<script type="text/javascript">
  $( function() { 
    $('#dispatch-date-picker').daterangepicker(
      {
          locale: {
            format: 'DD/MM/YYYY'
          },
          maxDate: '0', 
          autoUpdateInput: false
      }, 
      function( start, end  ) { 
        $('#dispatch-date-picker').val( start.format('DD/MM/YYYY') + ' - ' + end.format('DD/MM/YYYY')); 
      }
    ); 
  });
  </script>